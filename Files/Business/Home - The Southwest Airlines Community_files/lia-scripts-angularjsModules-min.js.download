;(function(angular){'use strict';angular.module('li.directives.common.element-hook',[]).directive('liCommonElementHook',function(){return{restrict:'A',scope:{liCommonElementHook:'='},link:function link($scope,$element){$scope.liCommonElementHook=$element;}};});})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};angular.module('li.services.utils.lodash-utils',[]).factory('$liLodashUtils',['$window',function($window){;(function(){function n(n,r,t){if(r!==r){n:{for(r=n.length,t+=-1;++t<r;){var e=n[t];if(e!==e){n=t;break n;}}n=-1;}return n;}for(t-=1,e=n.length;++t<e;){if(n[t]===r)return t;}return-1;}function r(n){return null==n?"":n+"";}function t(n){return hr[n];}function e(n){return vr[n];}function u(n){return!!n&&(typeof n==='undefined'?'undefined':_typeof(n))=="object";}function o(n){return gr[n];}function i(){}function a(n){var r=n?n.length:0;for(this.data={hash:Mr(null),set:new Fr()};r--;){this.push(n[r]);}}function f(n,r){var t=n.data;return(typeof r=="string"||hn(r)?t.set.has(r):t.hash[r])?0:-1;}function c(n,r){var t=-1,e=n.length;for(r||(r=Array(e));++t<e;){r[t]=n[t];}return r;}function l(n,r){for(var t=-1,e=n.length;++t<e&&false!==r(n[t],t,n);){}return n;}function s(n,r){for(var t=-1,e=n.length,u=-1,o=[];++t<e;){var i=n[t];r(i,t,n)&&(o[++u]=i);}return o;}function p(n,r){for(var t=-1,e=n.length,u=Array(e);++t<e;){u[t]=r(n[t],t,n);}return u;}function h(n,r){for(var t=-1,e=n.length;++t<e;){if(r(n[t],t,n))return true;}return false;}function v(n,r){var t;if(null==r)t=n;else{t=ft(r);var e=n;e||(e={});for(var u=-1,o=t.length;++u<o;){var i=t[u];e[i]=r[i];}t=e;}return t;}function g(n,r,t){var e=typeof n==='undefined'?'undefined':_typeof(n);return"function"==e?r===Sn?n:P(n,r,t):null==n?On:"object"==e?I(n):r===Sn?In(n):S(n,r);}function y(n,r,t,e,u,o,i){var a;if(t&&(a=u?t(n,e,u):t(n)),a!==Sn)return a;if(!hn(n))return n;if(e=it(n)){if(a=Z(n),!r)return c(n,a);}else{var f=_r.call(n),s=f==Fn;if(f!=qn&&f!=_n&&(!s||u))return pr[f]?Y(n,f,r):u?n:{};if(wr(n))return u?n:{};if(a=V(s?{}:n),!r)return v(a,n);}for(o||(o=[]),i||(i=[]),u=o.length;u--;){if(o[u]==n)return i[u];}return o.push(n),i.push(a),(e?l:A)(n,function(e,u){a[u]=y(e,r,t,u,n,o,i);}),a;}function b(n,r,t,e){var u=e,o=u;return Xr(n,function(n,i,a){i=+r(n,i,a),(t(i,u)||i===e&&i===o)&&(u=i,o=n);}),o;}function d(n,r){var t=[];return Xr(n,function(n,e,u){r(n,e,u)&&t.push(n);}),t;}function x(n,r,t,e){var u;return t(n,function(n,t,o){return r(n,t,o)?(u=e?t:n,false):void 0;}),u;}function m(n,r,t,e){e||(e=[]);for(var o=-1,i=n.length;++o<i;){var a=n[o];if(u(a)&&z(a)&&(t||it(a)||ln(a))){if(r)m(a,r,t,e);else for(var f=e,c=-1,l=a.length,s=f.length;++c<l;){f[s+c]=a[c];}}else t||(e[e.length]=a);}return e;}function A(n,r){return nt(n,r,ft);}function j(n,r,t){if(null!=n){n=X(n),t!==Sn&&t in n&&(r=[t]),t=0;for(var e=r.length;null!=n&&t<e;){n=X(n)[r[t++]];}return t&&t==e?n:Sn;}}function w(n,r,t,e,o,i){if(n===r)n=true;else if(null==n||null==r||!hn(n)&&!u(r))n=n!==n&&r!==r;else n:{var a=w,f=it(n),c=it(r),l=Un,s=Un;f||(l=_r.call(n),l==_n?l=qn:l!=qn&&(f=yn(n))),c||(s=_r.call(r),s==_n?s=qn:s!=qn&&yn(r));var p=l==qn&&!wr(n),c=s==qn&&!wr(r),s=l==s;if(!s||f||p){if(!e&&(l=p&&kr.call(n,"__wrapped__"),c=c&&kr.call(r,"__wrapped__"),l||c)){n=a(l?n.value():n,c?r.value():r,t,e,o,i);break n;}if(s){for(o||(o=[]),i||(i=[]),l=o.length;l--;){if(o[l]==n){n=i[l]==r;break n;}}o.push(n),i.push(r),n=(f?q:R)(n,r,a,t,e,o,i),o.pop(),i.pop();}else n=false;}else n=M(n,r,l);}return n;}function O(n,r){var t=r.length,e=t;if(null==n)return!e;for(n=X(n);t--;){var u=r[t];if(u[2]?u[1]!==n[u[0]]:!(u[0]in n))return false;}for(;++t<e;){var u=r[t],o=u[0],i=n[o],a=u[1];if(u[2]){if(i===Sn&&!(o in n))return false;}else if(u=Sn,u===Sn?!w(a,i,void 0,true):!u)return false;}return true;}function E(n,r){var t=-1,e=z(n)?Array(n.length):[];return Xr(n,function(n,u,o){e[++t]=r(n,u,o);}),e;}function I(n){var r=D(n);if(1==r.length&&r[0][2]){var t=r[0][0],e=r[0][1];return function(n){return null==n?false:(n=X(n),n[t]===e&&(e!==Sn||t in n));};}return function(n){return O(n,r);};}function S(n,r){var t=it(n),e=H(n)&&r===r&&!hn(r),u=n+"";return n=nn(n),function(o){if(null==o)return false;var i=u;if(o=X(o),!(!t&&e||i in o)){if(o=1==n.length?o:j(o,U(n)),null==o)return false;i=tn(n),o=X(o);}return o[i]===r?r!==Sn||i in o:w(r,o[i],Sn,true);};}function T(n){return function(r){return null==r?Sn:X(r)[n];};}function k(n){var r=n+"";return n=nn(n),function(t){return j(t,n,r);};}function _(n,r,t,e,u){return u(n,function(n,u,o){t=e?(e=false,n):r(t,n,u,o);}),t;}function U(n){var r=0,t=-1,e=-1,u=n.length,r=null==r?0:+r||0;for(0>r&&(r=-r>u?0:u+r),t=t===Sn||t>u?u:+t||0,0>t&&(t+=u),u=r>t?0:t-r>>>0,r>>>=0,t=Array(u);++e<u;){t[e]=n[e+r];}return t;}function C(n,r){var t=n.length;for(n.sort(r);t--;){n[t]=n[t].c;}return n;}function N(n,r,t){var e=W(),u=-1;return r=p(r,function(n){return e(n);}),n=E(n,function(n){return{a:p(r,function(r){return r(n);}),b:++u,c:n};}),C(n,function(n,r){var e;n:{e=-1;for(var u=n.a,o=r.a,i=u.length,a=t.length;++e<i;){var f;r:{f=u[e];var c=o[e];if(f!==c){var l=null===f,s=f===Sn,p=f===f,h=null===c,v=c===Sn,g=c===c;if(f>c&&!h||!p||l&&!v&&g||s&&g){f=1;break r;}if(f<c&&!l||!g||h&&!s&&p||v&&p){f=-1;break r;}}f=0;}if(f){if(e>=a){e=f;break n;}e=t[e],e=f*("asc"===e||true===e?1:-1);break n;}}e=n.b-r.b;}return e;});}function P(n,r,t){if(typeof n!="function")return On;if(r===Sn)return n;switch(t){case 1:return function(t){return n.call(r,t);};case 3:return function(t,e,u){return n.call(r,t,e,u);};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o);};case 5:return function(t,e,u,o,i){return n.call(r,t,e,u,o,i);};}return function(){return n.apply(r,arguments);};}function F(n){var r=new Nr(n.byteLength);return new qr(r).set(new qr(n)),r;}function $(n,r){return function(t,e,u){if(u&&K(t,e,u)&&(e=Sn),e=W(e,u,3),1==e.length){it(t)||(t=null==t?[]:z(t)?i.support.unindexedChars&&gn(t)?t.split(""):hn(t)?t:Object(t):mn(t)),u=t;for(var o=e,a=-1,f=u.length,c=r,l=c;++a<f;){var s=u[a],p=+o(s);n(p,c)&&(c=p,l=s);}if(u=l,!t.length||u!==r)return u;}return b(t,e,n,r);};}function q(n,r,t,e,u,o,i){var a=-1,f=n.length,c=r.length;if(f!=c&&(!u||c<=f))return false;for(;++a<f;){var l=n[a],c=r[a],s=e?e(u?c:l,u?l:c,a):Sn;if(s!==Sn){if(s)continue;return false;}if(u){if(!h(r,function(n){return l===n||t(l,n,e,u,o,i);}))return false;}else if(l!==c&&!t(l,c,e,u,o,i))return false;}return true;}function M(n,r,t){switch(t){case Cn:case Nn:return+n==+r;case Pn:return n.name==r.name&&n.message==r.message;case $n:return n!=+n?r!=+r:n==+r;case Mn:case Rn:return n==r+"";}return false;}function R(n,r,t,e,u,o,i){var a=ft(n),f=a.length,c=ft(r).length;if(f!=c&&!u)return false;for(c=f;c--;){var l=a[c];if(!(u?l in r:kr.call(r,l)))return false;}for(var s=u;++c<f;){var l=a[c],p=n[l],h=r[l],v=e?e(u?h:p,u?p:h,l):Sn;if(v===Sn?!t(p,h,e,u,o,i):!v)return false;s||(s="constructor"==l);}return s||(t=n.constructor,e=r.constructor,!(t!=e&&"constructor"in n&&"constructor"in r)||typeof t=="function"&&t instanceof t&&typeof e=="function"&&e instanceof e)?true:false;}function W(n,r,t){var e=i.callback||wn,e=e===wn?g:e;return t?e(n,r,t):e;}function B(){var r=i.indexOf||rn;return r=r===rn?n:r;}function D(n){n=xn(n);for(var r=n.length;r--;){var t=n[r][1];n[r][2]=t===t&&!hn(t);}return n;}function L(n,r){var t=null==n?Sn:n[r];return vn(t)?t:Sn;}function Z(n){var r=n.length,t=new n.constructor(r);return r&&"string"==typeof n[0]&&kr.call(n,"index")&&(t.index=n.index,t.input=n.input),t;}function V(n){return n=n.constructor,typeof n=="function"&&n instanceof n||(n=Object),new n();}function Y(n,r,t){var e=n.constructor;switch(r){case Wn:return F(n);case Cn:case Nn:return new e(+n);case Bn:case Dn:case Ln:case Zn:case Vn:case Yn:case zn:case Gn:case Kn:return e instanceof e&&(e=Hr[r]),r=n.buffer,new e(t?F(r):r,n.byteOffset,n.length);case $n:case Rn:return new e(n);case Mn:var u=new e(n.source,or.exec(n));u.lastIndex=n.lastIndex;}return u;}function z(n){return null!=n&&J(rt(n));}function G(n,r){return n=typeof n=="number"||ar.test(n)?+n:-1,r=null==r?Kr:r,-1<n&&0==n%1&&n<r;}
function K(n,r,t){if(!hn(t))return false;var e=typeof r==='undefined'?'undefined':_typeof(r);return("number"==e?z(t)&&G(r,t.length):"string"==e&&r in t)?(r=t[r],n===n?n===r:r!==r):false;}function H(n,r){var t=typeof n==='undefined'?'undefined':_typeof(n);return"string"==t&&rr.test(n)||"number"==t?true:it(n)?false:!nr.test(n)||null!=r&&n in X(r);}function J(n){return typeof n=="number"&&-1<n&&0==n%1&&n<=Kr;}function Q(n){for(var r=dn(n),t=r.length,e=t&&n.length,u=!!e&&J(e)&&(it(n)||ln(n)||gn(n)),o=-1,i=[];++o<t;){var a=r[o];(u&&G(a,e)||kr.call(n,a))&&i.push(a);}return i;}function X(n){if(i.support.unindexedChars&&gn(n)){for(var r=-1,t=n.length,e=Object(n);++r<t;){e[r]=n.charAt(r);}return e;}return hn(n)?n:Object(n);}function nn(n){if(it(n))return n;var t=[];return r(n).replace(tr,function(n,r,e,u){t.push(e?u.replace(ur,"$1"):r||n);}),t;}function rn(r,t,e){var u=r?r.length:0;if(!u)return-1;if(typeof e=="number")e=0>e?Dr(u+e,0):e;else if(e){e=0;var o=r?r.length:e;if(typeof t!="number"||t!==t||o>Gr){o=On,e=o(t);for(var i=0,a=r?r.length:0,f=e!==e,c=null===e,l=e===Sn;i<a;){var s=Rr((i+a)/2),p=o(r[s]),h=p!==Sn,v=p===p;(f?v:c?v&&h&&null!=p:l?v&&h:null==p?0:p<e)?i=s+1:a=s;}e=Lr(a,zr);}else{for(;e<o;){var i=e+o>>>1,a=r[i];a<t&&null!==a?e=i+1:o=i;}e=o;}return e<u&&(t===t?t===r[e]:r[e]!==r[e])?e:-1;}return n(r,t,e||0);}function tn(n){var r=n?n.length:0;return r?n[r-1]:Sn;}function en(r,t,e,u){if(!r||!r.length)return[];null!=t&&typeof t!="boolean"&&(u=e,e=K(r,t,u)?Sn:t,t=false);var o=W();if((null!=e||o!==g)&&(e=o(e,u,3)),t&&B()===n){t=e;var i;e=-1,u=r.length;for(var o=-1,c=[];++e<u;){var l=r[e],s=t?t(l,e,r):l;e&&i===s||(i=s,c[++o]=l);}r=c;}else{i=e,t=-1,e=B(),u=r.length,l=(c=(o=e===n)&&u>=Tn)&&Mr&&Fr?new a(void 0):null,s=[],l?(e=f,o=false):(c=false,l=i?[]:s);n:for(;++t<u;){var p=r[t],h=i?i(p,t,r):p;if(o&&p===p){for(var v=l.length;v--;){if(l[v]===h)continue n;}i&&l.push(h),s.push(p);}else 0>e(l,h,0)&&((i||c)&&l.push(h),s.push(p));}r=s;}return r;}function un(n,r,t){var e=it(n)?s:d;return r=W(r,t,3),e(n,r);}function on(n,r,t){var e=it(n)?p:E;return r=W(r,t,3),e(n,r);}function an(n,r,t){function e(r,t){t&&clearTimeout(t),f=p=h=Sn,r&&(v=ot(),c=n.apply(s,a),p||f||(a=s=Sn));}function u(){var n=r-(ot()-l);0>=n||n>r?e(h,f):p=setTimeout(u,n);}function o(){e(y,p);}function i(){if(a=arguments,l=ot(),s=this,h=y&&(p||!b),false===g)var t=b&&!p;else{f||b||(v=l);var e=g-(l-v),i=0>=e||e>g;i?(f&&(f=clearTimeout(f)),v=l,c=n.apply(s,a)):f||(f=setTimeout(o,e));}return i&&p?p=clearTimeout(p):p||r===g||(p=setTimeout(u,r)),t&&(i=true,c=n.apply(s,a)),!i||p||f||(a=s=Sn),c;}var a,f,c,l,s,p,h,v=0,g=false,y=true;if(typeof n!="function")throw new TypeError(kn);if(r=0>r?0:+r||0,true===t)var b=true,y=false;else hn(t)&&(b=!!t.leading,g="maxWait"in t&&Dr(+t.maxWait||0,r),y="trailing"in t?!!t.trailing:y);return i.cancel=function(){p&&clearTimeout(p),f&&clearTimeout(f),v=0,f=p=h=Sn;},i;}function fn(n,r){if(typeof n!="function")throw new TypeError(kn);return r=Dr(r===Sn?n.length-1:+r||0,0),function(){for(var t=arguments,e=-1,u=Dr(t.length-r,0),o=Array(u);++e<u;){o[e]=t[r+e];}switch(r){case 0:return n.call(this,o);case 1:return n.call(this,t[0],o);case 2:return n.call(this,t[0],t[1],o);}for(u=Array(r+1),e=-1;++e<r;){u[e]=t[e];}return u[r]=o,n.apply(this,u);};}function cn(n,r){return n>r;}function ln(n){return u(n)&&z(n)&&kr.call(n,"callee")&&!Pr.call(n,"callee");}function sn(n,r,t,e){return e=(t=typeof t=="function"?P(t,e,3):Sn)?t(n,r):Sn,e===Sn?w(n,r,t):!!e;}function pn(n){return hn(n)&&_r.call(n)==Fn;}function hn(n){var r=typeof n==='undefined'?'undefined':_typeof(n);return!!n&&("object"==r||"function"==r);}function vn(n){return null==n?false:pn(n)?Cr.test(Tr.call(n)):u(n)&&(wr(n)?Cr:ir).test(n);}function gn(n){return typeof n=="string"||u(n)&&_r.call(n)==Rn;}function yn(n){return u(n)&&J(n.length)&&!!sr[_r.call(n)];}function bn(n,r){return n<r;}function dn(n){if(null==n)return[];hn(n)||(n=Object(n));for(var r=n.length,t=i.support,r=r&&J(r)&&(it(n)||ln(n)||gn(n))&&r||0,e=n.constructor,u=-1,e=pn(e)&&e.prototype||Ir,o=e===n,a=Array(r),f=0<r,c=t.enumErrorProps&&(n===Er||n instanceof Error),l=t.enumPrototypes&&pn(n);++u<r;){a[u]=u+"";}for(var s in n){l&&"prototype"==s||c&&("message"==s||"name"==s)||f&&G(s,r)||"constructor"==s&&(o||!kr.call(n,s))||a.push(s);}if(t.nonEnumShadows&&n!==Ir)for(r=n===Sr?Rn:n===Er?Pn:_r.call(n),t=Jr[r]||Jr[qn],r==qn&&(e=Ir),r=lr.length;r--;){s=lr[r],u=t[s],o&&u||(u?!kr.call(n,s):n[s]===e[s])||a.push(s);}return a;}function xn(n){n=X(n);for(var r=-1,t=ft(n),e=t.length,u=Array(e);++r<e;){var o=t[r];u[r]=[o,n[o]];}return u;}function mn(n){for(var r=ft(n),t=-1,e=r.length,u=Array(e);++t<e;){u[t]=n[r[t]];}return u;}function An(n){return(n=r(n))&&n.replace(fr,t).replace(er,"");}function jn(n,t,e){return e&&K(n,t,e)&&(t=Sn),n=r(n),n.match(t||cr)||[];}function wn(n,r,t){return t&&K(n,r,t)&&(r=Sn),u(n)?En(n):g(n,r);}function On(n){return n;}function En(n){return I(y(n,true));}function In(n){return H(n)?T(n):k(n);}var Sn,Tn=200,kn="Expected a function",_n="[object Arguments]",Un="[object Array]",Cn="[object Boolean]",Nn="[object Date]",Pn="[object Error]",Fn="[object Function]",$n="[object Number]",qn="[object Object]",Mn="[object RegExp]",Rn="[object String]",Wn="[object ArrayBuffer]",Bn="[object Float32Array]",Dn="[object Float64Array]",Ln="[object Int8Array]",Zn="[object Int16Array]",Vn="[object Int32Array]",Yn="[object Uint8Array]",zn="[object Uint8ClampedArray]",Gn="[object Uint16Array]",Kn="[object Uint32Array]",Hn=/&(?:amp|lt|gt|quot|#39|#96);/g,Jn=/[&<>"'`]/g,Qn=RegExp(Hn.source),Xn=RegExp(Jn.source),nr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,rr=/^\w*$/,tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,er=/[\u0300-\u036f\ufe20-\ufe23]/g,ur=/\\(\\)?/g,or=/\w*$/,ir=/^\[object .+?Constructor\]$/,ar=/^\d+$/,fr=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,cr=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),lr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),sr={};sr[Bn]=sr[Dn]=sr[Ln]=sr[Zn]=sr[Vn]=sr[Yn]=sr[zn]=sr[Gn]=sr[Kn]=true,sr[_n]=sr[Un]=sr[Wn]=sr[Cn]=sr[Nn]=sr[Pn]=sr[Fn]=sr["[object Map]"]=sr[$n]=sr[qn]=sr[Mn]=sr["[object Set]"]=sr[Rn]=sr["[object WeakMap]"]=false;var pr={};pr[_n]=pr[Un]=pr[Wn]=pr[Cn]=pr[Nn]=pr[Bn]=pr[Dn]=pr[Ln]=pr[Zn]=pr[Vn]=pr[$n]=pr[qn]=pr[Mn]=pr[Rn]=pr[Yn]=pr[zn]=pr[Gn]=pr[Kn]=true,pr[Pn]=pr[Fn]=pr["[object Map]"]=pr["[object Set]"]=pr["[object WeakMap]"]=false;var hr={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},vr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},gr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},yr={"function":true,object:true},br=yr[typeof exports==='undefined'?'undefined':_typeof(exports)]&&exports&&!exports.nodeType&&exports,dr=yr[typeof module==='undefined'?'undefined':_typeof(module)]&&module&&!module.nodeType&&module,xr=yr[typeof self==='undefined'?'undefined':_typeof(self)]&&self&&self.Object&&self,mr=yr[typeof window==='undefined'?'undefined':_typeof(window)]&&window&&window.Object&&window,Ar=dr&&dr.exports===br&&br,jr=br&&dr&&(typeof global==='undefined'?'undefined':_typeof(global))=="object"&&global&&global.Object&&global||mr!==(this&&this.window)&&mr||xr||this,wr=function(){try{Object({toString:0}+"");}catch(n){return function(){return false;};}return function(n){return typeof n.toString!="function"&&typeof(n+"")=="string";};}(),Or=Array.prototype,Er=Error.prototype,Ir=Object.prototype,Sr=String.prototype,Tr=Function.prototype.toString,kr=Ir.hasOwnProperty,_r=Ir.toString,Ur=jr._,Cr=RegExp("^"+Tr.call(kr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nr=jr.ArrayBuffer,Pr=Ir.propertyIsEnumerable,Fr=L(jr,"Set"),$r=Or.splice,qr=jr.Uint8Array,Mr=L(Object,"create"),Rr=Math.floor,Wr=L(Array,"isArray"),Br=L(Object,"keys"),Dr=Math.max,Lr=Math.min,Zr=L(Date,"now"),Vr=Number.NEGATIVE_INFINITY,Yr=Number.POSITIVE_INFINITY,zr=4294967294,Gr=2147483647,Kr=9007199254740991,Hr={};Hr[Bn]=jr.Float32Array,Hr[Dn]=jr.Float64Array,Hr[Ln]=jr.Int8Array,Hr[Zn]=jr.Int16Array,Hr[Vn]=jr.Int32Array,Hr[Yn]=qr,Hr[zn]=jr.Uint8ClampedArray,Hr[Gn]=jr.Uint16Array,Hr[Kn]=jr.Uint32Array;var Jr={};Jr[Un]=Jr[Nn]=Jr[$n]={constructor:true,toLocaleString:true,toString:true,valueOf:true},Jr[Cn]=Jr[Rn]={constructor:true,toString:true,valueOf:true},Jr[Pn]=Jr[Fn]=Jr[Mn]={constructor:true,toString:true},Jr[qn]={constructor:true},l(lr,function(n){for(var r in Jr){if(kr.call(Jr,r)){var t=Jr[r];t[n]=kr.call(t,n);}}});var Qr=i.support={};!function(n){function r(){this.x=n;}var t={0:n,length:n},e=[];r.prototype={valueOf:n,y:n};for(var u in new r()){e.push(u);}Qr.enumErrorProps=Pr.call(Er,"message")||Pr.call(Er,"name"),Qr.enumPrototypes=Pr.call(r,"prototype"),Qr.nonEnumShadows=!/valueOf/.test(e),Qr.spliceObjects=($r.call(t,0,1),!t[0]),Qr.unindexedChars="xx"!="x"[0]+Object("x")[0];}(1,0);var Xr=function(n,r){return function(t,e){var u=t?rt(t):0;if(!J(u))return n(t,e);for(var o=r?u:-1,i=X(t);(r?o--:++o<u)&&false!==e(i[o],o,i);){}return t;};}(A),nt=function(n){return function(r,t,e){var u=X(r);e=e(r);for(var o=e.length,i=n?o:-1;n?i--:++i<o;){var a=e[i];if(false===t(u[a],a,u))break;}return r;};}(),rt=T("length"),tt=fn(function(r,t){var e;if(u(r)&&z(r)){e=m(t,false,true);var o=r?r.length:0,i=[];if(o){var c=-1,l=B(),s=l===n,p=s&&e.length>=Tn&&Mr&&Fr?new a(e):null,h=e.length;p&&(l=f,s=false,e=p);n:for(;++c<o;){if(p=r[c],s&&p===p){for(var v=h;v--;){if(e[v]===p)continue n;}i.push(p);}else 0>l(e,p,0)&&i.push(p);}}e=i;}else e=[];return e;}),et=function(n,r){return function(t,e,u){if(e=W(e,u,3),it(t)){n:{u=t.length;for(var o=r?u:-1;r?o--:++o<u;){if(e(t[o],o,t)){e=o;break n;}}e=-1;}return-1<e?t[e]:Sn;}return x(t,e,n);};}(Xr),ut=function(n,r){return function(t,e,u,o){var i=3>arguments.length;return typeof e=="function"&&o===Sn&&it(t)?n(t,e,u,i):_(t,W(e,o,4),u,i,r);};}(function(n,r,t,e){var u=-1,o=n.length;for(e&&o&&(t=n[++u]);++u<o;){t=r(t,n[u],u,n);}return t;},Xr),ot=Zr||function(){return new Date().getTime();},it=Wr||function(n){return u(n)&&J(n.length)&&_r.call(n)==Un;},at=function(n){return function(r,t,e){return t=W(t,e,3),x(r,t,n,true);};}(A),ft=Br?function(n){var r=null==n?Sn:n.constructor;return typeof r=="function"&&r.prototype===n||(typeof n=="function"?i.support.enumPrototypes:z(n))?Q(n):hn(n)?Br(n):[];}:Q,ct=function(n){return function(r){var t=-1;r=jn(An(r));for(var e=r.length,u="";++t<e;){u=n(u,r[t],t);}return u;};}(function(n,r,t){return n+(t?"-":"")+r.toLowerCase();}),lt=$(cn,Vr),st=$(bn,Yr);a.prototype.push=function(n){var r=this.data;typeof n=="string"||hn(n)?r.set.add(n):r.hash[n]=true;},i.callback=wn,i.debounce=an,i.difference=tt,i.filter=un,i.flatten=function(n,r,t){var e=n?n.length:0;return t&&K(n,r,t)&&(r=false),e?m(n,r):[];},i.keys=ft,i.keysIn=dn,i.map=on,i.matches=En,i.pairs=xn,i.pluck=function(n,r){return on(n,In(r));},i.property=In,i.restParam=fn,i.set=function(n,r,t){if(null==n)return n;var e=r+"";r=null!=n[e]||H(r,n)?[e]:nn(r);for(var e=-1,u=r.length,o=u-1,i=n;null!=i&&++e<u;){var a=r[e];hn(i)&&(e==o?i[a]=t:null==i[a]&&(i[a]=G(r[e+1])?[]:{})),i=i[a];}return n;},i.sortByOrder=function(n,r,t,e){return null==n?[]:(e&&K(r,t,e)&&(t=Sn),it(r)||(r=null==r?[]:[r]),it(t)||(t=null==t?[]:[t]),N(n,r,t));},i.throttle=function(n,r,t){var e=true,u=true;if(typeof n!="function")throw new TypeError(kn);return false===t?e=false:hn(t)&&(e="leading"in t?!!t.leading:e,u="trailing"in t?!!t.trailing:u),an(n,r,{leading:e,maxWait:+r,trailing:u});},i.toArray=function(n){var r=n?rt(n):0;return J(r)?r?i.support.unindexedChars&&gn(n)?n.split(""):c(n):[]:mn(n);},i.uniq=en,i.values=mn,i.collect=on,i.iteratee=wn,i.select=un,i.unique=en,i.deburr=An,i.escape=function(n){return(n=r(n))&&Xn.test(n)?n.replace(Jn,e):n;},i.find=et,i.findKey=at,i.get=function(n,r,t){return n=null==n?Sn:j(n,nn(r),r+""),n===Sn?t:n;},i.gt=cn,i.has=function(n,r){if(null==n)return false;var t=kr.call(n,r);if(!t&&!H(r)){if(r=nn(r),n=1==r.length?n:j(n,U(r)),null==n)return false;r=tn(r),t=kr.call(n,r);}return t||J(n.length)&&G(r,n.length)&&(it(n)||ln(n)||gn(n));},i.identity=On,i.indexOf=rn,i.isArguments=ln,i.isArray=it,i.isEmpty=function(n){return null==n?true:z(n)&&(it(n)||gn(n)||ln(n)||u(n)&&pn(n.splice))?!n.length:!ft(n).length;},i.isEqual=sn,i.isFunction=pn,i.isNative=vn,i.isObject=hn,i.isString=gn,i.isTypedArray=yn,i.kebabCase=ct,i.last=tn,i.lt=bn,i.max=lt,i.min=st,i.noConflict=function(){return jr._=Ur,this;},i.now=ot,i.reduce=ut,i.unescape=function(n){return(n=r(n))&&Qn.test(n)?n.replace(Hn,o):n;},i.words=jn,i.eq=sn,i.detect=et,i.foldl=ut,i.inject=ut,i.VERSION="3.10.1",typeof define=="function"&&_typeof(define.amd)=="object"&&define.amd?(jr._=i,define(function(){return i;})):br&&dr?Ar?(dr.exports=i)._=i:br._=i:jr._=i;}).call(this);var localLodash=$window._.noConflict();return{debounce:localLodash.debounce,throttle:localLodash.throttle,noConflict:localLodash.noConflict,escape:localLodash.escape,unescape:localLodash.unescape,get:localLodash.get,set:localLodash.set,has:localLodash.has,isEmpty:localLodash.isEmpty,map:localLodash.map,findKey:localLodash.findKey,find:localLodash.find,uniq:localLodash.uniq,sortByOrder:localLodash.sortByOrder,reduce:localLodash.reduce,flatten:localLodash.flatten,toArray:localLodash.toArray,keys:localLodash.keys,kebabCase:localLodash.kebabCase,isEqual:localLodash.isEqual,difference:localLodash.difference,pluck:localLodash.pluck,filter:localLodash.filter,values:localLodash.values,min:localLodash.min,max:localLodash.max};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.community.context-manager',['li.services.utils.lodash-utils']).factory('$liContextManager',['$liLodashUtils','$window',function($liLodashUtils,$window){var context=$liLodashUtils.get($window,'LITHIUM.CommunityJsonObject',{});var _community;var _server;var _config;var _validation;var _node;var _user;var _page;var _settings;var _policies;var _topLevelNode;var _nodeContainer;function transformKey(key){if(key==='nodeType'){return'type';}
return key.replace(/([A-Z])/g,function($1){return'_'+$1.toLowerCase();});}
function deepTransform(obj){if(obj===undefined){return{};}else if(!angular.isObject(obj)){return obj;}else if(angular.isDate(obj)){return new Date(obj);}else if(angular.isArray(obj)){return obj.map(function(item){return deepTransform(item);});}else{var _obj={};for(var key in obj){var _key=transformKey(key);_obj[_key]=deepTransform(obj[key]);if(_key==='type'){_obj[_key]=_obj[_key].toLowerCase();}}
return _obj;}}
return{community:function community(){if(!_community){_community=deepTransform(context.Community);}
return _community;},server:function server(){if(!_server){_server=deepTransform(context.Server);}
return _server;},config:function config(){if(!_config){_config=deepTransform(context.Config);}
return _config;},validation:function validation(){if(!_validation){_validation=deepTransform(context.Validation);}
return _validation;},coreNode:function coreNode(){if(!_node){_node=deepTransform(context.CoreNode);}
return _node;},page:function page(){if(!_page){_page=deepTransform(context.Page);}
return _page;},currentUser:function currentUser(){if(!_user){_user=deepTransform(context.User);delete _user.settings;}
return _user;},currentUserSettings:function currentUserSettings(){if(!_settings){_settings=deepTransform(context.User&&context.User.settings);}
return _settings;},currentUserPolicies:function currentUserPolicies(){if(!_policies){_policies=deepTransform(context.User&&context.User.policies);}
return _policies;},topLevelNode:function topLevelNode(){if(!_topLevelNode){_topLevelNode=deepTransform(context.TopLevelNode);}
return _topLevelNode;},nodeContainer:function nodeContainer(){if(!_nodeContainer){_nodeContainer=deepTransform(context.NodeContainer);}
return _nodeContainer;}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);

(function(I,f,C){'use strict';function D(t,e){e=e||{};f.forEach(e,function(f,k){delete e[k]});for(var k in t)!t.hasOwnProperty(k)||"$"===k.charAt(0)&&"$"===k.charAt(1)||(e[k]=t[k]);return e}var y=f.$$minErr("$resource"),B=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;f.module("ngResource",["ng"]).provider("$resource",function(){var t=/^https?:\/\/[^\/]*/,e=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}};this.$get=["$http","$q",function(k,F){function w(f,g){this.template=f;this.defaults=r({},e.defaults,g);this.urlParams={}}function z(l,g,s,h){function c(a,q){var c={};q=r({},g,q);u(q,function(b,q){x(b)&&(b=b());var m;if(b&&b.charAt&&"@"==b.charAt(0)){m=a;var d=b.substr(1);if(null==d||""===d||"hasOwnProperty"===d||!B.test("."+d))throw y("badmember",d);for(var d=d.split("."),n=0,g=d.length;n<g&&f.isDefined(m);n++){var e=d[n];m=null!==m?m[e]:C}}else m=b;c[q]=m});return c}function G(a){return a.resource}
function d(a){D(a||{},this)}var t=new w(l,h);s=r({},e.defaults.actions,s);d.prototype.toJSON=function(){var a=r({},this);delete a.$promise;delete a.$resolved;return a};u(s,function(a,q){var g=/^(POST|PUT|PATCH)$/i.test(a.method);d[q]=function(b,A,m,e){var n={},h,l,s;switch(arguments.length){case 4:s=e,l=m;case 3:case 2:if(x(A)){if(x(b)){l=b;s=A;break}l=A;s=m}else{n=b;h=A;l=m;break}case 1:x(b)?l=b:g?h=b:n=b;break;case 0:break;default:throw y("badargs",arguments.length);}var w=this instanceof d,p=w?h:a.isArray?[]:new d(h),v={},z=a.interceptor&&a.interceptor.response||G,B=a.interceptor&&a.interceptor.responseError||C;u(a,function(a,b){switch(b){default:v[b]=H(a);break;case"params":case"isArray":case"interceptor":break;case"timeout":v[b]=a}});g&&(v.data=h);t.setUrlParams(v,r({},c(h,a.params||{}),n),a.url);n=k(v).then(function(b){var c=b.data,m=p.$promise;if(c){if(f.isArray(c)!==!!a.isArray)throw y("badcfg",q,a.isArray?"array":"object",f.isArray(c)?"array":"object",v.method,v.url);a.isArray?(p.length=0,u(c,function(b){"object"===typeof b?p.push(new d(b)):p.push(b)})):(D(c,p),p.$promise=m)}p.$resolved=!0;b.resource=p;return b},function(b){p.$resolved=!0;(s||E)(b);return F.reject(b)});n=n.then(function(b){var a=z(b);(l||E)(a,b.headers);return a},B);return w?n:(p.$promise=n,p.$resolved=!1,p)};d.prototype["$"+q]=function(b,a,c){x(b)&&(c=a,a=b,b={});b=d[q].call(this,b,this,a,c);return b.$promise||b}});d.bind=function(a){return z(l,r({},g,a),s)};return d}var E=f.noop,u=f.forEach,r=f.extend,H=f.copy,x=f.isFunction;w.prototype={setUrlParams:function(l,g,e){var h=this,c=e||h.template,k,d,r="",a=h.urlParams={};u(c.split(/\W/),function(d){if("hasOwnProperty"===d)throw y("badname");!/^\d+$/.test(d)&&d&&(new RegExp("(^|[^\\\\]):"+d+"(\\W|$)")).test(c)&&(a[d]=!0)});c=c.replace(/\\:/g,":");c=c.replace(t,function(a){r=a;return""});g=g||{};u(h.urlParams,function(a,e){k=g.hasOwnProperty(e)?g[e]:h.defaults[e];f.isDefined(k)&&null!==k?(d=encodeURIComponent(k).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),c=c.replace(new RegExp(":"+e+"(\\W|$)","g"),function(b,a){return d+a})):c=c.replace(new RegExp("(/?):"+e+"(\\W|$)","g"),function(b,a,c){return"/"==c.charAt(0)?c:a+c})});h.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/");c=c.replace(/\/\.(?=\w+($|\?))/,".");l.url=r+c.replace(/\/\\\./,"/.");u(g,function(a,c){h.urlParams[c]||(l.params=l.params||{},l.params[c]=a)})}};return z}]})})(window,window.angular);
;(function(angular){'use strict';angular.module('li.services.rest.rest-manager',['li.services.community.context-manager','ngResource']).config(['$sceDelegateProvider',function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(['**']);}]).factory('$liRestManagerRetryInterceptor',['$q','$injector','$log','$timeout',function($q,$injector,$log,$timeout){return{responseError:function responseError(rejection){$log.error('$http error',rejection);if(rejection.status>=500&&rejection.config.retry<5){rejection.config.retry++;$log.debug('Retry $http call attempt ['+rejection.config.retry+']',rejection);$timeout(function(){return $injector.get('$http')(rejection.config);},500);}else{return $q.reject(rejection);}}};}]).config(['$httpProvider',function($httpProvider){$httpProvider.interceptors.push('$liRestManagerRetryInterceptor');}]).constant('$liRestManagerConfig',{status:{NOT_FOUND:404,FORBIDDEN:403}}).factory('$liRestManager',['$http','$resource','$q','$liContextManager',function($http,$resource,$q,$liContextManager){$http.defaults.headers.common['Application-Identifier']=$liContextManager.server().device_mode;$http.defaults.headers.common['Application-Version']='2.0.0';$http.defaults.headers.get=!$http.defaults.headers.get?{}:$http.defaults.headers.get;$http.defaults.headers.get['If-Modified-Since']=new Date(0).toUTCString();function request(apiUrl,params,data,method,cache,retry){var queryParams={};angular.forEach(params,function(val,key){if(apiUrl.indexOf(':'+key)!==-1){apiUrl=apiUrl.replace(':'+key,val);}else{queryParams[key]=val;}});return $http({url:getFullyQualifiedUrl(apiUrl),params:queryParams,data:data||null,method:method||'get',cache:cache,retry:retry!==undefined?retry:0,headers:{'Content-Type':'application/json'}}).then(function(response){if(response&&response.data){return response.data;}
return $q.reject(response);});}
function getFullyQualifiedUrl(apiUrl){return $liContextManager.server().community_prefix+'/api/2.0'+apiUrl;}
return{request:request,getFullyQualifiedUrl:getFullyQualifiedUrl};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.events.event-manager',['li.services.rest.rest-manager']).factory('$liEventManager',['$liRestManager','$document',function($liRestManager,$document){function stop($event){$event.preventDefault();$event.stopPropagation();}
var eventMap={'media-view':{payload:{mediaId:'id',mediaName:'title',mediaType:'type'},context:{messageId:'id'}}};var document=$document[0];function createEventPayload(eventType,eventPayload,eventContext){var eventObj=Object.create(eventMap[eventType].payload||{});for(var eventProp in eventObj){eventObj[eventProp]=eventPayload[eventObj[eventProp]];}
if(eventContext!==undefined&&eventContext!==null){var eventObjContext=Object.create(eventMap[eventType].context||{});for(var eventContextProp in eventObjContext){eventObjContext[eventContextProp]=eventContext[eventObjContext[eventContextProp]];}
angular.extend(eventObj,eventObjContext);}
return eventObj;}
function emitNativeEvent(eventName,context,element){var event=document.createEvent('CustomEvent');var triggerElement=element?element:document;event.initCustomEvent(eventName,true,true,context);triggerElement.dispatchEvent(event);}
return{sendEvent:function sendEvent(type,data,context){var lsiEvent={analytics_event:{type:type,id:-1,data:createEventPayload(type,data,context),version:'3.0'}};return $liRestManager.request('/internal/analytics',{},lsiEvent,'post',false);},emitNativeEvent:emitNativeEvent,KeyCodes:{TAB:9,ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,ESC:27,f:102},stop:stop};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.trap-focus',['li.services.events.event-manager']).directive('liCommonTrapFocus',['$liEventManager','$timeout',function($liEventManager,$timeout){return{restrict:'A',link:function link($scope,$element){$timeout(function(){var focusableQueryElements='a[href], area[href], input:not([disabled]), select:not([disabled]), '+'textarea:not([disabled]), button:not([disabled]), [tabindex="0"]';var focusableElements=$element[0].querySelectorAll(focusableQueryElements);focusableElements=Array.prototype.slice.call(focusableElements);var firstFocusableElement=focusableElements[0];var lastFocusableElement=focusableElements[focusableElements.length-1];$element.on('keydown',function(event){var keyCode=event.keyCode||event.which;function focusNextElement(currentElement,nextElement){if(document.activeElement===currentElement){event.preventDefault();nextElement.focus();}}
if(keyCode===$liEventManager.KeyCodes.TAB){if(!event.shiftKey){focusNextElement(lastFocusableElement,firstFocusableElement);}else{focusNextElement(firstFocusableElement,lastFocusableElement);}}else{return;}});},0);}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.utils.param-utils',['li.services.utils.lodash-utils']).factory('$liParamUtils',['$liLodashUtils','$log',function($liLodashUtils,$log){function validateParams(directiveName,scope,params){var allValid=true;angular.forEach(params,function(param){var paramObj;var method;var reason;var value;paramObj={allowNull:true,allowUndefined:false,allowEmpty:true};if(angular.isObject(param)){paramObj=angular.extend({},paramObj,param);}else{paramObj.paramName=param;}
value=scope[paramObj.paramName];if(!paramObj.allowNull&&value===null){reason=' cannot be null.';}
if(paramObj.allowUndefined&&angular.isUndefined(value)&&paramObj.hasOwnProperty('defaultValue')){scope[paramObj.paramName]=paramObj.defaultValue;$log.debug('Param ['+paramObj.paramName+'], was set to the default value '+'['+paramObj.defaultValue+'] for directive '+'['+directiveName+'].');value=scope[paramObj.paramName];}
if(!paramObj.allowUndefined&&angular.isUndefined(value)){reason=' cannot be undefined.';}
if(!paramObj.allowEmpty&&$liLodashUtils.isEmpty(value)){reason=' cannot be empty.';}
if(angular.isFunction(paramObj.validate)&&!paramObj.validate(value)){reason=' is not an allowed value.';}
if(!reason){method='debug';reason=' is valid.';}else{method='error';allValid=false;}
$log[method]('Required param ['+paramObj.paramName+'], with value '+'['+angular.toJson(value)+'], for directive '+'['+directiveName+']'+reason);});return allValid;}
function initTypeTemplate($scope,path,type,defaultType){$scope.templateUrl=function(){var templateType=type?type:defaultType;return path+(templateType?'.'+templateType:'')+'.tpl.html';};}
return{validateParams:validateParams,typeTemplate:'<ng-include src="templateUrl()"></ng-include>',initTypeTemplate:initTypeTemplate};}]);})(window.LITHIUM&&LITHIUM.angular||angular);

(function(x,s,y){'use strict';function t(f,k,p){n.directive(f,["$parse","$swipe",function(c,e){return function(l,m,g){function h(a){if(!b)return!1;var d=Math.abs(a.y-b.y);a=(a.x-b.x)*k;return r&&75>d&&0<a&&30<a&&.3>d/a}var d=c(g[f]),b,r,a=["touch"];s.isDefined(g.ngSwipeDisableMouse)||a.push("mouse");e.bind(m,{start:function(a,d){b=a;r=!0},cancel:function(a){r=!1},end:function(a,b){h(a)&&l.$apply(function(){m.triggerHandler(p);d(l,{$event:b})})}},a)}}])}var n=s.module("ngTouch",[]);n.factory("$swipe",[function(){function f(c){c=c.originalEvent||c;var e=c.touches&&c.touches.length?c.touches:[c];c=c.changedTouches&&c.changedTouches[0]||e[0];return{x:c.clientX,y:c.clientY}}function k(c,e){var l=[];s.forEach(c,function(c){(c=p[c][e])&&l.push(c)});return l.join(" ")}var p={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(c,e,l){var m,g,h,d,b=!1;l=l||["mouse","touch"];c.on(k(l,"start"),function(a){h=f(a);b=!0;g=m=0;d=h;e.start&&e.start(h,a)});var r=k(l,"cancel");if(r)c.on(r,function(a){b=!1;e.cancel&&e.cancel(a)});c.on(k(l,"move"),function(a){if(b&&h){var c=f(a);m+=Math.abs(c.x-d.x);g+=Math.abs(c.y-d.y);d=c;10>m&&10>g||(g>m?(b=!1,e.cancel&&e.cancel(a)):(a.preventDefault(),e.move&&e.move(c,a)))}});c.on(k(l,"end"),function(a){b&&(b=!1,e.end&&e.end(f(a),a))})}}}]);n.config(["$provide",function(f){f.decorator("ngClickDirective",["$delegate",function(k){k.shift();return k}])}]);n.directive("ngClick",["$parse","$timeout","$rootElement",function(f,k,p){function c(d,b,c){for(var a=0;a<d.length;a+=2){var e=d[a+1],g=c;if(25>Math.abs(d[a]-b)&&25>Math.abs(e-g))return d.splice(a,a+2),!0}return!1}function e(d){if(!(2500<Date.now()-m)){var b=d.touches&&d.touches.length?d.touches:[d],e=b[0].clientX,b=b[0].clientY;if(!(1>e&&1>b||h&&h[0]===e&&h[1]===b)){h&&(h=null);var a=d.target;"label"===s.lowercase(a.nodeName||a[0]&&a[0].nodeName)&&(h=[e,b]);c(g,e,b)||(d.stopPropagation(),d.preventDefault(),d.target&&d.target.blur&&d.target.blur())}}}function l(d){d=d.touches&&d.touches.length?d.touches:[d];var b=d[0].clientX,c=d[0].clientY;g.push(b,c);k(function(){for(var a=0;a<g.length;a+=2)if(g[a]==b&&g[a+1]==c){g.splice(a,a+2);break}},2500,!1)}var m,g,h;return function(d,b,h){var a=f(h.ngClick),k=!1,q,n,t,v;b.on("touchstart",function(a){k=!0;q=a.target?a.target:a.srcElement;3==q.nodeType&&(q=q.parentNode);b.addClass("ng-click-active");n=Date.now();a=a.originalEvent||a;a=(a.touches&&a.touches.length?a.touches:[a])[0];t=a.clientX;v=a.clientY});b.on("touchcancel",function(a){k=!1;b.removeClass("ng-click-active")});b.on("touchend",function(a){var d=Date.now()-n,f=a.originalEvent||a,u=(f.changedTouches&&f.changedTouches.length?f.changedTouches:f.touches&&f.touches.length?f.touches:[f])[0],f=u.clientX,u=u.clientY,w=Math.sqrt(Math.pow(f-t,2)+Math.pow(u-v,2));k&&750>d&&12>w&&(g||(p[0].addEventListener("click",e,!0),p[0].addEventListener("touchstart",l,!0),g=[]),m=Date.now(),c(g,f,u),q&&q.blur(),s.isDefined(h.disabled)&&!1!==h.disabled||b.triggerHandler("click",[a]));k=!1;b.removeClass("ng-click-active")});b.onclick=function(a){};b.on("click",function(b,c){d.$apply(function(){a(d,{$event:c||b})})});b.on("mousedown",function(a){b.addClass("ng-click-active")});b.on("mousemove mouseup",function(a){b.removeClass("ng-click-active")})}}]);t("ngSwipeLeft",-1,"swipeleft");t("ngSwipeRight",1,"swiperight")})(window,window.angular);
;(function(angular){'use strict';angular.module('li.directives.common.slide-menu',['li.directives.common.element-hook','li.directives.common.trap-focus','li.services.utils.param-utils','li.services.events.event-manager','ngTouch']).constant('liSlideMenuConfig',{directions:['left','top','right','bottom'],events:{scrollTop:'LITHIUM:slide-menu:scroll-top',toggleMenu:'LITHIUM:slide-menu:toggle-menu'}}).directive('liCommonSlideMenu',['$log','$timeout','$document','$liParamUtils','liSlideMenuConfig','$liEventManager',function($log,$timeout,$document,$liParamUtils,liSlideMenuConfig,$liEventManager){return{restrict:'AE',transclude:true,templateUrl:'common/slide-menu/slide-menu.tpl.html',scope:{direction:'@liDirection',triggerElement:'=',liSlideMenuClass:'=',swipeToClose:'=liSwipeToClose'},link:function link($scope,$element){var navContainer;$element.removeAttr('style');var valParams={paramName:'direction',allowUndefined:true,defaultValue:'left',validate:function validate(val){return liSlideMenuConfig.directions.indexOf(val)>-1;}};if(!$liParamUtils.validateParams('liCommonSlideMenu',$scope,[valParams])){return;}
$scope.showMenu=false;$scope.addClass=false;switch($scope.direction){case'top':case'bottom':$scope.orientation='horizontal';break;default:$scope.orientation='vertical';}
$scope.$watch('triggerElement',function(){if($scope.triggerElement){$scope.triggerElement.on('click',function($event){$scope.toggleMenu();$scope.$apply();$event.preventDefault();});}});$scope.toggleMenu=function(){var $body=angular.element($document[0].body);if($scope.showMenu){$scope.addClass=false;$timeout(function(){$scope.showMenu=false;},400);$body.removeClass('lia-slide-menu-open');$body.off('keyup',handleEscape);}else{$scope.showMenu=true;$timeout(function(){$scope.addClass=true;});$body.addClass('lia-slide-menu-open');$body.on('keyup',handleEscape);}};$scope.$on(liSlideMenuConfig.events.scrollTop,function(){navContainer=navContainer||$element[0].querySelector('.lia-slide-menu-content');navContainer.scrollTop=0;});$scope.$on(liSlideMenuConfig.events.toggleMenu,function(){$scope.toggleMenu();});$scope.swipeToggleMenu=function(swipeDirection){if($scope.swipeToClose&&swipeDirection===$scope.direction){$scope.toggleMenu();}};function handleEscape($event){var keyCode=$event.keyCode||$event.which;if(keyCode===$liEventManager.KeyCodes.ESC){$scope.toggleMenu();$scope.$apply();}}}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.community.navigation-manager',['li.services.community.context-manager','li.services.rest.rest-manager']).factory('$liNavigationManager',['$q','$cacheFactory','$liContextManager','$liRestManager',function($q,$cacheFactory,$liContextManager,$liRestManager){var _community;var _topLevelNodeId;var _cache=$cacheFactory('liNavigationCache',{storageMode:'localStorage'});var _communityStructurePromise;function getRootLevelNodeId(){return _topLevelNodeId;}
function getCommunityStructure(topLevelNode){var query;if(topLevelNode.type==='category'&&topLevelNode.id){query={type:'request',data:{select:[{field:'categories',expand:{select:['id','title','view_href','parent_category.id'],from:'categories',where:[{field:'ancestor_categories.id',operand:'=',value:topLevelNode.id},{field:'hidden',operand:'=',value:false}],orderBy:{field:'position',direction:'ASC'},limit:1000}},{field:'boards',expand:{select:['id','title','view_href','conversation_style','parent_category.id'],from:'boards',where:[{field:'ancestor_categories.id',operand:'=',value:topLevelNode.id},{field:'hidden',operand:'=',value:false},{field:'nested',operand:'=',value:false}],orderBy:{field:'position',direction:'ASC'},limit:1000}}]}};}else{query={type:'request',data:{select:[{field:'categories',expand:{select:['id','title','view_href','parent_category.id'],from:'categories',where:[{field:'hidden',operand:'=',value:false}],orderBy:{field:'position',direction:'ASC'},limit:1000}},{field:'boards',expand:{select:['id','title','view_href','conversation_style','parent_category.id'],from:'boards',where:[{field:'hidden',operand:'=',value:false},{field:'nested',operand:'=',value:false}],orderBy:{field:'position',direction:'ASC'},limit:1000}}]}};}
return $liRestManager.request('/jsearch',{},query,'POST',_cache).then(function(response){if(response.data.items&&response.data.items.length===1){return response.data.items[0];}else{return response.data;}});}
function getStructure(){var currentTopLevelNode=$liContextManager.topLevelNode();var cacheKey=JSON.stringify({ts:$liContextManager.server().node_change_time_stamp,uid:$liContextManager.currentUser().id,nid:currentTopLevelNode.id,commid:$liContextManager.community().id});cleanupCache();if(_topLevelNodeId===undefined){_topLevelNodeId=currentTopLevelNode.id;}
if(currentTopLevelNode.id===_topLevelNodeId&&_community!==undefined){return $q.when(_community);}else if(_cache.get(cacheKey)){return $q.when(_cache.get(cacheKey));}else{var isTlc=currentTopLevelNode.type==='category';if(_communityStructurePromise!==undefined){return _communityStructurePromise;}
_communityStructurePromise=getCommunityStructure(currentTopLevelNode).then(function(res){var rootNode=isTlc?currentTopLevelNode:$liContextManager.community();if(!isTlc){rootNode.type='community';}
var categoryMap={};categoryMap[rootNode.id]=rootNode;res.categories.items.map(function(c){var category={};angular.extend(category,c);if(!categoryMap[category.id]){categoryMap[category.id]=category;}else{angular.extend(categoryMap[category.id],category);}
if(category.parent_category.id===undefined){category.parent_category.id=rootNode.id;}
var parentCategory;if(!categoryMap[category.parent_category.id]){parentCategory={id:category.parent_category.id,descendant_categories:{items:[category]}};categoryMap[category.parent_category.id]=parentCategory;}else{parentCategory=categoryMap[category.parent_category.id];if(parentCategory.descendant_categories===undefined){parentCategory.descendant_categories={items:[category]};}else{parentCategory.descendant_categories.items.push(category);}}});res.boards.items.map(function(board){if(board.parent_category.id===undefined){board.parent_category.id=rootNode.id;}
if(categoryMap[board.parent_category.id]!==undefined){if(categoryMap[board.parent_category.id].boards===undefined){categoryMap[board.parent_category.id].boards={items:[board]};}else{categoryMap[board.parent_category.id].boards.items.push(board);}}});_community=[];angular.forEach(categoryMap,function(item){_community.push(item);});_cache.put(cacheKey,_community);return _community;});return _communityStructurePromise;}}
function cleanupCache(){angular.forEach(_cache.info().keys,function(key){var keyObj;try{keyObj=JSON.parse(key);}catch(e){_cache.remove(key);}
if(keyObj){if(keyObj.commid===undefined){_cache.remove(key);}else if(keyObj.commid===$liContextManager.community().id&&keyObj.uid===$liContextManager.currentUser().id){if(keyObj.ts!==$liContextManager.server().node_change_time_stamp){_cache.remove(key);}}}});}
return{getStructure:getStructure,getRootLevelNodeId:getRootLevelNodeId};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';function localStorageCacheFactory($cacheFactory){function isQuotaExceeded(e){if(e&&(e.code===22||e.code===1014&&e.name==='NS_ERROR_DOM_QUOTA_REACHED')){return true;}
return false;}
function safeLocalStorageSet(key,value){try{localStorage.setItem(key,value);}catch(e){if(isQuotaExceeded(e)){localStorage.clear();localStorage.setItem(key,value);}}}
function cacheFactory(cacheId,options){function put(key,value){if(angular.isUndefined(value)){return;}
var storedValue=cache.put(key,value);setLocalCacheItem(key,value);cleanupLocalCache();return storedValue;}
function cleanupLocalCache(checkAll){var cacheKeys=getLocalCacheKeys();if(options&&cacheKeys.length>=options.capacity){for(var i=0;i<cacheKeys.length;i++){var cacheKey=cacheKeys[i];if(cache.get(cacheKey)===undefined){removeLocalCacheItem(cacheKey);if(!checkAll){break;}}}}}
function remove(key){removeLocalCacheItem(key);cache.remove(key);}
function removeAll(){removeAllLocalCacheItem();cache.removeAll();}
function info(){var i=cache.info();i.keys=getLocalCacheKeys();return i;}
function getLocalCacheKeys(){var keys=localStorage.getItem(cacheId+'::keys');if(keys===null){return[];}else{try{return JSON.parse(keys);}catch(e){return keys.split(',');}}}
function setLocalCacheKeys(keys){var localKey=cacheId+'::keys';if(keys.length===0){localStorage.removeItem(localKey);}else{safeLocalStorageSet(localKey,JSON.stringify(keys));}}
function addLocalCacheKey(key){var keys=getLocalCacheKeys();var index=keys.indexOf(key);if(index===-1){keys.push(key);setLocalCacheKeys(keys);}}
function removeLocalCacheKey(key){var keys=getLocalCacheKeys();var index=keys.indexOf(key);if(index>-1){keys.splice(index,1);setLocalCacheKeys(keys);}}
function getLocalCacheItem(key){var storedVal=localStorage.getItem(cacheId+'::key::'+key);var item=angular.fromJson(storedVal);return item&&item.value;}
function setLocalCacheItem(key,value){if(!angular.isUndefined(key)){var localKey=cacheId+'::key::'+key;if(value===null){removeLocalCacheItem(key);}else{var storedVal={value:value};safeLocalStorageSet(localKey,angular.toJson(storedVal));addLocalCacheKey(key);}}}
function removeLocalCacheItem(key){removeLocalCacheKey(key);localStorage.removeItem(cacheId+'::key::'+key);}
function removeAllLocalCacheItem(){var keys=getLocalCacheKeys();angular.forEach(keys,function(key){localStorage.removeItem(cacheId+'::key::'+key);});localStorage.removeItem(cacheId+'::keys');}
var cache=$cacheFactory(cacheId,options);if(!supportsLocalStorage()){return cache;}
var localCacheKeys=getLocalCacheKeys();angular.forEach(localCacheKeys,function(key){cache.put(key,getLocalCacheItem(key));});cleanupLocalCache(true);return{put:put,get:cache.get,remove:remove,removeAll:removeAll,destroy:cache.destroy,info:info};}
return cacheFactory;}
localStorageCacheFactory.$inject=['$cacheFactory'];function supportsLocalStorage(){try{localStorage.setItem('a','a');localStorage.removeItem('a');return true;}catch(e){return false;}}
function decorateCacheFactory($provide){$provide.decorator('$cacheFactory',['$delegate',function($delegate){var cacheFactory=function cacheFactory(cacheId,options){if(options&&options.storageMode==='localStorage'&&supportsLocalStorage()){return localStorageCacheFactory($delegate)(cacheId,options);}else{return $delegate(cacheId,options);}};cacheFactory.get=$delegate.get;cacheFactory.info=$delegate.info;return cacheFactory;}]);}
decorateCacheFactory.$inject=['$provide'];angular.module('li.services.cache.localstorage-cache-manager',[]).factory('$liLocalstorageCacheManager',localStorageCacheFactory).config(decorateCacheFactory);})(window.LITHIUM&&LITHIUM.angular||angular);

angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(a){var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};c?c.get(b)?a.use(c.get(b))["catch"](d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY","$windowProvider",function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r={},s=[],t=a,u=[],v=!1,w="translate-cloak",x=!1,y=".",z=0,A="2.6.1",B=function(){var a,c,d=b.$get().navigator,e=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(d.languages))for(a=0;a<d.languages.length;a++)if(c=d.languages[a],c&&c.length)return c;for(a=0;a<e.length;a++)if(c=d[e[a]],c&&c.length)return c;return null};B.displayName="angular-translate/service: getFirstBrowserLanguage";var C=function(){return(B()||"").split("-").join("_")};C.displayName="angular-translate/service: getLocale";var D=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},E=function(){return this.replace(/^\s+|\s+$/g,"")},F=function(a){for(var b=[],c=angular.lowercase(a),e=0,f=s.length;f>e;e++)b.push(angular.lowercase(s[e]));if(D(b,c)>-1)return a;if(d){var g;for(var h in d){var i=!1,j=Object.prototype.hasOwnProperty.call(d,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=d[h],D(b,angular.lowercase(g))>-1))return g}}var k=a.split("_");return k.length>1&&D(b,angular.lowercase(k[0]))>-1?k[0]:a},G=function(a,b){if(!a&&!b)return r;if(a&&!b){if(angular.isString(a))return r[a]}else angular.isObject(r[a])||(r[a]={}),angular.extend(r[a],H(b));return this};this.translations=G,this.cloakClassName=function(a){return a?(w=a,this):w};var H=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?H(h,b.concat(e),c,e):(f=b.length?""+b.join(y)+y+e:e,b.length&&e===d&&(g=""+b.join(y),c[g]="@:"+f),c[f]=h));return c};this.addInterpolation=function(a){return u.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return l=a,this},this.useSanitizeValueStrategy=function(a){return v=a,this},this.preferredLanguage=function(a){return I(a),this};var I=function(a){return a&&(c=a),c};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(o=a,this):o},this.translationNotFoundIndicatorRight=function(a){return a?(p=a,this):p},this.fallbackLanguage=function(a){return J(a),this};var J=function(a){return a?(angular.isString(a)?(f=!0,e=[a]):angular.isArray(a)&&(f=!1,e=a),angular.isString(c)&&D(e,c)<0&&e.push(c),this):f?e[0]:e};this.use=function(a){if(a){if(!r[a]&&!m)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return g=a,this}return g};var K=function(a){return a?void(t=a):j?j+t:t};this.storageKey=K,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return m=a,n=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return i=a,this},this.storagePrefix=function(a){return a?(j=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return k=a,this},this.usePostCompiling=function(a){return x=!!a,this},this.determinePreferredLanguage=function(a){var b=a&&angular.isFunction(a)?a():C();return c=s.length?F(b):b,this},this.registerAvailableLanguageKeys=function(a,b){return a?(s=a,b&&(d=b),this):s},this.useLoaderCache=function(a){return a===!1?q=void 0:a===!0?q=!0:"undefined"==typeof a?q="$translationCache":a&&(q=a),this},this.directivePriority=function(a){return void 0===a?z:(z=a,this)},this.$get=["$log","$injector","$rootScope","$q",function(a,b,d,j){var s,y,B,C=b.get(l||"$translateDefaultInterpolation"),L=!1,M={},N={},O=function(a,b,d,f){if(angular.isArray(a)){var h=function(a){for(var c={},e=[],g=function(a){var e=j.defer(),g=function(b){c[a]=b,e.resolve([a,b])};return O(a,b,d,f).then(g,g),e.promise},h=0,i=a.length;i>h;h++)e.push(g(a[h]));return j.all(e).then(function(){return c})};return h(a)}var k=j.defer();a&&(a=E.apply(a));var l=function(){var a=c?N[c]:N[g];if(y=0,i&&!a){var b=s.get(t);if(a=N[b],e&&e.length){var d=D(e,b);y=0===d?1:0,D(e,c)<0&&e.push(c)}}return a}();return l?l.then(function(){$(a,b,d,f).then(k.resolve,k.reject)},k.reject):$(a,b,d,f).then(k.resolve,k.reject),k.promise},P=function(a){return o&&(a=[o,a].join(" ")),p&&(a=[a,p].join(" ")),a},Q=function(a){g=a,d.$emit("$translateChangeSuccess",{language:a}),i&&s.put(O.storageKey(),g),C.setLocale(g),angular.forEach(M,function(a,b){M[b].setLocale(g)}),d.$emit("$translateChangeEnd",{language:a})},R=function(a){if(!a)throw"No language key specified for loading.";var c=j.defer();d.$emit("$translateLoadingStart",{language:a}),L=!0;var e=q;"string"==typeof e&&(e=b.get(e));var f=angular.extend({},n,{key:a,$http:angular.extend({},{cache:e},n.$http)});return b.get(m)(f).then(function(b){var e={};d.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(b)?angular.forEach(b,function(a){angular.extend(e,H(a))}):angular.extend(e,H(b)),L=!1,c.resolve({key:a,table:e}),d.$emit("$translateLoadingEnd",{language:a})},function(a){d.$emit("$translateLoadingError",{language:a}),c.reject(a),d.$emit("$translateLoadingEnd",{language:a})}),c.promise};if(i&&(s=b.get(i),!s.get||!s.put))throw new Error("Couldn't use storage '"+i+"', missing get() or put() method!");angular.isFunction(C.useSanitizeValueStrategy)&&C.useSanitizeValueStrategy(v),u.length&&angular.forEach(u,function(a){var d=b.get(a);d.setLocale(c||g),angular.isFunction(d.useSanitizeValueStrategy)&&d.useSanitizeValueStrategy(v),M[d.getInterpolationIdentifier()]=d});var S=function(a){var b=j.defer();return Object.prototype.hasOwnProperty.call(r,a)?b.resolve(r[a]):N[a]?N[a].then(function(a){G(a.key,a.table),b.resolve(a.table)},b.reject):b.reject(),b.promise},T=function(a,b,c,d){var e=j.defer();return S(a).then(function(f){if(Object.prototype.hasOwnProperty.call(f,b)){d.setLocale(a);var h=f[b];"@:"===h.substr(0,2)?T(a,h.substr(2),c,d).then(e.resolve,e.reject):e.resolve(d.interpolate(f[b],c)),d.setLocale(g)}else e.reject()},e.reject),e.promise},U=function(a,b,c,d){var e,f=r[a];if(f&&Object.prototype.hasOwnProperty.call(f,b)){if(d.setLocale(a),e=d.interpolate(f[b],c),"@:"===e.substr(0,2))return U(a,e.substr(2),c,d);d.setLocale(g)}return e},V=function(a){if(k){var c=b.get(k)(a,g);return void 0!==c?c:a}return a},W=function(a,b,c,d,f){var g=j.defer();if(a<e.length){var h=e[a];T(h,b,c,d).then(g.resolve,function(){W(a+1,b,c,d,f).then(g.resolve)})}else g.resolve(f?f:V(b));return g.promise},X=function(a,b,c,d){var f;if(a<e.length){var g=e[a];f=U(g,b,c,d),f||(f=X(a+1,b,c,d))}return f},Y=function(a,b,c,d){return W(B>0?B:y,a,b,c,d)},Z=function(a,b,c){return X(B>0?B:y,a,b,c)},$=function(a,b,c,d){var f=j.defer(),h=g?r[g]:r,i=c?M[c]:C;if(h&&Object.prototype.hasOwnProperty.call(h,a)){var l=h[a];"@:"===l.substr(0,2)?O(l.substr(2),b,c,d).then(f.resolve,f.reject):f.resolve(i.interpolate(l,b))}else{var m;k&&!L&&(m=V(a)),g&&e&&e.length?Y(a,b,i,d).then(function(a){f.resolve(a)},function(a){f.reject(P(a))}):k&&!L&&m?f.resolve(d?d:m):d?f.resolve(d):f.reject(P(a))}return f.promise},_=function(a,b,c){var d,f=g?r[g]:r,h=C;if(M&&Object.prototype.hasOwnProperty.call(M,c)&&(h=M[c]),f&&Object.prototype.hasOwnProperty.call(f,a)){var i=f[a];d="@:"===i.substr(0,2)?_(i.substr(2),b,c):h.interpolate(i,b)}else{var j;k&&!L&&(j=V(a)),g&&e&&e.length?(y=0,d=Z(a,b,h)):d=k&&!L&&j?j:P(a)}return d};if(O.preferredLanguage=function(a){return a&&I(a),c},O.cloakClassName=function(){return w},O.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(J(a),m&&e&&e.length)for(var b=0,c=e.length;c>b;b++)N[e[b]]||(N[e[b]]=R(e[b]));O.use(O.use())}return f?e[0]:e},O.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=D(e,a);b>-1&&(B=b)}else B=0},O.proposedLanguage=function(){return h},O.storage=function(){return s},O.use=function(a){if(!a)return g;var b=j.defer();d.$emit("$translateChangeStart",{language:a});var c=F(a);return c&&(a=c),r[a]||!m||N[a]?(b.resolve(a),Q(a)):(h=a,N[a]=R(a).then(function(c){return G(c.key,c.table),b.resolve(c.key),Q(c.key),h===a&&(h=void 0),c},function(a){h===a&&(h=void 0),d.$emit("$translateChangeError",{language:a}),b.reject(a),d.$emit("$translateChangeEnd",{language:a})})),b.promise},O.storageKey=function(){return K()},O.isPostCompilingEnabled=function(){return x},O.refresh=function(a){function b(){f.resolve(),d.$emit("$translateRefreshEnd",{language:a})}function c(){f.reject(),d.$emit("$translateRefreshEnd",{language:a})}if(!m)throw new Error("Couldn't refresh translation table, no loader registered!");var f=j.defer();if(d.$emit("$translateRefreshStart",{language:a}),a)r[a]?R(a).then(function(c){G(c.key,c.table),a===g&&Q(g),b()},c):c();else{var h=[],i={};if(e&&e.length)for(var k=0,l=e.length;l>k;k++)h.push(R(e[k])),i[e[k]]=!0;g&&!i[g]&&h.push(R(g)),j.all(h).then(function(a){angular.forEach(a,function(a){r[a.key]&&delete r[a.key],G(a.key,a.table)}),g&&Q(g),b()})}return f.promise},O.instant=function(a,b,d){if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var f={},h=0,i=a.length;i>h;h++)f[a[h]]=O.instant(a[h],b,d);return f}if(angular.isString(a)&&a.length<1)return a;a&&(a=E.apply(a));var j,l=[];c&&l.push(c),g&&l.push(g),e&&e.length&&(l=l.concat(e));for(var m=0,n=l.length;n>m;m++){var q=l[m];if(r[q]&&("undefined"!=typeof r[q][a]?j=_(a,b,d):(o||p)&&(j=P(a))),"undefined"!=typeof j)break}return j||""===j||(j=C.interpolate(a,b),k&&!L&&(j=V(a))),j},O.versionInfo=function(){return A},O.loaderCache=function(){return q},O.directivePriority=function(){return z},m&&(angular.equals(r,{})&&O.use(O.use()),e&&e.length))for(var ab=function(a){return G(a.key,a.table),d.$emit("$translateChangeEnd",{language:a.key}),a},bb=0,cb=e.length;cb>bb;bb++)N[e[bb]]=R(e[bb]).then(ab);return O}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(a){var b,c={},d="default",e=null,f={escaped:function(a){var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=angular.isNumber(a[c])?a[c]:angular.element("<div></div>").text(a[c]).html());return b}},g=function(a){var b;return b=angular.isFunction(f[e])?f[e](a):a};return c.setLocale=function(a){b=a},c.getInterpolationIdentifier=function(){return d},c.useSanitizeValueStrategy=function(a){return e=a,this},c.interpolate=function(b,c){return e&&(c=g(c)),a(b)(c||{})},c}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(a,b,c,d,e,f){var g=function(){return this.replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:a.directivePriority(),compile:function(b,h){var i=h.translateValues?h.translateValues:void 0,j=h.translateInterpolation?h.translateInterpolation:void 0,k=b[0].outerHTML.match(/translate-value-+/i),l="^(.*)("+c.startSymbol()+".*"+c.endSymbol()+")(.*)",m="^(.*)"+c.startSymbol()+"(.*)"+c.endSymbol()+"(.*)";return function(b,n,o){b.interpolateParams={},b.preText="",b.postText="";var p={},q=function(a){if(angular.isFunction(q._unwatchOld)&&(q._unwatchOld(),q._unwatchOld=void 0),angular.equals(a,"")||!angular.isDefined(a)){var d=g.apply(n.text()).match(l);if(angular.isArray(d)){b.preText=d[1],b.postText=d[3],p.translate=c(d[2])(b.$parent);var e=n.text().match(m);angular.isArray(e)&&e[2]&&e[2].length&&(q._unwatchOld=b.$watch(e[2],function(a){p.translate=a,w()}))}else p.translate=n.text().replace(/^\s+|\s+$/g,"")}else p.translate=a;w()},r=function(a){o.$observe(a,function(b){p[a]=b,w()})},s=!0;o.$observe("translate",function(a){"undefined"==typeof a?q(""):""===a&&s||(p.translate=a,w()),s=!1});for(var t in o)o.hasOwnProperty(t)&&"translateAttr"===t.substr(0,13)&&r(t);if(o.$observe("translateDefault",function(a){b.defaultText=a}),i&&o.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),k){var u=function(a){o.$observe(a,function(c){var d=angular.lowercase(a.substr(14,1))+a.substr(15);b.interpolateParams[d]=c})};for(var v in o)Object.prototype.hasOwnProperty.call(o,v)&&"translateValue"===v.substr(0,14)&&"translateValues"!==v&&u(v)}var w=function(){for(var a in p)p.hasOwnProperty(a)&&x(a,p[a],b,b.interpolateParams,b.defaultText)},x=function(b,c,d,e,f){c?a(c,e,j,f).then(function(a){y(a,d,!0,b)},function(a){y(a,d,!1,b)}):y(c,d,!1,b)},y=function(b,c,e,f){if("translate"===f){e||"undefined"==typeof c.defaultText||(b=c.defaultText),n.html(c.preText+b+c.postText);var g=a.isPostCompilingEnabled(),i="undefined"!=typeof h.translateCompile,j=i&&"false"!==h.translateCompile;(g&&!i||j)&&d(n.contents())(c)}else{e||"undefined"==typeof c.defaultText||(b=c.defaultText);var k=o.$attr[f].substr(15);n.attr(k,b)}};b.$watch("interpolateParams",w,!0);var z=f.$on("$translateChangeSuccess",w);n.text().length&&q(""),w(),b.$on("$destroy",z)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(a,b){return{compile:function(c){var d=function(){c.addClass(b.cloakClassName())},e=function(){c.removeClass(b.cloakClassName())},f=a.$on("$translateChangeEnd",function(){e(),f(),f=null});return d(),function(a,c,f){f.translateCloak&&f.translateCloak.length&&f.$observe("translateCloak",function(a){b(a).then(e,d)})}}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(a,b){var c=function(c,d,e){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e)};return c.$stateful=!0,c}]);

(function(root){function MessageFormat(locale,pluralFunc,globalName){var lc=locale||'en',lcFile;if(pluralFunc){MessageFormat.locale[lc]=pluralFunc;}else{while(lc&&!MessageFormat.locale.hasOwnProperty(lc)){lc=lc.replace(/[-_]?[^-_]*$/,'');}
if(!lc){lc=locale.replace(/[-_].*$/,'');MessageFormat.loadLocale(lc);}}
this.lc=lc;this.globalName=globalName||'i18n';}
if(!('locale'in MessageFormat))MessageFormat.locale={};MessageFormat.loadLocale=function(lc){try{var lcFile=require('path').join(__dirname,'locale',lc+'.js'),lcStr=(''+require('fs').readFileSync(lcFile)).match(/{[^]*}/);if(!lcStr)throw"no function found in file '"+lcFile+"'";MessageFormat.locale[lc]='function(n)'+lcStr;}catch(ex){if(lc=='en'){MessageFormat.locale[lc]='function(n){return n===1?"one":"other"}';}else{ex.message='Locale '+lc+' could not be loaded: '+ex.message;throw ex;}}};MessageFormat.prototype.functions=function(){var l=[];for(var lc in MessageFormat.locale){if(MessageFormat.locale.hasOwnProperty(lc)){l.push(JSON.stringify(lc)+':'+MessageFormat.locale[lc].toString().trim());}}
return'{lc:{'+l.join(',')+'},\n'
+'c:function(d,k){if(!d)throw new Error("MessageFormat: Data required for \'"+k+"\'.")},\n'
+'n:function(d,k,o){if(isNaN(d[k]))throw new Error("MessageFormat: \'"+k+"\' isn\'t a number.");return d[k]-(o||0)},\n'
+'v:function(d,k){'+this.globalName+'.c(d,k);return d[k]},\n'
+'p:function(d,k,o,l,p){'+this.globalName+'.c(d,k);return d[k] in p?p[d[k]]:(k='+this.globalName+'.lc[l](d[k]-o),k in p?p[k]:p.other)},\n'
+'s:function(d,k,p){'+this.globalName+'.c(d,k);return d[k] in p?p[d[k]]:p.other}}';};var mparser=(function(){function peg$subclass(child,parent){function ctor(){this.constructor=child;}
ctor.prototype=parent.prototype;child.prototype=new ctor();}
function SyntaxError(message,expected,found,offset,line,column){this.message=message;this.expected=expected;this.found=found;this.offset=offset;this.line=line;this.column=column;this.name="SyntaxError";}
peg$subclass(SyntaxError,Error);function parse(input){var options=arguments.length>1?arguments[1]:{},peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0=function(messageFormatPattern){return{type:"program",program:messageFormatPattern};},peg$c1=peg$FAILED,peg$c2=[],peg$c3=function(s1,inner){var st=[];if(s1&&s1.val){st.push(s1);}
for(var i in inner){if(inner.hasOwnProperty(i)){st.push(inner[i]);}}
return{type:'messageFormatPattern',statements:st};},peg$c4="{",peg$c5={type:"literal",value:"{",description:"\"{\""},peg$c6="}",peg$c7={type:"literal",value:"}",description:"\"}\""},peg$c8=function(mfe,s1){var res=[];if(mfe){res.push(mfe);}
if(s1&&s1.val){res.push(s1);}
return{type:"messageFormatPatternRight",statements:res};},peg$c9=null,peg$c10=",",peg$c11={type:"literal",value:",",description:"\",\""},peg$c12=function(argIdx,efmt){var res={type:"messageFormatElement",argumentIndex:argIdx};if(efmt&&efmt.length){res.elementFormat=efmt[1];}
else{res.output=true;}
return res;},peg$c13="plural",peg$c14={type:"literal",value:"plural",description:"\"plural\""},peg$c15=function(t,s){return{type:"elementFormat",key:t,val:s.val};},peg$c16="select",peg$c17={type:"literal",value:"select",description:"\"select\""},peg$c18=function(pfp){return{type:"pluralStyle",val:pfp};},peg$c19=function(sfp){return{type:"selectStyle",val:sfp};},peg$c20=function(op,pf){var res={type:"pluralFormatPattern",pluralForms:pf};if(op){res.offset=op;}
else{res.offset=0;}
return res;},peg$c21="offset",peg$c22={type:"literal",value:"offset",description:"\"offset\""},peg$c23=":",peg$c24={type:"literal",value:":",description:"\":\""},peg$c25=function(d){return d;},peg$c26=function(pf){return{type:"selectFormatPattern",pluralForms:pf};},peg$c27=function(k,mfp){return{type:"pluralForms",key:k,val:mfp};},peg$c28=function(i){return i;},peg$c29="=",peg$c30={type:"literal",value:"=",description:"\"=\""},peg$c31=function(ws,s){var tmp=[];for(var i=0;i<s.length;++i){for(var j=0;j<s[i].length;++j){tmp.push(s[i][j]);}}
return{type:"string",val:ws+tmp.join('')};},peg$c32=/^[0-9a-zA-Z$_]/,peg$c33={type:"class",value:"[0-9a-zA-Z$_]",description:"[0-9a-zA-Z$_]"},peg$c34=/^[^ \t\n\r,.+={}]/,peg$c35={type:"class",value:"[^ \\t\\n\\r,.+={}]",description:"[^ \\t\\n\\r,.+={}]"},peg$c36=function(s1,s2){return s1+(s2?s2.join(''):'');},peg$c37=function(chars){return chars.join('');},peg$c38=/^[^{}\\\0-\x1F \t\n\r]/,peg$c39={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},peg$c40=function(x){return x;},peg$c41="\\#",peg$c42={type:"literal",value:"\\#",description:"\"\\\\#\""},peg$c43=function(){return"\\#";},peg$c44="\\{",peg$c45={type:"literal",value:"\\{",description:"\"\\\\{\""},peg$c46=function(){return"\u007B";},peg$c47="\\}",peg$c48={type:"literal",value:"\\}",description:"\"\\\\}\""},peg$c49=function(){return"\u007D";},peg$c50="\\u",peg$c51={type:"literal",value:"\\u",description:"\"\\\\u\""},peg$c52=function(h1,h2,h3,h4){return String.fromCharCode(parseInt("0x"+h1+h2+h3+h4));},peg$c53=/^[0-9]/,peg$c54={type:"class",value:"[0-9]",description:"[0-9]"},peg$c55=function(ds){return parseInt((ds.join('')),10);},peg$c56=/^[0-9a-fA-F]/,peg$c57={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},peg$c58={type:"other",description:"whitespace"},peg$c59=function(w){return w.join('');},peg$c60=/^[ \t\n\r]/,peg$c61={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},peg$currPos=0,peg$reportedPos=0,peg$cachedPos=0,peg$cachedPosDetails={line:1,column:1,seenCR:false},peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+"\".");}
peg$startRuleFunction=peg$startRuleFunctions[options.startRule];}
function text(){return input.substring(peg$reportedPos,peg$currPos);}
function offset(){return peg$reportedPos;}
function line(){return peg$computePosDetails(peg$reportedPos).line;}
function column(){return peg$computePosDetails(peg$reportedPos).column;}
function expected(description){throw peg$buildException(null,[{type:"other",description:description}],peg$reportedPos);}
function error(message){throw peg$buildException(message,null,peg$reportedPos);}
function peg$computePosDetails(pos){function advance(details,startPos,endPos){var p,ch;for(p=startPos;p<endPos;p++){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++;}
details.column=1;details.seenCR=false;}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true;}else{details.column++;details.seenCR=false;}}}
if(peg$cachedPos!==pos){if(peg$cachedPos>pos){peg$cachedPos=0;peg$cachedPosDetails={line:1,column:1,seenCR:false};}
advance(peg$cachedPosDetails,peg$cachedPos,pos);peg$cachedPos=pos;}
return peg$cachedPosDetails;}
function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return;}
if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[];}
peg$maxFailExpected.push(expected);}
function peg$buildException(message,expected,pos){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1;}else if(a.description>b.description){return 1;}else{return 0;}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1);}else{i++;}}}
function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase();}
return s.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\x08/g,'\\b').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\f/g,'\\f').replace(/\r/g,'\\r').replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return'\\x0'+hex(ch);}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return'\\x'+hex(ch);}).replace(/[\u0180-\u0FFF]/g,function(ch){return'\\u0'+hex(ch);}).replace(/[\u1080-\uFFFF]/g,function(ch){return'\\u'+hex(ch);});}
var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description;}
expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")
+" or "
+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?"\""+stringEscape(found)+"\"":"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found.";}
var posDetails=peg$computePosDetails(pos),found=pos<input.length?input.charAt(pos):null;if(expected!==null){cleanupExpected(expected);}
return new SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,pos,posDetails.line,posDetails.column);}
function peg$parsestart(){var s0,s1;s0=peg$currPos;s1=peg$parsemessageFormatPattern();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c0(s1);}
s0=s1;return s0;}
function peg$parsemessageFormatPattern(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsestring();if(s1!==peg$FAILED){s2=[];s3=peg$parsemessageFormatPatternRight();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsemessageFormatPatternRight();}
if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c3(s1,s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
return s0;}
function peg$parsemessageFormatPatternRight(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c4;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5);}}
if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parsemessageFormatElement();if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s5=peg$c6;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7);}}
if(s5!==peg$FAILED){s6=peg$parsestring();if(s6!==peg$FAILED){peg$reportedPos=s0;s1=peg$c8(s3,s6);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
return s0;}
function peg$parsemessageFormatElement(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseid();if(s1!==peg$FAILED){s2=peg$currPos;if(input.charCodeAt(peg$currPos)===44){s3=peg$c10;peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11);}}
if(s3!==peg$FAILED){s4=peg$parseelementFormat();if(s4!==peg$FAILED){s3=[s3,s4];s2=s3;}else{peg$currPos=s2;s2=peg$c1;}}else{peg$currPos=s2;s2=peg$c1;}
if(s2===peg$FAILED){s2=peg$c9;}
if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c12(s1,s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
return s0;}
function peg$parseelementFormat(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){if(input.substr(peg$currPos,6)===peg$c13){s2=peg$c13;peg$currPos+=6;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c14);}}
if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s4=peg$c10;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11);}}
if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s6=peg$parsepluralStyle();if(s6!==peg$FAILED){s7=peg$parse_();if(s7!==peg$FAILED){peg$reportedPos=s0;s1=peg$c15(s2,s6);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){if(input.substr(peg$currPos,6)===peg$c16){s2=peg$c16;peg$currPos+=6;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c17);}}
if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s4=peg$c10;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11);}}
if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s6=peg$parseselectStyle();if(s6!==peg$FAILED){s7=peg$parse_();if(s7!==peg$FAILED){peg$reportedPos=s0;s1=peg$c15(s2,s6);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}
return s0;}
function peg$parsepluralStyle(){var s0,s1;s0=peg$currPos;s1=peg$parsepluralFormatPattern();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c18(s1);}
s0=s1;return s0;}
function peg$parseselectStyle(){var s0,s1;s0=peg$currPos;s1=peg$parseselectFormatPattern();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c19(s1);}
s0=s1;return s0;}
function peg$parsepluralFormatPattern(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseoffsetPattern();if(s1===peg$FAILED){s1=peg$c9;}
if(s1!==peg$FAILED){s2=[];s3=peg$parsepluralForms();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parsepluralForms();}
if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c20(s1,s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
return s0;}
function peg$parseoffsetPattern(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){if(input.substr(peg$currPos,6)===peg$c21){s2=peg$c21;peg$currPos+=6;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c22);}}
if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s4=peg$c23;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c24);}}
if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s6=peg$parsedigits();if(s6!==peg$FAILED){s7=peg$parse_();if(s7!==peg$FAILED){peg$reportedPos=s0;s1=peg$c25(s6);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
return s0;}
function peg$parseselectFormatPattern(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parsepluralForms();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsepluralForms();}
if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c26(s1);}
s0=s1;return s0;}
function peg$parsepluralForms(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){s2=peg$parsestringKey();if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s4=peg$c4;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5);}}
if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s6=peg$parsemessageFormatPattern();if(s6!==peg$FAILED){s7=peg$parse_();if(s7!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s8=peg$c6;peg$currPos++;}else{s8=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7);}}
if(s8!==peg$FAILED){peg$reportedPos=s0;s1=peg$c27(s2,s6);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
return s0;}
function peg$parsestringKey(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseid();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c28(s1);}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===61){s1=peg$c29;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c30);}}
if(s1!==peg$FAILED){s2=peg$parsedigits();if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c25(s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}
return s0;}
function peg$parsestring(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=peg$parse_();if(s4!==peg$FAILED){s5=peg$parsechars();if(s5!==peg$FAILED){s6=peg$parse_();if(s6!==peg$FAILED){s4=[s4,s5,s6];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}
while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=peg$parse_();if(s4!==peg$FAILED){s5=peg$parsechars();if(s5!==peg$FAILED){s6=peg$parse_();if(s6!==peg$FAILED){s4=[s4,s5,s6];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}
if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c31(s1,s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
return s0;}
function peg$parseid(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){if(peg$c32.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c33);}}
if(s2!==peg$FAILED){s3=[];if(peg$c34.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35);}}
while(s4!==peg$FAILED){s3.push(s4);if(peg$c34.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35);}}}
if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){peg$reportedPos=s0;s1=peg$c36(s2,s3);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}
return s0;}
function peg$parsechars(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parsechar();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsechar();}}else{s1=peg$c1;}
if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c37(s1);}
s0=s1;return s0;}
function peg$parsechar(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(peg$c38.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39);}}
if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c40(s1);}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c41){s1=peg$c41;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42);}}
if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c43();}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c44){s1=peg$c44;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c45);}}
if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c46();}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c47){s1=peg$c47;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48);}}
if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c49();}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c50){s1=peg$c50;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c51);}}
if(s1!==peg$FAILED){s2=peg$parsehexDigit();if(s2!==peg$FAILED){s3=peg$parsehexDigit();if(s3!==peg$FAILED){s4=peg$parsehexDigit();if(s4!==peg$FAILED){s5=peg$parsehexDigit();if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c52(s2,s3,s4,s5);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}}}}
return s0;}
function peg$parsedigits(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c53.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c54);}}
if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c53.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c54);}}}}else{s1=peg$c1;}
if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c55(s1);}
s0=s1;return s0;}
function peg$parsehexDigit(){var s0;if(peg$c56.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c57);}}
return s0;}
function peg$parse_(){var s0,s1,s2;peg$silentFails++;s0=peg$currPos;s1=[];s2=peg$parsewhitespace();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsewhitespace();}
if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c59(s1);}
s0=s1;peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c58);}}
return s0;}
function peg$parsewhitespace(){var s0;if(peg$c60.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61);}}
return s0;}
peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result;}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"});}
throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos);}}
return{SyntaxError:SyntaxError,parse:parse};})();MessageFormat.prototype.parse=function(){return mparser.parse.apply(mparser,arguments);};MessageFormat.prototype.precompile=function(ast){var self=this,needOther=false;function _next(data){var res=JSON.parse(JSON.stringify(data));res.pf_count++;return res;}
function interpMFP(ast,data){data=data||{keys:{},offset:{}};var r=[],i,tmp;switch(ast.type){case'program':return interpMFP(ast.program);case'messageFormatPattern':for(i=0;i<ast.statements.length;++i){r.push(interpMFP(ast.statements[i],data));}
tmp=r.join('+')||'""';return data.pf_count?tmp:'function(d){return '+tmp+'}';case'messageFormatPatternRight':for(i=0;i<ast.statements.length;++i){r.push(interpMFP(ast.statements[i],data));}
return r.join('+');case'messageFormatElement':data.pf_count=data.pf_count||0;if(ast.output){return self.globalName+'.v(d,"'+ast.argumentIndex+'")';}
else{data.keys[data.pf_count]='"'+ast.argumentIndex+'"';return interpMFP(ast.elementFormat,data);}
return'';case'elementFormat':if(ast.key==='select'){return self.globalName+'.s(d,'+data.keys[data.pf_count]+','+interpMFP(ast.val,data)+')';}
else if(ast.key==='plural'){data.offset[data.pf_count||0]=ast.val.offset||0;return self.globalName+'.p(d,'+data.keys[data.pf_count]+','+(data.offset[data.pf_count]||0)
+',"'+self.lc+'",'+interpMFP(ast.val,data)+')';}
return'';case'pluralFormatPattern':data.pf_count=data.pf_count||0;needOther=true;for(i=0;i<ast.pluralForms.length;++i){if(ast.pluralForms[i].key==='other'){needOther=false;}
r.push('"'+ast.pluralForms[i].key+'":'+interpMFP(ast.pluralForms[i].val,_next(data)));}
if(needOther){throw new Error("No 'other' form found in pluralFormatPattern "+data.pf_count);}
return'{'+r.join(',')+'}';case'selectFormatPattern':data.pf_count=data.pf_count||0;data.offset[data.pf_count]=0;needOther=true;for(i=0;i<ast.pluralForms.length;++i){if(ast.pluralForms[i].key==='other'){needOther=false;}
r.push('"'+ast.pluralForms[i].key+'":'+interpMFP(ast.pluralForms[i].val,_next(data)));}
if(needOther){throw new Error("No 'other' form found in selectFormatPattern "+data.pf_count);}
return'{'+r.join(',')+'}';case'string':tmp='"'+(ast.val||"").replace(/\n/g,'\\n').replace(/"/g,'\\"')+'"';if(data.pf_count){var o=data.offset[data.pf_count-1];tmp=tmp.replace(/(^|[^\\])#/g,'$1"+'+self.globalName+'.n(d,'+data.keys[data.pf_count-1]+(o?','+o:'')+')+"');tmp=tmp.replace(/^""\+/,'').replace(/\+""$/,'');}
return tmp;default:throw new Error('Bad AST type: '+ast.type);}}
return interpMFP(ast);};MessageFormat.prototype.compile=function(message){return(new Function('this[\''+this.globalName+'\']='+this.functions()+';'+'return '+this.precompile(this.parse(message))))();};MessageFormat.prototype.precompileObject=function(messages){var tmp=[];for(var key in messages){tmp.push(JSON.stringify(key)+':'+this.precompile(this.parse(messages[key])));}
return'{\n'+tmp.join(',\n')+'}';};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=MessageFormat;}
exports.MessageFormat=MessageFormat;}
else if(typeof define==='function'&&define.amd){define(function(){return MessageFormat;});}
else{root['MessageFormat']=MessageFormat;}})(this);

MessageFormat.locale.en=function(n){return n===1?"one":"other"}

angular.module("pascalprecht.translate").constant("TRANSLATE_MF_INTERPOLATION_CACHE","$translateMessageFormatInterpolation").factory("$translateMessageFormatInterpolation",["$cacheFactory","TRANSLATE_MF_INTERPOLATION_CACHE",function(a,b){var c={},d=a.get(b),e=new MessageFormat("en"),f="messageformat",g=null,h={escaped:function(a){var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=angular.element("<div></div>").text(a[c]).html());return b}},i=function(a){var b;return b=angular.isFunction(h[g])?h[g](a):a};return d||(d=a(b)),d.put("en",e),c.setLocale=function(a){e=d.get(a),e||(e=new MessageFormat(a),d.put(a,e))},c.getInterpolationIdentifier=function(){return f},c.useSanitizeValueStrategy=function(a){return g=a,this},c.interpolate=function(a,b){b=b||{},g&&(b=i(b));var c=d.get(a+angular.toJson(b));return c||(c=e.compile(a)(b),d.put(a+angular.toJson(b),c)),c},c}]);
;(function(angular){'use strict';angular.module('li.services.plugins.localization-manager',['li.services.rest.rest-manager','li.services.community.context-manager','li.services.cache.localstorage-cache-manager','pascalprecht.translate']).config(['$translateProvider',function($translateProvider){$translateProvider.useLoader('$liLocalizationManager',{});$translateProvider.preferredLanguage('en');$translateProvider.addInterpolation('$translateMessageFormatInterpolation');}]).factory('$liLocalizationManager',['$liRestManager','$log','$q','$rootScope','$liContextManager','$timeout','$translate','$liLocalstorageCacheManager',function($liRestManager,$log,$q,$rootScope,$liContextManager,$timeout,$translate,$liLocalstorageCacheManager){var textdata={li:{}};var groups={};var nodeId=$liContextManager.coreNode().id;var nodeType=$liContextManager.coreNode().type;var promises=[];var groupsLoaded=[];var groupLoadedCbs={};var cache=false;if($liContextManager.config().phase==='prod'){var cachekey='$liLocalizationManager'+'::revision::'+$liContextManager.config()['app.revision']+'::lang::'+$liContextManager.currentUserSettings()['profile.language'];cache=$liLocalstorageCacheManager(cachekey,{capacity:30});}
function getGroup(group){if(!textdata.li.hasOwnProperty(group)){textdata.li[group]={};var params={group:'ng-'+group};if(nodeId&&nodeType&&nodeType!=='community'){params[nodeType+'.id']=nodeId;}
return $liRestManager.request('/ui/lang/:group',params,{},'GET',cache).then(function(response){if(response.data&&response.data.li){angular.extend(textdata.li[group],response.data.li[group]);groupsLoaded.push(group);if(groupLoadedCbs[group]){angular.forEach(groupLoadedCbs[group],function(cb){cb();});}}else{$log.error('Error loading text keys data for group: ['+group+']',response);}}).catch(function(){$log.error('Error while getting text keys data for group: '+group);});}else{return $q.when();}}
function service(){angular.forEach(groups,function(val,group){if(!groups[group]){groups[group]=getGroup(group);}
promises.push(groups[group]);});if(promises.length>0){return $q.all(promises).then(function(){return textdata;});}else{return $q.when(textdata);}}
function addPart(group){if(!groups.hasOwnProperty(group)){groups[group]=false;$translate.refresh();}}
function loaded(checkGroups){var isLoaded=true;angular.forEach(checkGroups,function(checkGroup){if(groupsLoaded.indexOf(checkGroup)===-1){isLoaded=false;}});return isLoaded;}
function onLoad(loadGroups,cb){loadGroups=angular.isArray(loadGroups)?loadGroups:[loadGroups];angular.forEach(loadGroups,function(loadGroup){if(groupsLoaded.indexOf(loadGroup)===-1){groupLoadedCbs[loadGroup]=groupLoadedCbs[loadGroup]||[];groupLoadedCbs[loadGroup].push(cb);}else{cb();}});}
function loadGroupFromKey(key){var group;if(key&&key.length>0){var parts=key.split('.');if(parts.length>1&&parts[0]==='li'){group=parts[1];addPart(group);}}
return group;}
function translate(translationId,interpolateParams,interpolation){var defer=$q.defer();onLoad(loadGroupFromKey(translationId),function(){$timeout(function(){$translate(translationId,interpolateParams,interpolation).then(defer.resolve);});});return defer.promise;}
service.addPart=addPart;service.loaded=loaded;service.onLoad=onLoad;service.loadGroupFromKey=loadGroupFromKey;service.translate=translate;return service;}]).filter('translate',['$parse','$translate','$liLocalizationManager','$liContextManager',function($parse,$translate,$liLocalizationManager,$liContextManager){function translateFilter(translationId,interpolateParams,interpolation){var showTextKeys=$liContextManager.server().show_text_keys;$liLocalizationManager.loadGroupFromKey(translationId);if(!angular.isObject(interpolateParams)){interpolateParams=$parse(interpolateParams)();}
return showTextKeys===true?translationId:$translate.instant(translationId,interpolateParams,interpolation);}
translateFilter.$stateful=true;return translateFilter;}]);})(window.LITHIUM&&LITHIUM.angular||angular);

(function(p,c,C){'use strict';function v(r,h,g){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(a,f,b,d,y){function z(){k&&(g.cancel(k),k=null);l&&(l.$destroy(),l=null);m&&(k=g.leave(m),k.then(function(){k=null}),m=null)}function x(){var b=r.current&&r.current.locals;if(c.isDefined(b&&b.$template)){var b=a.$new(),d=r.current;m=y(b,function(b){g.enter(b,null,m||f).then(function(){!c.isDefined(t)||t&&!a.$eval(t)||h()});z()});l=d.scope=b;l.$emit("$viewContentLoaded");l.$eval(w)}else z()}var l,m,k,t=b.autoscroll,w=b.onload||"";a.$on("$routeChangeSuccess",x);x()}}}function A(c,h,g){return{restrict:"ECA",priority:-400,link:function(a,f){var b=g.current,d=b.locals;f.html(d.$template);var y=c(f.contents());b.controller&&(d.$scope=a,d=h(b.controller,d),b.controllerAs&&(a[b.controllerAs]=d),f.data("$ngControllerController",d),f.children().data("$ngControllerController",d));y(a)}}}p=c.module("ngRoute",["ng"]).provider("$route",function(){function r(a,f){return c.extend(Object.create(a),f)}function h(a,c){var b=c.caseInsensitiveMatch,d={originalPath:a,regexp:a},g=d.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,c,b,d){a="?"===d?d:null;d="*"===d?d:null;g.push({name:b,optional:!!a});c=c||"";return""+(a?"":c)+"(?:"+(a?c:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1");d.regexp=new RegExp("^"+a+"$",b?"i":"");return d}var g={};this.when=function(a,f){var b=c.copy(f);c.isUndefined(b.reloadOnSearch)&&(b.reloadOnSearch=!0);c.isUndefined(b.caseInsensitiveMatch)&&(b.caseInsensitiveMatch=this.caseInsensitiveMatch);g[a]=c.extend(b,a&&h(a,b));if(a){var d="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";g[d]=c.extend({redirectTo:a},h(d,b))}return this};this.caseInsensitiveMatch=!1;this.otherwise=function(a){"string"===typeof a&&(a={redirectTo:a});this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(a,f,b,d,h,p,x){function l(b){var e=s.current;(v=(n=k())&&e&&n.$$route===e.$$route&&c.equals(n.pathParams,e.pathParams)&&!n.reloadOnSearch&&!w)||!e&&!n||a.$broadcast("$routeChangeStart",n,e).defaultPrevented&&b&&b.preventDefault()}function m(){var u=s.current,e=n;if(v)u.params=e.params,c.copy(u.params,b),a.$broadcast("$routeUpdate",u);else if(e||u)w=!1,(s.current=e)&&e.redirectTo&&(c.isString(e.redirectTo)?f.path(t(e.redirectTo,e.params)).search(e.params).replace():f.url(e.redirectTo(e.pathParams,f.path(),f.search())).replace()),d.when(e).then(function(){if(e){var a=c.extend({},e.resolve),b,f;c.forEach(a,function(b,e){a[e]=c.isString(b)?h.get(b):h.invoke(b,null,null,e)});c.isDefined(b=e.template)?c.isFunction(b)&&(b=b(e.params)):c.isDefined(f=e.templateUrl)&&(c.isFunction(f)&&(f=f(e.params)),c.isDefined(f)&&(e.loadedTemplateUrl=x.valueOf(f),b=p(f)));c.isDefined(b)&&(a.$template=b);return d.all(a)}}).then(function(f){e==s.current&&(e&&(e.locals=f,c.copy(e.params,b)),a.$broadcast("$routeChangeSuccess",e,u))},function(b){e==s.current&&a.$broadcast("$routeChangeError",e,u,b)})}function k(){var a,b;c.forEach(g,function(d,g){var q;if(q=!b){var h=f.path();q=d.keys;var l={};if(d.regexp)if(h=d.regexp.exec(h)){for(var k=1,m=h.length;k<m;++k){var n=q[k-1],p=h[k];n&&p&&(l[n.name]=p)}q=l}else q=null;else q=null;q=a=q}q&&(b=r(d,{params:c.extend({},f.search(),a),pathParams:a}),b.$$route=d)});return b||g[null]&&r(g[null],{params:{},pathParams:{}})}function t(a,b){var d=[];c.forEach((a||"").split(":"),function(a,c){if(0===c)d.push(a);else{var f=a.match(/(\w+)(?:[?*])?(.*)/),g=f[1];d.push(b[g]);d.push(f[2]||"");delete b[g]}});return d.join("")}var w=!1,n,v,s={routes:g,reload:function(){w=!0;a.$evalAsync(function(){l();m()})},updateParams:function(a){if(this.current&&this.current.$$route)a=c.extend({},this.current.params,a),f.path(t(this.current.$$route.originalPath,a)),f.search(a);else throw B("norout");}};a.$on("$locationChangeStart",l);a.$on("$locationChangeSuccess",m);return s}]});var B=c.$$minErr("ngRoute");p.provider("$routeParams",function(){this.$get=function(){return{}}});p.directive("ngView",v);p.directive("ngView",A);v.$inject=["$route","$anchorScroll","$animate"];A.$inject=["$compile","$controller","$route"]})(window,window.angular);
;(function(angular){'use strict';angular.module('li.services.utils.url-manager',['li.services.community.context-manager','ngRoute']).constant('$liUrlManagerConfig',{ImageServerPage:{path:{required:['image-id'],optional:['image-size','crop-image','image-dimensions']},tpl:'{{tapestryContext}}/image/serverpage'},GalleryPage:{path:{optional:['user-id','tab']},tpl:'{{tapestryContext}}/media/gallerypage'},KudosMessagePage:{path:{optional:['image-id','message-uid','tab']},tpl:'{{tapestryContext}}/kudos/messagepage'},NotificationFeedPage:{tpl:'{{tapestryContext}}/notificationfeed/page'},PrivateNotesPage:{tpl:'{{tapestryContext}}/notes/privatenotespage'},RatingDetailPage:{path:{required:['message-uid','rating-system']},tpl:'{{tapestryContext}}/ratings/ratingdetailpage'},RecentPostsPage:{path:{optional:['post-type','user-id']},tpl:'{{tapestryContext}}/forums/recentpostspage'},MyProfilePage:{path:{optional:['tab']},tpl:'{{tapestryContext}}/user/myprofilepage'},ProfilePlusPage:{tpl:'{{tapestryContext}}/user/myprofilepage/tab/personal-profile:profile-plus'},Params:{LABEL_NAME:'label-name',PRODUCT_ID:'product-id',SORT_STRING:'sort-string',TAB:'tab'},SearchPage:{path:{required:['tab']},query:{optional:['filter','location','q','include_ideas','f']},tpl:'{{tapestryContext}}/forums/searchpage'},RegistrationPage:{tpl:'{{tapestryContext}}/user/userregistrationpage'},VerifyEmailPage:{tpl:'{{tapestryContext}}/user/myprofilepage/tab/personal-profile:email'}}).factory('$liUrlManager',['$location','$window','$liUrlManagerConfig','$log','$interpolate','$liContextManager',function($location,$window,$liUrlManagerConfig,$log,$interpolate,$liContextManager){return{forceRedirect:function forceRedirect(url,$routeParams,params){var query=[];for(var key in params){if($routeParams[key]){if($routeParams[key]!==params[key]){url=url.replace(key+'='+$routeParams[key],key+'='+encodeURIComponent(params[key]));}}else{query.push(key+'='+encodeURIComponent(params[key]));}}
if(query.length>0){if(url.indexOf('?')>0){url=url+'&'+query.join('&');}else{url=url+'?'+query.join('&');}}
$window.location=url;},getHostName:function getHostName(url){var link=document.createElement('a');link.setAttribute('href',url);return link.hostname;},getPath:function getPath(url){var link=document.createElement('a');link.setAttribute('href',url);return link.pathname;},buildUrl:function buildUrl(key,params){var def=$liUrlManagerConfig[key];var pathItems=[];var queryItems=[];var hasError=false;function add(items,keys,params,required){if(keys){for(var i=0;i<keys.length;i++){var key=keys[i];if(required&&!params.hasOwnProperty(key)){hasError=true;$log.error('Required value [%s] was not specified',key,params);}else if(params.hasOwnProperty(key)){items.push({key:key,value:params[key]});}}}}
if(def&&def.tpl){var url;var path;var query;var queryPairs;var fragment;params=params||{};params.tapestryContext=$liContextManager.server().tapestry_prefix;if(def.path){add(pathItems,def.path.required,params,true);add(pathItems,def.path.optional,params,false);}
if(def.query){add(queryItems,def.query.required,params,true);add(queryItems,def.query.optional,params,false);}
fragment=params.fragment?'#'+params.fragment:'';if(hasError){return null;}
url=$interpolate($liUrlManagerConfig[key].tpl)(params);path=url.split('?')[0]||'';query=url.split('?')[1]||'';queryPairs=query?query.split('&'):[];angular.forEach(pathItems,function(pathItem){path+='/'+pathItem.key+'/'+pathItem.value;});angular.forEach(queryItems,function(queryItem){queryPairs.push(queryItem.key+'='+$window.encodeURIComponent(queryItem.value));});query=queryPairs.length>0?'?'+queryPairs.join('&'):'';return path+query+fragment;}else{$log.error('No URL exists for %s',key);}
return null;},adjustUrl:function adjustUrl(url){var path=url.split('?')[0]||url;var query=url.split('?')[1]||'';var queryPairs=query?query.split('&'):[];var fragment='';var urlAdjuster={addPathParam:function addPathParam(pathKey,pathValue){this.removePathParam(pathKey);path+='/'+pathKey+'/'+pathValue;return urlAdjuster;},removePathParam:function removePathParam(pathKey){var prefixPath;var postfixPath;var pathValueEndIndex;var pathItems=path.split('/'+pathKey+'/');if(pathItems.length===1){return urlAdjuster;}
if(pathItems.length!==2){throw'Either the url has more than one path key that was specified or the path key specified is not '+'present. url: '+url+'pathkey: '+pathKey;}
prefixPath=pathItems[0];pathValueEndIndex=pathItems[1].indexOf('/');if(pathValueEndIndex===-1){pathValueEndIndex=pathItems[1].indexOf('?');}
if(pathValueEndIndex===-1){path=prefixPath;}else{postfixPath=pathItems[1].substr(pathValueEndIndex+1);path=prefixPath+'/'+postfixPath;}
return urlAdjuster;},addQueryParam:function addQueryParam(key,value){this.removeQueryParam(key);queryPairs.push(key+'='+$window.encodeURIComponent(value));return urlAdjuster;},removeQueryParam:function removeQueryParam(key){queryPairs=queryPairs.filter(function(value){return value.indexOf(key)!==0;});return urlAdjuster;},compileQueryParams:function compileQueryParams(params){var compiledPairs=[];angular.forEach(queryPairs,function(val){var parts=val.split('=');if(parts.length===2){var queryVal=$window.decodeURIComponent(parts[1]);var compiled=$interpolate(queryVal)(params);compiledPairs.push(parts[0]+'='+$window.encodeURIComponent(compiled));}});queryPairs=compiledPairs;return urlAdjuster;},addFragment:function addFragment(val){fragment=val?'#'+val:'';return urlAdjuster;},build:function build(){query=queryPairs.length>0?'?'+queryPairs.join('&'):'';return path+query+fragment;}};return urlAdjuster;},getPathParameter:function getPathParameter(param,url){var path=url?this.getPath(url):$window.location.pathname;var pathParts=path.split('/');var idx=pathParts.indexOf(param);if(idx>-1&&pathParts.length-1>idx){return decodeURI(pathParts[idx+1]);}else{return null;}},validUrl:function validUrl(url){var urlExp=new RegExp('(http|https)://[\\w-]+(\\.[\\w-]+)+([\\w-.,@?^=%&:/~+#-]*[\\w@?^=%&;/~+#-])?');return url.match(urlExp)!==null;},getImageExtension:function getImageExtension(url){var pathIndex,extensionIndex,protocolIndex;if(url.indexOf('http://')!==-1){protocolIndex=url.indexOf('http://');url=url.substring(protocolIndex+8);}else if(url.indexOf('https://')!==-1){protocolIndex=url.indexOf('http://');url=url.substring(protocolIndex+9);}
pathIndex=url.lastIndexOf('/');extensionIndex=url.lastIndexOf('.');if(pathIndex===-1||pathIndex>extensionIndex){return'';}else{return url.substring(extensionIndex+1);}},getImageFileName:function getImageFileName(url){if(this.validUrl(url)&&this.getImageExtension(url)){var pathIndex=url.lastIndexOf('/');var extensionIndex=url.lastIndexOf('.');return url.substring(pathIndex+1,extensionIndex);}else{return'';}},redirect:function redirect(url){$window.location.href=url;},getCurrentUrl:function getCurrentUrl(){return $location.absUrl();}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.auto-focus',[]).constant('liCommonAutoFocusConfig',{events:{onFocus:'LITHIUM:auto-focus:focus'}}).directive('liCommonAutoFocus',['$timeout','liCommonAutoFocusConfig',function($timeout,liCommonAutoFocusConfig){return{restrict:'A',scope:{liAutoFocusOn:'='},link:function link($scope,$element){$timeout(function(){$element[0].focus();},0);$scope.$on(liCommonAutoFocusConfig.events.onFocus,function(){$timeout(function(){$element[0].focus();},0);});}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.text-ready',['li.services.plugins.localization-manager']).directive('liCommonTextReady',['$liLocalizationManager','$timeout',function($liLocalizationManager,$timeout){return{restrict:'A',link:function link($scope,$element,$attrs){var checkGroups=$scope.$eval($attrs.liCommonTextReady);checkGroups=angular.isArray(checkGroups)?checkGroups:[checkGroups];$element.addClass('lia-not-ready');$liLocalizationManager.onLoad(checkGroups,function check(){$element.toggleClass('lia-not-ready',!$liLocalizationManager.loaded(checkGroups));});$timeout(function(){angular.forEach(checkGroups,function(group){$liLocalizationManager.addPart(group);});});}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.community.navigation',['li.services.community.navigation-manager','li.services.community.context-manager','li.services.plugins.localization-manager','li.services.utils.url-manager','li.directives.common.auto-focus','li.directives.common.slide-menu','li.directives.common.text-ready']).directive('liCommunityNavigation',['$timeout','$liNavigationManager','$liContextManager','$liUrlManager','$location','liSlideMenuConfig',function($timeout,$liNavigationManager,$liContextManager,$liUrlManager,$location,liSlideMenuConfig){return{restrict:'AE',templateUrl:'community/navigation/navigation.tpl.html',link:function link($scope){function selectNode(nodeId){$scope.selectedNodeId=nodeId;$scope.$emit(liSlideMenuConfig.events.scrollTop);}
$scope.exitedLeft=[];$liNavigationManager.getStructure().then(function(response){$scope.community=response;$scope.selectedNodeId=$liNavigationManager.getRootLevelNodeId();});$scope.hasExited=function(nodeId){return $scope.exitedLeft.indexOf(nodeId)>=0;};$scope.showNode=function(nodeId){return nodeId===$scope.selectedNodeId||nodeId===$scope.visibleChildNodeId||$scope.hasExited(nodeId)||nodeId===$scope.enteringLeftNodeId;};$scope.navHistory=[];$scope.setCurrent=function(nodeId,back,$event){if(back){if($scope.navHistory.length){$scope.navHistory[$scope.navHistory.length-1].focus();$scope.navHistory.pop();}
$scope.enteringLeftNodeId=nodeId;$timeout(function(){$scope.enteringLeftNodeId='';$scope.exitedLeft.pop();selectNode(nodeId);},260);}else{$scope.navHistory.push($event.currentTarget);$scope.exitedLeft.push($scope.selectedNodeId);$scope.visibleChildNodeId=nodeId;$timeout(function(){selectNode($scope.visibleChildNodeId);$scope.visibleChildNodeId='';},260);}
if($event){$event.preventDefault();}};$scope.isEmpty=function(categoryId){var cat;var empty=false;angular.forEach($scope.community,function(node){if(node.id===categoryId){cat=node;}});if(cat.hasOwnProperty('boards')===false&&cat.hasOwnProperty('descendant_categories')===false){empty=true;}
return empty;};$scope.goToPage=function(url){if($location.path()!==$liUrlManager.getPath(url)){$scope.toggleMenu();$liUrlManager.forceRedirect(url);}};$scope.toggleMenu=function(){$scope.$emit(liSlideMenuConfig.events.toggleMenu);};}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.filters.formatting.unsafe',[]).filter('liUnsafe',['$sce',function($sce){return function(val){return $sce.trustAsHtml(val);};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.community.featured-content',['li.filters.formatting.unsafe','li.services.community.context-manager','li.directives.common.text-ready']).directive('liCommunityFeaturedContent',['$liContextManager',function($liContextManager){return{scope:{},restrict:'AE',templateUrl:'community/featured-content/featured-content.tpl.html',link:function link($scope){$scope.content=$liContextManager.currentUserSettings()['layout.module_welcome'];}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.non-bindable',[]).directive('liCommonNonBindable',['$document','$compile','$rootScope',function($document,$compile,$rootScope){return{restrict:'A',compile:function compile($element){var allowedElements=$element[0].querySelectorAll('[li-bindable]');angular.forEach(allowedElements,function(elm){$compile(angular.element(elm))($rootScope);});},terminal:true,priority:1000};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.common.slide-menu').run(['$templateCache',function($templateCache){$templateCache.put('common/slide-menu/slide-menu.tpl.html','<div class="lia-common-slide-menu {{liSlideMenuClass}}" ng-swipe-right="swipeToggleMenu(\'right\')"\n'+'     ng-swipe-left="swipeToggleMenu(\'left\')">\n'+'  <nav class="lia-slide-menu-content\n'+'              lia-slide-menu-content-{{orientation}}\n'+'              lia-slide-menu-content-{{direction}}"\n'+'       ng-class="addClass ? \'lia-slide-menu-content-open\' : \'\'"\n'+'       ng-if="showMenu"\n'+'       ng-transclude\n'+'       role="navigation">\n'+'  </nav>\n'+'  <div class="lia-slide-menu-overlay"\n'+'       ng-class="addClass ? \'lia-slide-menu-overlay-open\' : \'\'"\n'+'       ng-if="showMenu"\n'+'       ng-click="toggleMenu()">\n'+'  </div>\n'+'</div>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.community.navigation').run(['$templateCache',function($templateCache){$templateCache.put('community/navigation/navigation.tpl.html','<ul class="lia-community-nav-node lia-nav-item-container lia-nav-pos-left"\n'+'    li-common-text-ready="\'community\'"\n'+'    ng-repeat="node in community"\n'+'    ng-if="showNode(node.id)"\n'+'    ng-class="{\'lia-nav-pos-end\' : hasExited(node.id),\n'+'              \'lia-nav-pos-start\' : node.id === enteringLeftNodeId,\n'+'              \'lia-nav-selected\' : node.id === selectedNodeId && !hasExited(node.id)}"\n'+'    li-common-trap-focus>\n'+'\n'+'  <li class="lia-nav-header lia-nav-item">\n'+'    <button class="lia-nav-menu-trigger lia-slide-menu-trigger lia-nav-icon lia-nav-icon-left"\n'+'        title="{{\'li.community.navigation.close-menu\' | translate}}"\n'+'        aria-label="{{\'li.community.navigation.close-menu\' | translate}}"\n'+'        ng-click="toggleMenu()">\n'+'        {{\'li.community.navigation.close-menu\' | translate}}\n'+'    </button>\n'+'    <a class="lia-nav-header-title"\n'+'        title="{{node.title}}"\n'+'        aria-label="{{node.title}}"\n'+'        ng-click="goToPage(node.view_href)"\n'+'        href="{{node.view_href}}">\n'+'      <span class="lia-nav-item-text lia-nav-header-text">{{node.title}}</span>\n'+'    </a>\n'+'  </li>\n'+'\n'+'  <li ng-if="node.parent_category.id" class="lia-nav-back lia-nav-item">\n'+'    <a class="lia-nav-action"\n'+'        title="{{\'li.community.navigation.back\' | translate}}"\n'+'        aria-label="{{\'li.community.navigation.back\' | translate}}"\n'+'        ng-click="setCurrent(node.parent_category.id, true, $event);"\n'+'        href="javascript:void(0);"\n'+'        li-common-auto-focus>\n'+'      <span class="lia-nav-icon lia-nav-icon-left lia-fa lia-fa-angle-left" role="img" aria-label="{{\'li.community.navigation.back\' | translate}}"></span>\n'+'      <span class="lia-nav-item-text">{{\'li.community.navigation.back\' | translate}}</span>\n'+'    </a>\n'+'  </li>\n'+'\n'+'  <!-- category list -->\n'+'  <ul class="lia-nav-item-container lia-nav-subcategories">\n'+'    <li ng-repeat="child in node.descendant_categories.items"\n'+'        ng-class="[{\'lia-nav-empty-category\' : isEmpty(child.id)}, \'lia-type-\' + child.type, \'lia-nav-\' + child.id.toLowerCase(), \'lia-nav-item\']">\n'+'      <a class="lia-nav-action"\n'+'          title="{{child.title}}"\n'+'          href="{{child.view_href}}"\n'+'          ng-click="setCurrent(child.id, false, $event);" >\n'+'        <span class="lia-nav-icon lia-nav-icon-left lia-fa lia-fa-icon lia-fa-{{child.type}} lia-img-icon-{{child.type}}"\n'+'            role="img"\n'+'            aria-label="{{\'li.community.navigation.type.\' + child.type + \'.aria-label\' | translate}}"></span>\n'+'        <span class="lia-nav-item-text">{{child.title}}</span>\n'+'        <span class="lia-nav-icon lia-nav-icon-right lia-fa lia-fa-icon lia-fa-angle-right" role="img" aria-label="{{\'li.community.navigation.navigate-more-aria-label\' | translate}}"></span>\n'+'      </a>\n'+'    </li>\n'+'  </ul>\n'+'\n'+'  <!-- board list -->\n'+'  <ul class="lia-nav-item-container lia-nav-interaction-styles">\n'+'    <li ng-repeat="child in node.boards.items"\n'+'        ng-class="[\'lia-type-\' + child.conversation_style, \'lia-nav-\' + child.id.toLowerCase(), \'lia-nav-item\']">\n'+'      <a class="lia-nav-action"\n'+'          title="{{child.title}}"\n'+'          ng-click="goToPage(child.view_href)"\n'+'          href="{{child.view_href}}">\n'+'        <span class="lia-nav-icon lia-nav-icon-left lia-fa lia-fa-icon lia-fa-{{child.conversation_style}} lia-img-icon-{{child.conversation_style}}-board"\n'+'            role="img"\n'+'            aria-label="{{\'li.community.navigation.type.\' + child.conversation_style + \'.aria-label\' | translate}}"></span>\n'+'        <span class="lia-nav-item-text">{{child.title}}</span>\n'+'      </a>\n'+'    </li>\n'+'  </ul>\n'+'\n'+'</ul>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.community.featured-content').run(['$templateCache',function($templateCache){$templateCache.put('community/featured-content/featured-content.tpl.html','<div class="lia-community-featured-content" ng-if="content && content.trim().length > 0" ng-bind-html="content|liUnsafe" li-common-text-ready="\'community\'">\n'+'</div>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
