function wpurp_bigoven(){var e=document.createElement("script");document.URL;e.type="text/javascript",e.src="https://www.bigoven.com/assets/noexpire/js/getrecipe.js?"+(new Date).getTime()/1e5,document.getElementsByTagName("head")[0].appendChild(e)}Fraction=function(e,t){if(void 0!==e&&t)"number"==typeof e&&"number"==typeof t?(this.numerator=e,this.denominator=t):"string"==typeof e&&"string"==typeof t&&(this.numerator=parseInt(e),this.denominator=parseInt(t));else if(void 0===t)if(num=e,"number"==typeof num)this.numerator=num,this.denominator=1;else if("string"==typeof num){var n,i,r=num.split(" ");if(r[0]&&(n=r[0]),r[1]&&(i=r[1]),n%1==0&&i&&i.match("/"))return new Fraction(n).add(new Fraction(i));if(!n||i)return;if("string"==typeof n&&n.match("/")){var a=n.split("/");this.numerator=a[0],this.denominator=a[1]}else{if("string"==typeof n&&n.match("."))return new Fraction(parseFloat(n));this.numerator=parseInt(n),this.denominator=1}}this.normalize()},Fraction.prototype.clone=function(){return new Fraction(this.numerator,this.denominator)},Fraction.prototype.toString=function(){if("NaN"===this.denominator)return"NaN";var e=this.numerator/this.denominator>0?Math.floor(this.numerator/this.denominator):Math.ceil(this.numerator/this.denominator),t=this.numerator%this.denominator,n=this.denominator,i=[];return 0!=e&&i.push(e),0!=t&&i.push((0===e?t:Math.abs(t))+"/"+n),i.length>0?i.join(" "):0},Fraction.prototype.rescale=function(e){return this.numerator*=e,this.denominator*=e,this},Fraction.prototype.add=function(e){var t=this.clone();return e=e instanceof Fraction?e.clone():new Fraction(e),td=t.denominator,t.rescale(e.denominator),e.rescale(td),t.numerator+=e.numerator,t.normalize()},Fraction.prototype.subtract=function(e){var t=this.clone();return e=e instanceof Fraction?e.clone():new Fraction(e),td=t.denominator,t.rescale(e.denominator),e.rescale(td),t.numerator-=e.numerator,t.normalize()},Fraction.prototype.multiply=function(e){var t=this.clone();if(e instanceof Fraction)t.numerator*=e.numerator,t.denominator*=e.denominator;else{if("number"!=typeof e)return t.multiply(new Fraction(e));t.numerator*=e}return t.normalize()},Fraction.prototype.divide=function(e){var t=this.clone();if(e instanceof Fraction)t.numerator*=e.denominator,t.denominator*=e.numerator;else{if("number"!=typeof e)return t.divide(new Fraction(e));t.denominator*=e}return t.normalize()},Fraction.prototype.equals=function(e){e instanceof Fraction||(e=new Fraction(e));var t=this.clone().normalize(),e=e.clone().normalize();return t.numerator===e.numerator&&t.denominator===e.denominator},Fraction.prototype.normalize=function(){var e=function(e){return"number"==typeof e&&(e>0&&e%1>0&&e%1<1||e<0&&e%-1<0&&e%-1>-1)},t=function(e,t){if(t){var n=Math.pow(10,t);return Math.round(e*n)/n}return Math.round(e)};return function(){if(e(this.denominator)){var n=t(this.denominator,9),i=Math.pow(10,n.toString().split(".")[1].length);this.denominator=Math.round(this.denominator*i),this.numerator*=i}if(e(this.numerator)){var r=(n=t(this.numerator,9)).toString().split("."),i=0;void 0!==r[1]&&(i=Math.pow(10,r[1].length)),this.numerator=Math.round(this.numerator*i),this.denominator*=i}var a=Fraction.gcf(this.numerator,this.denominator);return this.numerator/=a,this.denominator/=a,(this.numerator<0&&this.denominator<0||this.numerator>0&&this.denominator<0)&&(this.numerator*=-1,this.denominator*=-1),this}}(),Fraction.gcf=function(e,t){var n=[],i=Fraction.primeFactors(e),r=Fraction.primeFactors(t);return i.forEach(function(e){var t=r.indexOf(e);t>=0&&(n.push(e),r.splice(t,1))}),0===n.length?1:function(){var e,t=n[0];for(e=1;e<n.length;e++)t*=n[e];return t}()},Fraction.primeFactors=function(e){for(var t=Math.abs(e),n=[],i=2;i*i<=t;)t%i==0?(n.push(i),t/=i):i++;return 1!=t&&n.push(t),n},Fraction.prototype.snap=function(e,t){t||(t=1e-4),e||(e=100);for(var n=this.numerator<0,i=this.numerator/this.denominator,r=Math.abs(i%1),a=n?Math.ceil(i):Math.floor(i),s=1;s<=e;++s)for(var o=0;o<=e;++o){var p=Math.abs(o/s);if(Math.abs(p-r)<t)return new Fraction(a*s+o*(n?-1:1),s)}return new Fraction(this.numerator,this.denominator)};var wpurp_adjustable_servings={};wpurp_adjustable_servings.updateShortcode=function(e,t){var n=parseFloat(e.data("servings-original"));e.find(".wpurp-adjustable-quantity").each(function(){var e=jQuery(this);if(void 0===e.data("original_quantity")){i=wpurp_adjustable_servings.parse_quantity(e.text());i/=n,e.data("original_quantity",e.text()).data("unit_quantity",i)}if(t==n)e.text(e.data("original_quantity"));else{var i=parseFloat(e.data("unit_quantity"))*t;isNaN(i)||e.text(wpurp_adjustable_servings.toFixed(i,!1))}})},wpurp_adjustable_servings.parse_quantity=function(e){var t={"¼":" 1/4","½":" 1/2","¾":" 3/4","⅐":" 1/7","⅑":" 1/9","⅒":" 1/10","⅓":" 1/3","⅔":" 2/3","⅕":" 1/5","⅖":" 2/5","⅗":" 3/5","⅘":" 4/5","⅙":" 1/6","⅚":" 5/6","⅛":" 1/8","⅜":" 3/8","⅝":" 5/8","⅞":" 7/8"},n=(e=(e=((e=e.replace(",","."))+"").replace(/(\u00BC|\u00BD|\u00BE|\u2150|\u2151|\u2152|\u2153|\u2154|\u2155|\u2156|\u2157|\u2158|\u2159|\u215A|\u215B|\u215C|\u215D|\u215E)/,function(e,n){return t[n]})).trim()).split(" "),i=!1;if(""!==e){i=0;for(var r=0;r<n.length;r++)if(""!==n[r].trim()){var a=n[r].split("/",2),s=parseFloat(a[0]);if(void 0!==a[1]){var o=parseFloat(a[1]);0!==o&&(s/=o)}i+=s}}return i},wpurp_adjustable_servings.updateAmounts=function(e,t,n){e.each(function(){var e=parseFloat(jQuery(this).data("normalized")),i=jQuery(this).data("fraction");if(t==n)jQuery(this).text(jQuery(this).data("original"));else if(isFinite(e)){var r=n*e/t,a=wpurp_adjustable_servings.toFixed(r,i);jQuery(this).text(a)}else jQuery(this).addClass("recipe-ingredient-nan")})},wpurp_adjustable_servings.toFixed=function(e,t){if(t){var n=Fraction(e.toString()).snap();if(n.denominator<100)return n}if(""==e||0==e)return"";for(var i=parseInt(wpurp_servings.precision),r=e.toFixed(i);0==parseFloat(r);)if(i++,r=e.toFixed(i),i>10)return"";if(i>0){var a=Array(i+1).join("0");r=r.replace(new RegExp("."+a+"$"),"")}return"undefined"!=typeof wpurp_servings&&(r=r.replace(".",wpurp_servings.decimal_character)),r},jQuery(document).ready(function(){jQuery(document).on("keyup change",".adjust-recipe-servings",function(e){var t=jQuery(this),n=t.parents(".wpurp-container").find(".wpurp-recipe-ingredient-quantity"),i=parseFloat(t.data("original")),r=t.val();(isNaN(r)||r<=0)&&(r=1),wpurp_adjustable_servings.updateAmounts(n,i,r),wpurp_adjustable_servings.updateShortcode(t.parents(".wpurp-container"),r),RecipePrintButton.update(t.parents(".wpurp-container"))}),jQuery(document).on("blur",".adjust-recipe-servings",function(e){var t=jQuery(this),n=t.val();(isNaN(n)||n<=0)&&(n=1),t.parents(".wpurp-container").find(".adjust-recipe-servings").each(function(){jQuery(this).val(n)}),RecipePrintButton.update(t.parents(".wpurp-container"))})}),function(e){function t(t,n,i){var r=i.relative?t.position().top:t.offset().top,a=i.relative?t.position().left:t.offset().left,s=i.position[0];r-=n.outerHeight()-i.offset[0],a+=t.outerWidth()+i.offset[1],/iPad/i.test(navigator.userAgent)&&(r-=e(window).scrollTop());var o=n.outerHeight()+t.outerHeight();"center"==s&&(r+=o/2),"bottom"==s&&(r+=o),s=i.position[1];var p=n.outerWidth()+t.outerWidth();return"center"==s&&(a-=p/2),"left"==s&&(a-=p),{top:r,left:a}}function n(n,r){var a,s,o=this,p=n.add(o),l=0,u=0,c=n.attr("title"),d=n.attr("data-tooltip"),h=i[r.effect],m=n.is(":input"),f=m&&n.is(":checkbox, :radio, select, :button, :submit"),g=n.attr("type"),w=r.events[g]||r.events[m?f?"widget":"input":"def"];if(!h)throw'Nonexistent effect "'+r.effect+'"';if(2!=(w=w.split(/,\s*/)).length)throw"Tooltip: bad events configuration for "+g;n.on(w[0],function(e){clearTimeout(l),r.predelay?u=setTimeout(function(){o.show(e)},r.predelay):o.show(e)}).on(w[1],function(e){clearTimeout(u),r.delay?l=setTimeout(function(){o.hide(e)},r.delay):o.hide(e)}),c&&r.cancelDefault&&(n.removeAttr("title"),n.data("title",c)),e.extend(o,{show:function(i){if(!a&&(d?a=e(d):r.tip?a=e(r.tip).eq(0):c?a=e(r.layout).addClass(r.tipClass).appendTo(document.body).hide().append(c):(a=n.next()).length||(a=n.parent().next()),!a.length))throw"Cannot find tooltip for "+n;if(o.isShown())return o;a.stop(!0,!0);var m=t(n,a,r);if(r.tip&&a.html(n.data("title")),i=e.Event(),i.type="onBeforeShow",p.trigger(i,[m]),i.isDefaultPrevented())return o;m=t(n,a,r),a.css({position:"absolute",top:m.top,left:m.left}),s=!0,h[0].call(o,function(){i.type="onShow",s="full",p.trigger(i)});var f=r.events.tooltip.split(/,\s*/);return a.data("__set")||(a.off(f[0]).on(f[0],function(){clearTimeout(l),clearTimeout(u)}),f[1]&&!n.is("input:not(:checkbox, :radio), textarea")&&a.off(f[1]).on(f[1],function(e){e.relatedTarget!=n[0]&&n.trigger(w[1].split(" ")[0])}),r.tip||a.data("__set",!0)),o},hide:function(t){return a&&o.isShown()?(t=e.Event(),t.type="onBeforeHide",p.trigger(t),t.isDefaultPrevented()?void 0:(s=!1,i[r.effect][1].call(o,function(){t.type="onHide",p.trigger(t)}),o)):o},isShown:function(e){return e?"full"==s:s},getConf:function(){return r},getTip:function(){return a},getTrigger:function(){return n}}),e.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(t,n){e.isFunction(r[n])&&e(o).on(n,r[n]),o[n]=function(t){return t&&e(o).on(n,t),o}})}e.tools=e.tools||{version:"v1.2.7"},e.tools.tooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:!1,position:["top","center"],offset:[0,0],relative:!1,cancelDefault:!0,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",tooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"tooltip"},addEffect:function(e,t,n){i[e]=[t,n]}};var i={toggle:[function(e){var t=this.getConf(),n=this.getTip(),i=t.opacity;i<1&&n.css({opacity:i}),n.show(),e.call()},function(e){this.getTip().hide(),e.call()}],fade:[function(t){var n=this.getConf();!e.browser.msie||n.fadeIE?this.getTip().fadeTo(n.fadeInSpeed,n.opacity,t):(this.getTip().show(),t())},function(t){var n=this.getConf();!e.browser.msie||n.fadeIE?this.getTip().fadeOut(n.fadeOutSpeed,t):(this.getTip().hide(),t())}]};e.fn.jt_tooltip=function(t){var i=this.data("tooltip");return i||("string"==typeof(t=e.extend(!0,{},e.tools.tooltip.conf,t)).position&&(t.position=t.position.split(/,?\s/)),this.each(function(){i=new n(e(this),t),e(this).data("tooltip",i)}),t.api?i:this)}}(jQuery);var RecipePrintButton=RecipePrintButton||{};RecipePrintButton.update=function(e){e.find(".wpurp-recipe-print-button").each(function(){var t=jQuery(this),n=t.data("original-link");n||(n=t.attr("href"),t.data("original-link",n));var i=wpurp_print.permalinks?"/":"=";n.slice(-1)!=i&&(n+=i);var r=e.find("select.adjust-recipe-unit:visible option:selected").text();r&&(n+=r.toLowerCase().replace(/ /g,"-").replace(/[-]+/g,"-").replace(/[^\w-]+/g,"")+"/");var a=e.find("input.adjust-recipe-servings:visible");0==a.length&&(a=e.find("input.advanced-adjust-recipe-servings:visible")),0!=a.length&&(n+=a.val()),t.attr("href",n)})},jQuery(document).ready(function(){jQuery(document).on("click",".wpurp-recipe-print-button, .wpurp-print-recipe-shortcode",function(e){var t=jQuery(this).data("recipe-id");if(t){e.preventDefault(),e.stopPropagation();var n=jQuery(this).parents(".wpurp-container");wpurp_print.servings_original=parseFloat(n.data("servings-original")),wpurp_print.old_system=parseInt(n.data("system-original")),wpurp_print.new_system=n.find("select.adjust-recipe-unit option:selected").val(),wpurp_print.rtl=jQuery("body").hasClass("rtl");var i=n.find("input.adjust-recipe-servings");0==i.length&&(i=n.find("input.advanced-adjust-recipe-servings")),0==i.length?wpurp_print.servings_new=wpurp_print.servings_original:wpurp_print.servings_new=parseFloat(i.val()),wpurp_print.template="";var r={action:"get_recipe_template",security:wpurp_print.nonce,recipe_id:t};jQuery.post(wpurp_print.ajaxurl,r,function(e){wpurp_print.template=e.output,wpurp_print.fonts=e.fonts},"json"),window.open(wpurp_print.coreUrl+"/templates/print.php","_blank")}})}),jQuery(document).ready(function(){jQuery(".recipe-tooltip").length&&(jQuery(".recipe-tooltip").jt_tooltip({offset:[-10,0],effect:"fade",delay:250,relative:!0}),jQuery(".wpupg-grid").find(".recipe-tooltip-content").click(function(e){e.preventDefault(),e.stopPropagation()})),jQuery(".wpupg-grid").on("arrangeComplete",function(){jQuery(".wpupg-grid").find(".recipe-tooltip-content").click(function(e){e.preventDefault(),e.stopPropagation()})})});var WPURP_Responsive={elementsSelector:".wpurp-container",maxRefreshRate:5,init:function(){var e=this;jQuery(function(){e.el={window:jQuery(window),responsive_elements:jQuery(e.elementsSelector)},e.events()})},checkBreakpointOfAllElements:function(){var e=WPURP_Responsive;jQuery(e.elementsSelector).each(function(t,n){e.checkBreakpointOfElement(jQuery(n))})},checkBreakpointOfElement:function(e){e.width()<wpurp_responsive_data.breakpoint?(e.find(".wpurp-responsive-mobile").css("display","block"),e.find(".wpurp-responsive-desktop").css("display","none")):(e.find(".wpurp-responsive-mobile").css("display","none"),e.find(".wpurp-responsive-desktop").css("display","block"))},events:function(){this.checkBreakpointOfAllElements(),this.el.window.bind("resize",this.debounce(this.checkBreakpointOfAllElements,this.maxRefreshRate))},debounce:function(e,t,n){var i,r=null;return function(){var a=this,s=arguments,o=n&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,n||(i=e.apply(a,s))},t),o&&(i=e.apply(a,s)),i}}};WPURP_Responsive.init();var SharrrePlatform=SharrrePlatform||function(){var e={};return{register:function(t,n){e[t]=n},get:function(t,n){return e[t]?new e[t](n):(console.error("Sharrre - No platform found for "+t),!1)}}}();SharrrePlatform.register("delicious",function(e){return defaultSettings={url:"",urlCount:!1,layout:"1",count:!0,popup:{width:550,height:550}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return"http://feeds.delicious.com/v2/json/urlinfo/data?url={url}&callback=?"},trackingAction:{site:"delicious",action:"add"},load:function(e){if("tall"==e.options.buttons.delicious.size)var t="width:50px;",n="height:35px;width:50px;font-size:15px;line-height:35px;",i="height:18px;line-height:18px;margin-top:3px;";else var t="width:93px;",n="float:right;padding:0 3px;height:20px;width:26px;line-height:20px;",i="float:left;height:20px;line-height:20px;";var r=e.shorterTotal(e.options.count.delicious);void 0===r&&(r=0),jQuery(e.element).find(".buttons").append('<div class="button delicious"><div style="'+t+'font:12px Arial,Helvetica,sans-serif;cursor:pointer;color:#666666;display:inline-block;float:none;height:20px;line-height:normal;margin:0;padding:0;text-indent:0;vertical-align:baseline;"><div style="'+n+'background-color:#fff;margin-bottom:5px;overflow:hidden;text-align:center;border:1px solid #ccc;border-radius:3px;">'+r+'</div><div style="'+i+'display:block;padding:0;text-align:center;text-decoration:none;width:50px;background-color:#7EACEE;border:1px solid #40679C;border-radius:3px;color:#fff;"><img src="https://www.delicious.com/static/img/delicious.small.gif" height="10" width="10" alt="Delicious" /> Add</div></div></div>'),jQuery(e.element).find(".delicious").on("click",function(){e.openPopup("delicious")})},tracking:function(){},popup:function(e){window.open("https://www.delicious.com/save?v=5&noui&jump=close&url="+encodeURIComponent(""!==this.settings.url?this.settings.url:e.url)+"&title="+e.text,"delicious","toolbar=no,width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("digg",function(e){return defaultSettings={url:"",urlCount:!1,type:"DiggCompact",count:!0,popup:{width:650,height:360}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return"http://services.digg.com/2.0/story.getInfo?links={url}&type=javascript&callback=?"},trackingAction:{site:"digg",action:"add"},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div class="button digg"><a class="DiggThisButton '+t.type+'" rel="nofollow external" href="http://digg.com/submit?url='+encodeURIComponent(""!==t.url?t.url:e.options.url)+'"></a></div>');var n=0;"undefined"==typeof __DBW&&0==n&&(n=1,function(){var e=document.createElement("SCRIPT"),t=document.getElementsByTagName("SCRIPT")[0];e.type="text/javascript",e.async=!0,e.src="http://widgets.digg.com/buttons.js",t.parentNode.insertBefore(e,t)}())},tracking:function(){},popup:function(e){window.open("http://digg.com/tools/diggthis/submit?url="+encodeURIComponent(""!==e.buttons.digg.url?e.buttons.digg.url:e.url)+"&title="+e.text+"&related=true&style=true","","toolbar=0, status=0, width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("facebook",function(e){return defaultSettings={url:"",urlCount:!1,action:"like",layout:"button_count",count:!0,width:"",send:"false",faces:"false",colorscheme:"",font:"",lang:"en_US",share:"",appId:"",popup:{width:900,height:500}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return"https://graph.facebook.com/fql?q=SELECT%20url,%20normalized_url,%20share_count,%20like_count,%20comment_count,%20total_count,commentsbox_count,%20comments_fbid,%20click_count%20FROM%20link_stat%20WHERE%20url=%27{url}%27&callback=?"},trackingAction:{site:"facebook",action:"like"},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div class="button facebook"><div id="fb-root"></div><div class="fb-like" data-href="'+(""!==t.url?t.url:e.options.url)+'" data-send="'+t.send+'" data-layout="'+t.layout+'" data-width="'+t.width+'" data-show-faces="'+t.faces+'" data-action="'+t.action+'" data-colorscheme="'+t.colorscheme+'" data-font="'+t.font+'" data-via="'+t.via+'" data-share="'+t.share+'"></div></div>');var n=0;"undefined"==typeof FB&&0==n?(n=1,function(e,n,i){var r,a=e.getElementsByTagName(n)[0];e.getElementById(i)||(r=e.createElement(n),r.id=i,r.src="https://connect.facebook.net/"+t.lang+"/all.js#xfbml=1",t.appId&&(r.src+="&appId="+t.appId),a.parentNode.insertBefore(r,a))}(document,"script","facebook-jssdk")):FB.XFBML.parse()},tracking:function(){fb=window.setInterval(function(){"undefined"!=typeof FB&&(FB.Event.subscribe("edge.create",function(e){_gaq.push(["_trackSocial","facebook","like",e])}),FB.Event.subscribe("edge.remove",function(e){_gaq.push(["_trackSocial","facebook","unlike",e])}),FB.Event.subscribe("message.send",function(e){_gaq.push(["_trackSocial","facebook","send",e])}),clearInterval(fb))},1e3)},popup:function(e){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(""!==this.settings.url?this.settings.url:e.url)+"&t="+e.text,"","toolbar=0, status=0, width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("googlePlus",function(e){return defaultSettings={url:"",urlCount:!1,size:"medium",lang:"en-US",annotation:"",count:!0,popup:{width:900,height:500}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return e+"?url={url}&type=googlePlus"},trackingAction:{site:"Google",action:"+1"},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div class="button googleplus"><div class="g-plusone" data-size="'+t.size+'" data-href="'+(""!==t.url?t.url:e.options.url)+'" data-annotation="'+t.annotation+'"></div></div>'),window.___gcfg={lang:t.lang};var n=0;"undefined"!=typeof gapi&&void 0!==gapi.plusone||0!=n?gapi.plusone.go():(n=1,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/plusone.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}())},tracking:function(){},popup:function(e){window.open("https://plus.google.com/share?hl="+e.buttons.googlePlus.lang+"&url="+encodeURIComponent(""!==e.buttons.googlePlus.url?e.buttons.googlePlus.url:e.url),"","toolbar=0, status=0, width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("linkedin",function(e){return defaultSettings={url:"",urlCount:!1,counter:"",count:!0,popup:{width:550,height:550}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return"https://www.linkedin.com/countserv/count/share?format=jsonp&url={url}&callback=?"},trackingAction:{site:"linkedin",action:"share"},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div class="button linkedin"><script type="IN/share" data-url="'+(""!==t.url?t.url:e.options.url)+'" data-counter="'+t.counter+'"><\/script></div>');var n=0;void 0===window.IN&&0==n?(n=1,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://platform.linkedin.com/in.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()):void 0!==window.IN&&window.IN.parse&&IN.parse(document)},tracking:function(){},popup:function(e){window.open("https://www.linkedin.com/cws/share?url="+encodeURIComponent(""!==e.buttons.linkedin.url?e.buttons.linkedin.url:e.url)+"&token=&isFramed=true","linkedin","toolbar=no, width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("pinterest",function(e){return defaultSettings={url:"",media:"",description:"",layout:"horizontal",popup:{width:700,height:300}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return"https://api.pinterest.com/v1/urls/count.json?url={url}&callback=?"},trackingAction:{site:"pinterest",action:"pin"},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div class="button pinterest"><a href="https://www.pinterest.com/pin/create/button/?url='+(""!==t.url?t.url:e.options.url)+"&media="+t.media+"&description="+t.description+'" data-pin-do="buttonBookmark" count-layout="'+t.layout+'">Pin It</a></div>'),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://assets.pinterest.com/js/pinit.js",e.setAttribute("data-pin-build","parsePinBtns");var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),window.parsePinBtns&&window.parsePinBtns(),jQuery(e.element).find(".pinterest").on("click",function(){e.openPopup("pinterest")})},tracking:function(){},popup:function(e){window.open("https://pinterest.com/pin/create/button/?url="+encodeURIComponent(""!==e.buttons.pinterest.url?e.buttons.pinterest.url:e.url)+"&media="+encodeURIComponent(e.buttons.pinterest.media)+"&description="+e.buttons.pinterest.description,"pinterest","toolbar=no,width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("reddit",function(e){return defaultSettings={url:"",urlCount:!1,count:!1,popup:{width:900,height:550}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,trackingAction:{site:"reddit",action:"share"},url:function(e){return""},load:function(e){var t=this.settings,n=this;jQuery(e.element).find(".buttons").append('<div class="button reddit"><a href="https://www.reddit.com/submit?url='+(""!==t.url?t.url:e.options.url)+'"><img src="https://www.redditstatic.com/spreddit7.gif" alt="submit to reddit" border="0" /></a></div>'),jQuery(e.element).find(".reddit").on("click",function(){n.popup(e.options)})},tracking:function(){},popup:function(e){window.open("https://www.reddit.com/submit?url="+encodeURIComponent(""!==this.settings.url?this.setting.url:e.url),"","toolbar=0, status=0,width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("stumbleupon",function(e){return defaultSettings={url:"",urlCount:!1,size:"medium",count:!0,popup:{width:550,height:550}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return e+"?url={url}&type=stumbleupon"},trackingAction:{site:"stumbleupon",action:"add"},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div class="button stumbleupon"><su:badge layout="'+t.layout+'" location="'+(""!==t.url?t.url:e.options.url)+'"></su:badge></div>');var n=0;"undefined"==typeof STMBLPN&&0==n?(n=1,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://platform.stumbleupon.com/1/widgets.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),s=window.setTimeout(function(){"undefined"!=typeof STMBLPN&&(STMBLPN.processWidgets(),clearInterval(s))},500)):(STMBLPN.wasProcessLoaded=!1,STMBLPN.processWidgets())},tracking:function(){},popup:function(e){window.open("https://www.stumbleupon.com/badge/?url="+encodeURIComponent(""!==e.buttons.stumbleupon.url?e.buttons.stumbleupon.url:e.url),"stumbleupon","toolbar=no, width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("tumblr",function(e){return defaultSettings={url:"",urlCount:!1,description:"",name:"",count:!1,title:"Share on Tumblr",color:"blue",notes:"none",popup:{width:900,height:500}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,url:function(e){return""},trackingAction:{site:"tumblr",action:"share"},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div title="'+t.title+'" class="button tumblr"><a class="tumblr-share-button" data-color="'+t.color+'" data-notes="'+t.notes+'" data-href="'+(""!==t.url?t.url:e.options.url)+'"  href="https://www.tumblr.com/share">'+t.title+"</a></div>");var n=0;"undefined"==typeof Tumblr&&0==n?(n=1,function(){var e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.src="https://secure.assets.tumblr.com/share-button.js",t.parentNode.insertBefore(e,t)}()):Tumblr.activate_share_on_tumblr_buttons()},tracking:function(){},popup:function(e){window.open("https://www.tumblr.com/share/link?canonicalUrl="+encodeURIComponent(""!==this.settings.url?this.settings.url:e.url)+"&name="+encodeURIComponent(this.settings.name)+"&description="+encodeURIComponent(this.settings.description),"","toolbar=0, status=0, width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("twitter",function(e){return defaultSettings={url:"",urlCount:!1,count:!1,hashtags:"",via:"",related:"",lang:"en",popup:{width:650,height:360}},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,trackingAction:{site:"twitter",action:"tweet"},url:function(e){return"https://opensharecount.com/count.json?url={url}"},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div class="button twitter"><a href="https://twitter.com/share" class="twitter-share-button" data-url="'+(""!==t.url?t.url:e.options.url)+'" data-count="'+t.count+'" data-text="'+e.options.text+'" data-via="'+t.via+'" data-hashtags="'+t.hashtags+'" data-related="'+t.related+'" data-lang="'+t.lang+'">Tweet</a></div>');var n=0;"undefined"==typeof twttr&&0==n?(n=1,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://platform.twitter.com/widgets.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()):jQuery.ajax({url:"https://platform.twitter.com/widgets.js",dataType:"script",cache:!0})},tracking:function(){tw=window.setInterval(function(){"undefined"!=typeof twttr&&(twttr.events.bind("tweet",function(e){e&&_gaq.push(["_trackSocial","twitter","tweet"])}),clearInterval(tw))},1e3)},popup:function(e){window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.text)+"&url="+encodeURIComponent(""!==this.settings.url?this.setting.url:e.url)+(""!==this.settings.via?"&via="+this.settings.via:""),"","toolbar=0, status=0,width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),SharrrePlatform.register("twitterFollow",function(e){return defaultSettings={url:"",urlCount:!1,count:!0,display:"horizontal",lang:"en",popup:{width:650,height:360},user:"",size:"default",showCount:"false"},defaultSettings=jQuery.extend(!0,{},defaultSettings,e),{settings:defaultSettings,trackingAction:{site:"twitter",action:"follow"},url:function(e){return""},load:function(e){var t=this.settings;jQuery(e.element).find(".buttons").append('<div class="button twitterFollow"><a href="https://twitter.com/'+t.user+'" class="twitter-follow-button"" data-size="'+t.size+'" data-show-count="'+t.showCount+'" data-lang="'+t.lang+'">Follow @'+t.user+"</a></div>");var n=0;"undefined"==typeof twttr&&0==n?(n=1,function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://platform.twitter.com/widgets.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()):jQuery.ajax({url:"https://platform.twitter.com/widgets.js",dataType:"script",cache:!0})},tracking:function(){},popup:function(e){window.open("https://twitter.com/intent/follow?screen_name="+encodeURIComponent(this.settings.user),"","toolbar=0, status=0, ,width="+this.settings.popup.width+", height="+this.settings.popup.height)}}}),function(t,n,i,r){function a(e,n){this.element=e,this.options=t.extend(!0,{},o,n),this.options.share=n.share,this._defaults=o,this._name=s,this.platforms={},this.init()}var s="sharrre",o={className:"sharrre",share:{},shareTotal:0,template:"",title:"",url:i.location.href,text:i.title,urlCurl:"sharrre.php",count:{},total:0,shorterTotal:!0,enableHover:!0,enableCounter:!0,enableTracking:!1,defaultUrl:"javascript:void(0);",popup:{width:900,height:500},hover:function(){},hide:function(){},click:function(){},render:function(){}};a.prototype.init=function(){var e=this;t.each(e.options.share,function(t,n){!0===n&&(e.platforms[t]=SharrrePlatform.get(t,e.options.buttons[t]))}),t(this.element).addClass(this.options.className),void 0!==t(this.element).data("title")&&(this.options.title=t(this.element).attr("data-title")),void 0!==t(this.element).data("url")&&(this.options.url=t(this.element).data("url")),void 0!==t(this.element).data("text")&&(this.options.text=t(this.element).data("text")),t.each(this.options.share,function(t,n){!0===n&&e.options.shareTotal++}),!0===e.options.enableCounter?t.each(this.options.share,function(t,n){if(!0===n)try{e.getSocialJson(t)}catch(e){}}):""!==e.options.template&&(e.renderer(),e.options.count[name]=0,e.rendererPerso()),""!==e.options.template?this.options.render(this,this.options):this.loadButtons(),t(this.element).on("mouseenter",function(){0===t(this).find(".buttons").length&&!0===e.options.enableHover&&e.loadButtons(),e.options.hover(e,e.options)}).on("mouseleave",function(){e.options.hide(e,e.options)}),t(this.element).click(function(t){return t.preventDefault(),e.options.click(e,e.options),!1})},a.prototype.loadButtons=function(){var e=this;t(this.element).append('<div class="buttons"></div>'),t.each(e.options.share,function(t,n){1==n&&(e.platforms[t].load(e),!0===e.options.enableTracking&&e.platforms[t].tracking())})},a.prototype.getSocialJson=function(e){var n=this,i=0,r=n.platforms[e].settings,a=n.platforms[e].url(this.options.urlCurl),s=encodeURIComponent(this.options.url);r.url.length&&(a=r.url),!0===r.urlCount&&""!==a&&(s=a),!1===r.count&&(a=""),url=a.replace("{url}",s),""!=url?t.getJSON(url,function(t){if(void 0!==t.count){var r=t.count+"";r=r.replace("Â ",""),i+=parseInt(r,10)}else t.data&&t.data.length>0&&void 0!==t.data[0].total_count?i+=parseInt(t.data[0].total_count,10):void 0!==t[0]?i+=parseInt(t[0].total_posts,10):t[0];n.options.count[e]=i,n.options.total+=i,n.renderer(),n.rendererPerso()}).error(function(){n.options.count[e]=0,n.rendererPerso()}):(n.renderer(),n.options.count[e]=0,n.rendererPerso())},a.prototype.rendererPerso=function(){var t=0;for(e in this.options.count)t++;t===this.options.shareTotal&&this.options.render(this,this.options)},a.prototype.renderer=function(){var e=this.options.total,n=this.options.template;!0===this.options.shorterTotal&&(e=this.shorterTotal(e)),""!==n?(n=n.replace("{total}",e),t(this.element).html(n)):t(this.element).html('<div class="box"><a class="count" href="'+this.options.defaultUrl+'">'+e+"</a>"+(""!==this.options.title?'<a class="share" href="'+this.options.defaultUrl+'">'+this.options.title+"</a>":"")+"</div>")},a.prototype.shorterTotal=function(e){return e>=1e6?e=(e/1e6).toFixed(2)+"M":e>=1e3&&(e=(e/1e3).toFixed(1)+"k"),e},a.prototype.openPopup=function(e){this.platforms[e].popup(this.options),!0===this.options.enableTracking&&(infos=this.platforms[e].trackingAction,_gaq.push(["_trackSocial",infos.site,infos.action]))},a.prototype.simulateClick=function(){var e=t(this.element).html();t(this.element).html(e.replace(this.options.total,this.options.total+1))},a.prototype.update=function(e,t){""!==e&&(this.options.url=e),""!==t&&(this.options.text=t)},t.fn[s]=function(e){var n=arguments;return void 0===e||"object"==typeof e?this.each(function(){t(this).data("plugin_"+s)||t(this).data("plugin_"+s,new a(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var i=t(this).data("plugin_"+s);i instanceof a&&"function"==typeof i[e]&&i[e].apply(i,Array.prototype.slice.call(n,1))}):void 0}}(window.jQuery||window.Zepto,window,document),jQuery(document).ready(function(){jQuery(".wpurp-twitter").each(function(e,t){var n=jQuery(t);n.sharrre({share:{twitter:!0},buttons:{twitter:{count:jQuery(n).data("layout"),lang:wpurp_sharing_buttons.twitter_lang}},enableHover:!1,enableCounter:!1,enableTracking:!1})}),jQuery(".wpurp-facebook").each(function(e,t){var n=jQuery(t);n.sharrre({share:{facebook:!0},buttons:{facebook:{action:"like",layout:jQuery(n).data("layout"),share:jQuery(n).data("share"),lang:wpurp_sharing_buttons.facebook_lang}},enableHover:!1,enableCounter:!1,enableTracking:!1})}),jQuery(".wpurp-google").each(function(e,t){var n=jQuery(t);n.sharrre({share:{googlePlus:!0},buttons:{googlePlus:{size:jQuery(n).data("layout"),annotation:jQuery(n).data("annotation"),lang:wpurp_sharing_buttons.google_lang}},enableHover:!1,enableCounter:!1,enableTracking:!1})}),jQuery(".wpurp-pinterest").each(function(e,t){var n=jQuery(t);n.sharrre({share:{pinterest:!0},buttons:{pinterest:{url:jQuery(n).data("url"),media:jQuery(n).data("media"),description:jQuery(n).data("description"),layout:jQuery(n).data("layout")}},enableHover:!1,enableCounter:!1,enableTracking:!1,click:function(e,t){e.openPopup("pinterest")}})}),jQuery(".wpurp-stumbleupon").each(function(e,t){var n=jQuery(t);n.sharrre({share:{stumbleupon:!0},buttons:{stumbleupon:{layout:jQuery(n).data("layout")}},enableHover:!1,enableCounter:!1,enableTracking:!1})}),jQuery(".wpurp-linkedin").each(function(e,t){var n=jQuery(t);n.sharrre({share:{linkedin:!0},buttons:{linkedin:{counter:jQuery(n).data("layout")}},enableHover:!1,enableCounter:!1,enableTracking:!1})})}),jQuery(document).ready(function(){jQuery(document).on("click",".wpurp-recipe-favorite",function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this),n=t.find("i"),i=t.data("recipe-id"),r={action:"favorite_recipe",security:wpurp_favorite_recipe.nonce,recipe_id:i};jQuery.post(wpurp_favorite_recipe.ajaxurl,r,function(e){var i=n.data("icon"),r=n.data("icon-alt");if(n.hasClass(i)?(n.removeClass(i),n.addClass(r)):(n.removeClass(r),n.addClass(i)),t.next().hasClass("recipe-tooltip-content")){var a=t.next().find(".tooltip-shown").first(),s=t.next().find(".tooltip-alt").first(),o=a.html(),p=s.html();a.html(p),s.html(o)}})})}),function(e){void 0===e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&!1!==t.call(n[0],i,n););return this}})}(jQuery),function(e,t){"use strict";function n(e){var t,n,i,r;if(!e||e.length<1)return e;for(t="",n=0,i=e.length;i>n;n++)r=e.charAt(n),t+=F[r]||r;return t}function i(e,t){for(var n=0,i=t.length;i>n;n+=1)if(a(e,t[n]))return n;return-1}function r(){var t=e(D);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function a(e,n){return e===n||e!==t&&n!==t&&(null!==e&&null!==n&&(e.constructor===String?e+""==n+"":n.constructor===String&&n+""==e+""))}function s(t,n){var i,r,a;if(null===t||t.length<1)return[];for(r=0,a=(i=t.split(n)).length;a>r;r+=1)i[r]=e.trim(i[r]);return i}function o(e){return e.outerWidth(!1)-e.width()}function p(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var r=e.data(n,i);r!==t&&n.val()!==r&&(e.removeData(n,i),n.trigger("keyup-change"))})}function l(n){n.on("mousemove",function(n){var i=E;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function u(e,n,i){i=i||t;var r;return function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,t)},e)}}function c(e){var t,n=!1;return function(){return!1===n&&(t=e(),n=!0),t}}function d(e,t){var n=u(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&n(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&((t=n.createTextRange()).collapse(!1),t.select()))},0)}function m(t){var n=0,i=0;if("selectionStart"in(t=e(t)[0]))n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),n=r.text.length-i}return{offset:n,length:i}}function f(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function w(t){if(!P){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);(P=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"})).attr("class","select2wpurp-sizer"),e("body").append(P)}return P.text(t.val()),P.width()}function v(t,n,i){var r,a,s=[];(r=t.attr("class"))&&(r=""+r,e(r.split(" ")).each2(function(){0===this.indexOf("select2wpurp-")&&s.push(this)})),(r=n.attr("class"))&&(r=""+r,e(r.split(" ")).each2(function(){0!==this.indexOf("select2wpurp-")&&(a=i(this))&&s.push(a)})),t.attr("class",s.join(" "))}function y(e,t,i,r){var a=n(e.toUpperCase()).indexOf(n(t.toUpperCase())),s=t.length;return 0>a?void i.push(r(e)):(i.push(r(e.substring(0,a))),i.push("<span class='select2wpurp-match'>"),i.push(r(e.substring(a,a+s))),i.push("</span>"),void i.push(r(e.substring(a+s,e.length))))}function b(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(n){var i,r=null,a=n.quietMillis||100,s=n.url,o=this;return function(p){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,a=s,l=n.transport||e.fn.select2wpurp.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},c=e.extend({},e.fn.select2wpurp.ajaxDefaults.params,u);i=i?i.call(o,p.term,p.page,p.context):null,a="function"==typeof a?a.call(o,p.term,p.page,p.context):a,r&&r.abort(),n.params&&(e.isFunction(n.params)?e.extend(c,n.params.call(o)):e.extend(c,n.params)),e.extend(c,{url:a,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,p.page);p.callback(t)}}),r=l.call(o,c)},a)}}function j(t){var n,i,r=t,a=function(e){return""+e.text};e.isArray(r)&&(i=r,r={results:i}),!1===e.isFunction(r)&&(i=r,r=function(){return i});var s=r();return s.text&&(a=s.text,e.isFunction(a)||(n=s.text,a=function(e){return e[n]})),function(t){var n,i=t.term,s={results:[]};return""===i?void t.callback(r()):(n=function(r,s){var o,p;if((r=r[0]).children){o={};for(p in r)r.hasOwnProperty(p)&&(o[p]=r[p]);o.children=[],e(r.children).each2(function(e,t){n(t,o.children)}),(o.children.length||t.matcher(i,a(o),r))&&s.push(o)}else t.matcher(i,a(r),r)&&s.push(r)},e(r().results).each2(function(e,t){n(t,s.results)}),void t.callback(s))}}function C(n){var i=e.isFunction(n);return function(r){var a=r.term,s={results:[]};e(i?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(""===a||r.matcher(a,n))&&s.results.push(e?this:{id:this,text:this})}),r.callback(s)}}function Q(t,n){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(n+" must be a function or a falsy value")}function k(t){return e.isFunction(t)?t():t}function A(t){var n=0;return e.each(t,function(e,t){t.children?n+=A(t.children):n++}),n}function R(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2wpurp===t){var S,x,M,U,P,T,I,E={x:0,y:0},N={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case N.LEFT:case N.RIGHT:case N.UP:case N.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case N.SHIFT:case N.CTRL:case N.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&123>=e}},D="<div class='select2wpurp-measure-scrollbar'></div>",F={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};T=e(document),U=function(){var e=1;return function(){return e++}}(),T.on("mousemove",function(e){E.x=e.pageX,E.y=e.pageY}),S=R(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,a,s=".select2wpurp-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2wpurp")!==t&&null!==n.element.data("select2wpurp")&&n.element.data("select2wpurp").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+U()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return n.element.closest("body")}),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(k(n.containerCss)),this.container.addClass(k(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2wpurp",this).attr("tabindex","-1").before(this.container).on("click.select2wpurp",f),this.container.data("select2wpurp",this),this.dropdown=this.container.find(".select2wpurp-drop"),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(n.dropdownCssClass)),this.dropdown.data("select2wpurp",this),this.dropdown.on("click",f),this.results=i=this.container.find(s),this.search=a=this.container.find("input.select2wpurp-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",f),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",s,this.bind(this.highlightUnderEvent)),d(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2wpurp-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2wpurp-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,r){var a=i.scrollTop();r>0&&0>=a-r?(i.scrollTop(0),f(e)):0>r&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),f(e))}),p(a),a.on("keyup-change input paste",this.bind(this.updateResults)),a.on("focus",function(){a.addClass("select2wpurp-focused")}),a.on("blur",function(){a.removeClass("select2wpurp-focused")}),this.dropdown.on("mouseup",s,this.bind(function(t){e(t.target).closest(".select2wpurp-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var o=n.element.prop("disabled");o===t&&(o=!1),this.enable(!o);var u=n.element.prop("readonly");u===t&&(u=!1),this.readonly(u),I=I||r(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,n=e.data("select2wpurp");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),n!==t&&(n.container.remove(),n.dropdown.remove(),e.removeClass("select2wpurp-offscreen").removeData("select2wpurp").off(".select2wpurp").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:a(e.attr("locked"),"locked")||a(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,r,o,p,l=this;if("select"===(i=n.element).get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2wpurp when attached to a <select> element.")}),"function"!=typeof(n=e.extend({},{populateResults:function(i,r,a){var s,o=this.opts.id;(s=function(i,r,p){var u,c,d,h,m,f,g,w,v,y;for(u=0,c=(i=n.sortResults(i,r,a)).length;c>u;u+=1)d=i[u],m=!0===d.disabled,h=!m&&o(d)!==t,f=d.children&&d.children.length>0,(g=e("<li></li>")).addClass("select2wpurp-results-dept-"+p),g.addClass("select2wpurp-result"),g.addClass(h?"select2wpurp-result-selectable":"select2wpurp-result-unselectable"),m&&g.addClass("select2wpurp-disabled"),f&&g.addClass("select2wpurp-result-with-children"),g.addClass(l.opts.formatResultCssClass(d)),(w=e(document.createElement("div"))).addClass("select2wpurp-result-label"),(y=n.formatResult(d,w,a,l.opts.escapeMarkup))!==t&&w.html(y),g.append(w),f&&((v=e("<ul></ul>")).addClass("select2wpurp-result-sub"),s(d.children,v,p+1),g.append(v)),g.data("select2wpurp-data",d),r.append(g)})(r,i,0)}},e.fn.select2wpurp.defaults,n)).id&&(o=n.id,n.id=function(e){return e[o]}),e.isArray(n.element.data("select2wpurpTags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2wpurp-tags' and in options of Select2wpurp "+n.element.attr("id");n.tags=n.element.data("select2wpurpTags")}if(r?(n.query=this.bind(function(e){var n,r,a,s={results:[],more:!1},o=e.term;a=function(t,n){var i;t.is("option")?e.matcher(o,t.text(),t)&&n.push(l.optionToData(t)):t.is("optgroup")&&(i=l.optionToData(t),t.children().each2(function(e,t){a(t,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(r=this.getPlaceholderOption())&&(n=n.not(r)),n.each2(function(e,t){a(t,s.results)}),e.callback(s)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?((p=n.element.data("ajax-url"))&&p.length>0&&(n.ajax.url=p),n.query=_.call(n.element,n.ajax)):"data"in n?n.query=j(n.data):"tags"in n&&(n.query=C(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var r=[];e(s(t.val(),n.separator)).each(function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return a(this.id,t.id)?(t=this,!1):void 0}),r.push(t)}),i(r)}))),"function"!=typeof n.query)throw"query function not defined for Select2wpurp "+n.element.attr("id");return n},monitorSource:function(){var e,n,i=this.opts.element;i.on("change.select2wpurp",this.bind(function(){!0!==this.opts.element.data("select2wpurp-change-triggered")&&this.initSelection()})),e=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(k(this.opts.containerCssClass)),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(k(this.opts.dropdownCssClass))}),i.on("propertychange.select2wpurp",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),(n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2wpurp-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2wpurp-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2wpurp-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2wpurp-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2wpurp-dropdown-open")},positionDropdown:function(){var t,n,i,r,a,s=this.dropdown,o=this.container.offset(),p=this.container.outerHeight(!1),l=this.container.outerWidth(!1),u=s.outerHeight(!1),c=e(window),d=c.width(),h=c.height(),m=c.scrollLeft()+d,f=c.scrollTop()+h,g=o.top+p,w=o.left,v=f>=g+u,y=o.top-u>=this.body().scrollTop(),b=s.outerWidth(!1),_=m>=w+b;s.hasClass("select2wpurp-drop-above")?(n=!0,!y&&v&&(i=!0,n=!1)):(n=!1,!v&&y&&(i=!0,n=!0)),i&&(s.hide(),o=this.container.offset(),p=this.container.outerHeight(!1),l=this.container.outerWidth(!1),u=s.outerHeight(!1),m=c.scrollLeft()+d,f=c.scrollTop()+h,g=o.top+p,w=o.left,b=s.outerWidth(!1),_=m>=w+b,s.show()),this.opts.dropdownAutoWidth?(a=e(".select2wpurp-results",s)[0],s.addClass("select2wpurp-drop-auto-width"),s.css("width",""),(b=s.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:I.width))>l?l=b:b=l,_=m>=w+b):this.container.removeClass("select2wpurp-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),g-=t.top,w-=t.left),_||(w=o.left+l-b),r={left:w,width:l},n?(r.bottom=h-o.top,r.top="auto",this.container.addClass("select2wpurp-drop-above"),s.addClass("select2wpurp-drop-above")):(r.top=g,r.bottom="auto",this.container.removeClass("select2wpurp-drop-above"),s.removeClass("select2wpurp-drop-above")),r=e.extend(r,k(this.opts.dropdownCss)),s.css(r)},shouldOpen:function(){var t;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2wpurp-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2wpurp-drop-above"),this.dropdown.removeClass("select2wpurp-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),!0)},opening:function(){var t,n=this.containerId,i="scroll."+n,r="resize."+n,a="orientationchange."+n;this.container.addClass("select2wpurp-dropdown-open").addClass("select2wpurp-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),0==(t=e("#select2wpurp-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2wpurp-drop-mask").attr("class","select2wpurp-drop-mask"),t.hide(),t.appendTo(this.body()),t.on("mousedown touchstart click",function(t){var n,i=e("#select2wpurp-drop");i.length>0&&((n=i.data("select2wpurp")).opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2wpurp-drop").removeAttr("id"),this.dropdown.attr("id","select2wpurp-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2wpurp-drop-active");var s=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+i+" "+a,function(){s.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,n="scroll."+t,i="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(r)}),this.clearDropdownAlignmentPreference(),e("#select2wpurp-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2wpurp-dropdown-open").removeClass("select2wpurp-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2wpurp-active"),this.opts.element.trigger(e.Event("select2wpurp-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return k(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,n,i,r,a,s,o,p=this.results;if(!(0>(n=this.highlight()))){if(0==n)return void p.scrollTop(0);t=this.findHighlightableChoices().find(".select2wpurp-result-label"),r=(i=e(t[n])).offset().top+i.outerHeight(!0),n===t.length-1&&(o=p.find("li.select2wpurp-more-results")).length>0&&(r=o.offset().top+o.outerHeight(!0)),r>(a=p.offset().top+p.outerHeight(!0))&&p.scrollTop(p.scrollTop()+(r-a)),0>(s=i.offset().top-p.offset().top)&&"none"!=i.css("display")&&p.scrollTop(p.scrollTop()+s)}},findHighlightableChoices:function(){return this.results.find(".select2wpurp-result-selectable:not(.select2wpurp-disabled, .select2wpurp-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){var r=e(n[i+=t]);if(r.hasClass("select2wpurp-result-selectable")&&!r.hasClass("select2wpurp-disabled")&&!r.hasClass("select2wpurp-selected")){this.highlight(i);break}}},highlight:function(t){var n,r,a=this.findHighlightableChoices();return 0===arguments.length?i(a.filter(".select2wpurp-highlighted")[0],a.get()):(t>=a.length&&(t=a.length-1),0>t&&(t=0),this.removeHighlight(),(n=e(a[t])).addClass("select2wpurp-highlighted"),this.ensureHighlightVisible(),void((r=n.data("select2wpurp-data"))&&this.opts.element.trigger({type:"select2wpurp-highlight",val:this.id(r),choice:r})))},removeHighlight:function(){this.results.find(".select2wpurp-highlighted").removeClass("select2wpurp-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2wpurp-result-selectable");if(n.length>0&&!n.is(".select2wpurp-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2wpurp-more-results"),n=this.resultsPage+1,i=this,r=this.search.val(),a=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2wpurp-active"),this.opts.query({element:this.opts.element,term:r,page:n,context:a,matcher:this.opts.matcher,callback:this.bind(function(s){i.opened()&&(i.opts.populateResults.call(this,e,s.results,{term:r,page:n,context:a}),i.postprocessResults(s,!1,!1),!0===s.more?(t.detach().appendTo(e).text(i.opts.formatLoadMore(n+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):t.remove(),i.positionDropdown(),i.resultsPage=n,i.context=s.context,this.opts.element.trigger({type:"select2wpurp-loaded",items:s}))})}))},tokenize:function(){},updateResults:function(n){function i(){l.removeClass("select2wpurp-active"),d.positionDropdown()}function r(e){u.html(e),i()}var s,o,p,l=this.search,u=this.results,c=this.opts,d=this,h=l.val(),m=e.data(this.container,"select2wpurp-last-term");if((!0===n||!m||!a(h,m))&&(e.data(this.container,"select2wpurp-last-term",h),!0===n||!1!==this.showSearchInput&&this.opened())){p=++this.queryCount;var f=this.getMaximumSelectionSize();if(f>=1&&(s=this.data(),e.isArray(s)&&s.length>=f&&Q(c.formatSelectionTooBig,"formatSelectionTooBig")))return void r("<li class='select2wpurp-selection-limit'>"+c.formatSelectionTooBig(f)+"</li>");if(l.val().length<c.minimumInputLength)return r(Q(c.formatInputTooShort,"formatInputTooShort")?"<li class='select2wpurp-no-results'>"+c.formatInputTooShort(l.val(),c.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(c.maximumInputLength&&l.val().length>c.maximumInputLength)return void r(Q(c.formatInputTooLong,"formatInputTooLong")?"<li class='select2wpurp-no-results'>"+c.formatInputTooLong(l.val(),c.maximumInputLength)+"</li>":"");c.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2wpurp-searching'>"+c.formatSearching()+"</li>"),l.addClass("select2wpurp-active"),this.removeHighlight(),(o=this.tokenize())!=t&&null!=o&&l.val(o),this.resultsPage=1,c.query({element:c.element,term:l.val(),page:this.resultsPage,context:null,matcher:c.matcher,callback:this.bind(function(s){var o;if(p==this.queryCount){if(!this.opened())return void this.search.removeClass("select2wpurp-active");if(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==l.val()&&(o=this.opts.createSearchChoice.call(d,l.val(),s.results))!==t&&null!==o&&d.id(o)!==t&&null!==d.id(o)&&0===e(s.results).filter(function(){return a(d.id(this),d.id(o))}).length&&s.results.unshift(o),0===s.results.length&&Q(c.formatNoMatches,"formatNoMatches"))return void r("<li class='select2wpurp-no-results'>"+c.formatNoMatches(l.val())+"</li>");u.empty(),d.opts.populateResults.call(this,u,s.results,{term:l.val(),page:this.resultsPage,context:null}),!0===s.more&&Q(c.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2wpurp-more-results'>"+d.opts.escapeMarkup(c.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),i(),this.opts.element.trigger({type:"select2wpurp-loaded",items:s})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2wpurp-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2wpurp-search-choice-focus").removeClass("select2wpurp-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2wpurp-highlighted").closest(".select2wpurp-result").data("select2wpurp-data");n?(this.highlight(t),this.onSelect(n,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){var n=function(){var n,i,r,a,s,o;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if((n=this.opts.element.attr("style"))!==t)for(i=n.split(";"),a=0,s=i.length;s>a;a+=1)if(o=i[a].replace(/\s/g,""),null!==(r=o.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&r.length>=1)return r[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width")).indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==n&&this.container.css("width",n)}}),x=R(S,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2wpurp-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2wpurp-choice' tabindex='-1'>","   <span class='select2wpurp-chosen'>&nbsp;</span><abbr class='select2wpurp-search-choice-close'></abbr>","   <span class='select2wpurp-arrow'><b></b></span>","</a>","<input class='select2wpurp-focusser select2wpurp-offscreen' type='text'/>","<div class='select2wpurp-drop select2wpurp-display-none'>","   <div class='select2wpurp-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2wpurp-input'/>","   </div>","   <ul class='select2wpurp-results'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.search.focus(),(n=this.search.get(0)).createTextRange?((i=n.createTextRange()).collapse(!1),i.select()):n.setSelectionRange&&(r=this.search.val().length,n.setSelectionRange(r,r)),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2wpurp-open"))},close:function(e){this.opened()&&(this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2wpurp-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,n=this.container,i=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=n.find(".select2wpurp-choice"),this.focusser=n.find(".select2wpurp-focusser"),this.focusser.attr("id","s2id_autogen"+U()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===N.PAGE_UP||e.which===N.PAGE_DOWN)return void f(e);switch(e.which){case N.UP:case N.DOWN:return this.moveHighlight(e.which===N.UP?-1:1),void f(e);case N.ENTER:return this.selectHighlighted(),void f(e);case N.TAB:return void this.selectHighlighted({noFocus:!0});case N.ESC:return this.cancel(e),void f(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==N.TAB&&!N.isControl(e)&&!N.isFunctionKey(e)&&e.which!==N.ESC){if(!1===this.opts.openOnEnter&&e.which===N.ENTER)return void f(e);if(e.which==N.DOWN||e.which==N.UP||e.which==N.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void f(e)}return e.which==N.DELETE||e.which==N.BACKSPACE?(this.opts.allowClear&&this.clear(),void f(e)):void 0}})),p(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2wpurp-container-active")||this.opts.element.trigger(e.Event("select2wpurp-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),f(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){f(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2wpurp-container-active")||this.opts.element.trigger(e.Event("select2wpurp-focus")),this.container.addClass("select2wpurp-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2wpurp-container-active"),this.opts.element.trigger(e.Event("select2wpurp-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2wpurp-container-active")||this.opts.element.trigger(e.Event("select2wpurp-focus")),this.container.addClass("select2wpurp-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2wpurp-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2wpurp-data");if(n){var i=e.Event("select2wpurp-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2wpurp-chosen").empty(),this.selection.removeData("select2wpurp-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2wpurp-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return!!this.getPlaceholder()&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=n.val(),s=null;t.query({matcher:function(e,n,i){var o=a(r,t.id(i));return o&&(s=i),o},callback:e.isFunction(i)?function(){i(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2wpurp-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2wpurp-default"),this.container.removeClass("select2wpurp-allowclear")}},postprocessResults:function(e,t,n){var i=0,r=this;if(this.findHighlightableChoices().each2(function(e,t){return a(r.id(t.data("select2wpurp-data")),r.opts.element.val())?(i=e,!1):void 0}),!1!==n&&(!0===t&&i>=0?this.highlight(i):this.highlight(0)),!0===t){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(A(e.results)>=s)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2wpurp-search").toggleClass("select2wpurp-search-hidden",!t),this.dropdown.find(".select2wpurp-search").toggleClass("select2wpurp-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2wpurp-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2wpurp-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||this.focusser.focus(),a(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,r=this.selection.find(".select2wpurp-chosen");this.selection.data("select2wpurp-data",e),r.empty(),null!==e&&(n=this.opts.formatSelection(e,r,this.opts.escapeMarkup)),n!==t&&r.append(n),(i=this.opts.formatSelectionCssClass(e,r))!==t&&r.addClass(i),this.selection.removeClass("select2wpurp-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2wpurp-allowclear")},val:function(){var e,n=!1,i=null,r=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=r.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:a});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),n&&r.triggerChange({added:e,removed:a})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;return 0===arguments.length?((n=this.selection.data("select2wpurp-data"))==t&&(n=null),n):(arguments.length>1&&(i=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)))}}),M=R(S,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2wpurp-container select2wpurp-container-multi"}).html(["<ul class='select2wpurp-choices'>","  <li class='select2wpurp-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2wpurp-input'>","  </li>","</ul>","<div class='select2wpurp-drop select2wpurp-drop-multi select2wpurp-display-none'>","   <ul class='select2wpurp-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=s(n.val(),t.separator),o=[];t.query({matcher:function(n,i,s){var p=e.grep(r,function(e){return a(e,t.id(s))}).length;return p&&o.push(s),p},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<r.length;n++)for(var s=r[n],p=0;p<o.length;p++){var l=o[p];if(a(s,t.id(l))){e.push(l),o.splice(p,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2wpurp-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2wpurp-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2wpurp-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,n=".select2wpurp-choices";this.searchContainer=this.container.find(".select2wpurp-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2wpurp-search-choice:not(.select2wpurp-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+U()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2wpurp-search-choice-focus"),i=n.prev(".select2wpurp-search-choice:not(.select2wpurp-locked)"),r=n.next(".select2wpurp-search-choice:not(.select2wpurp-locked)"),a=m(this.search);if(n.length&&(e.which==N.LEFT||e.which==N.RIGHT||e.which==N.BACKSPACE||e.which==N.DELETE||e.which==N.ENTER)){var s=n;return e.which==N.LEFT&&i.length?s=i:e.which==N.RIGHT?s=r.length?r:null:e.which===N.BACKSPACE?(this.unselect(n.first()),this.search.width(10),s=i.length?i:r):e.which==N.DELETE?(this.unselect(n.first()),this.search.width(10),s=r.length?r:null):e.which==N.ENTER&&(s=null),this.selectChoice(s),f(e),void(s&&s.length||this.open())}if((e.which===N.BACKSPACE&&1==this.keydowns||e.which==N.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2wpurp-search-choice:not(.select2wpurp-locked)").last()),void f(e);if(this.selectChoice(null),this.opened())switch(e.which){case N.UP:case N.DOWN:return this.moveHighlight(e.which===N.UP?-1:1),void f(e);case N.ENTER:return this.selectHighlighted(),void f(e);case N.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case N.ESC:return this.cancel(e),void f(e)}if(e.which!==N.TAB&&!N.isControl(e)&&!N.isFunctionKey(e)&&e.which!==N.BACKSPACE&&e.which!==N.ESC){if(e.which===N.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===N.PAGE_UP||e.which===N.PAGE_DOWN)&&f(e),e.which===N.ENTER&&f(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2wpurp-container-active"),this.search.removeClass("select2wpurp-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2wpurp-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2wpurp-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2wpurp-container-active")||this.opts.element.trigger(e.Event("select2wpurp-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2wpurp-container-active")||this.opts.element.trigger(e.Event("select2wpurp-focus")),this.container.addClass("select2wpurp-container-active"),this.dropdown.addClass("select2wpurp-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2wpurp-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2wpurp-focused")?(this.search.val(e).addClass("select2wpurp-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2wpurp-default")&&this.search.val("").removeClass("select2wpurp-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2wpurp-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2wpurp-focused")},updateSelection:function(t){var n=[],r=[],a=this;e(t).each(function(){i(a.id(this),n)<0&&(n.push(a.id(this)),r.push(this))}),t=r,this.selection.find(".select2wpurp-search-choice").remove(),e(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r,a=!n.locked,s=e("<li class='select2wpurp-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2wpurp-search-choice-close' tabindex='-1'></a></li>"),o=e("<li class='select2wpurp-search-choice select2wpurp-locked'><div></div></li>"),p=a?s:o,l=this.id(n),u=this.getVal();(i=this.opts.formatSelection(n,p.find("div"),this.opts.escapeMarkup))!=t&&p.find("div").replaceWith("<div>"+i+"</div>"),(r=this.opts.formatSelectionCssClass(n,p.find("div")))!=t&&p.addClass(r),a&&p.find(".select2wpurp-search-choice-close").on("mousedown",f).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2wpurp-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2wpurp-search-choice-focus").removeClass("select2wpurp-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),f(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2wpurp-container-active"),this.dropdown.addClass("select2wpurp-drop-active"))})),p.data("select2wpurp-data",n),p.insertBefore(this.searchContainer),u.push(l),this.setVal(u)},unselect:function(t){var n,r,a=this.getVal();if(0===(t=t.closest(".select2wpurp-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2wpurp-search-choice";if(n=t.data("select2wpurp-data")){for(;(r=i(this.id(n),a))>=0;)a.splice(r,1),this.setVal(a),this.select&&this.postprocessResults();var s=e.Event("select2wpurp-removing");s.val=this.id(n),s.choice=n,this.opts.element.trigger(s),s.isDefaultPrevented()||(t.remove(),this.opts.element.trigger({type:"select2wpurp-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},postprocessResults:function(e,t,n){var r=this.getVal(),a=this.results.find(".select2wpurp-result"),s=this.results.find(".select2wpurp-result-with-children"),o=this;a.each2(function(e,t){i(o.id(t.data("select2wpurp-data")),r)>=0&&(t.addClass("select2wpurp-selected"),t.find(".select2wpurp-result-selectable").addClass("select2wpurp-selected"))}),s.each2(function(e,t){t.is(".select2wpurp-result-selectable")||0!==t.find(".select2wpurp-result-selectable:not(.select2wpurp-selected)").length||t.addClass("select2wpurp-selected")}),-1==this.highlight()&&!1!==n&&o.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2wpurp-result:not(.select2wpurp-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2wpurp-no-results").length)&&Q(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2wpurp-no-results'>"+o.opts.formatNoMatches(o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-o(this.search)},resizeSearch:function(){var e,t,n,i,r=o(this.search);e=w(this.search)+10,t=this.search.offset().left,e>(i=(n=this.selection.width())-(t-this.selection.offset().left)-r)&&(i=n-r),40>i&&(i=n-r),0>=i&&(i=e),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:(e=this.opts.element.val(),s(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){i(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)a(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var r,a=this;if(0===arguments.length)return this.getVal();if((r=this.data()).length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,a.id);a.setVal(n),a.updateSelection(t),a.clearSearch(),i&&a.triggerChange(a.buildChangeDetails(r,a.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2wpurp-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2wpurp-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,r,a=this;return 0===arguments.length?this.selection.find(".select2wpurp-search-choice").map(function(){return e(this).data("select2wpurp-data")}).get():(r=this.data(),t||(t=[]),i=e.map(t,function(e){return a.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),void(n&&this.triggerChange(this.buildChangeDetails(r,this.data()))))}}),e.fn.select2wpurp=function(){var n,r,a,s,o,p=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],c=["val","data"],d={search:"externalSearch"};return this.each(function(){if(0===p.length||"object"==typeof p[0])n=0===p.length?{}:e.extend({},p[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?o=n.element.prop("multiple"):(o=n.multiple||!1,"tags"in n&&(n.multiple=o=!0)),(r=o?new M:new x).init(n);else{if("string"!=typeof p[0])throw"Invalid arguments to select2wpurp plugin: "+p;if(i(p[0],l)<0)throw"Unknown method: "+p[0];if(s=t,(r=e(this).data("select2wpurp"))===t)return;if("container"===(a=p[0])?s=r.container:"dropdown"===a?s=r.dropdown:(d[a]&&(a=d[a]),s=r[a].apply(r,p.slice(1))),i(p[0],u)>=0||i(p[0],c)&&1==p.length)return!1}}),s===t?this:s},e.fn.select2wpurp.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var r=[];return y(e.text,n.term,r,i),r.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return n(""+t).toUpperCase().indexOf(n(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,n,i,r){var s,o,p,l,u,c=e,d=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;for(;;){for(o=-1,p=0,l=r.tokenSeparators.length;l>p&&(u=r.tokenSeparators[p],!((o=e.indexOf(u))>=0));p++);if(0>o)break;if(s=e.substring(0,o),e=e.substring(o+u.length),s.length>0&&(s=r.createSearchChoice.call(this,s,n))!==t&&null!==s&&r.id(s)!==t&&null!==r.id(s)){for(d=!1,p=0,l=n.length;l>p;p++)if(a(r.id(s),r.id(n[p]))){d=!0;break}d||i(s)}}return c!==e?e:void 0},escapeMarkup:b,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t}},e.fn.select2wpurp.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2wpurp={query:{ajax:_,local:j,tags:C},util:{debounce:u,markMatch:y,escapeMarkup:b,stripDiacritics:n},class:{abstract:S,single:x,multi:M}}}}(jQuery),jQuery(document).ready(function(){jQuery(".wpurp-recipe-add-to-meal-plan").length>0&&jQuery(".wpurp-meal-plan-button-date").datepicker({monthNames:wpurp_meal_planner.datepicker.monthNames,monthNamesShort:wpurp_meal_planner.datepicker.monthNamesShort,dayNames:wpurp_meal_planner.datepicker.dayNames,dayNamesShort:wpurp_meal_planner.datepicker.dayNamesShort,dayNamesMin:wpurp_meal_planner.datepicker.dayNamesMin,dateFormat:wpurp_meal_planner.datepicker.dateFormat,firstDay:wpurp_meal_planner.datepicker.firstDay,isRTL:wpurp_meal_planner.datepicker.isRTL}),jQuery(document).on("click",".wpurp-recipe-add-to-meal-plan",function(e){e.preventDefault(),e.stopPropagation(),jQuery(this).next().toggleClass("tooltip-force-display")}),jQuery(document).on("change",".wpurp-meal-plan-button-course",function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this).parents(".recipe-tooltip-content").prev();if(!t.hasClass("in-meal-plan")){var n=t.data("recipe-id"),i=t.parents(".wpurp-container"),r=0,a=i.find("input.adjust-recipe-servings");0==a.length&&(a=i.find("input.advanced-adjust-recipe-servings")),0!=a.length&&(r=parseInt(a.val()));var s=t.next().find(".wpurp-meal-plan-button-date").val(),o=t.next().find(".wpurp-meal-plan-button-course option:selected").text(),p={action:"meal_planner_button",security:wpurp_add_to_meal_plan.nonce,recipe_id:n,servings_wanted:r,date:s,course:o};jQuery.post(wpurp_add_to_meal_plan.ajaxurl,p,function(e){if(t.addClass("in-meal-plan"),t.next().removeClass("tooltip-force-display"),t.next().hasClass("recipe-tooltip-content")){var n=t.next().find(".tooltip-shown").first(),i=t.next().find(".tooltip-alt").first(),r=n.html(),a=i.html();n.html(a),i.html(r)}})}})});var wpurp=wpurp||{};wpurp.timer_seconds=0,wpurp.timer_seconds_remaining=0,wpurp.timer_alarm_sound="data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=",wpurp.timer=void 0,wpurp.alarm_timer=void 0,wpurp.timer_play=function(){jQuery("#wpurp-timer-play").hide(),jQuery("#wpurp-timer-pause").show(),clearInterval(wpurp.timer),wpurp.timer=setInterval(wpurp.update_timer,1e3)},wpurp.timer_pause=function(){jQuery("#wpurp-timer-pause").hide(),jQuery("#wpurp-timer-play").show(),clearInterval(wpurp.timer)},wpurp.update_timer=function(){wpurp.timer_seconds_remaining--,wpurp.timer_seconds_remaining<=0&&(wpurp.timer_seconds_remaining=0,wpurp.timer_finished()),jQuery("#wpurp-timer-remaining").text(wpurp.timer_seconds_to_hms(wpurp.timer_seconds_remaining));var e=100*(wpurp.timer_seconds-wpurp.timer_seconds_remaining)/wpurp.timer_seconds;jQuery("#wpurp-timer-bar-elapsed").css("width",e+"%")},wpurp.timer_finished=function(){wpurp.timer_pause(),clearInterval(wpurp.alarm_timer),wpurp.timer_finished_sequence(),wpurp.timer=setInterval(wpurp.timer_finished_sequence,2e3)},wpurp.timer_finished_sequence=function(){wpurp.timer_play_alarm(),jQuery("#wpurp-timer-container").animate({opacity:.5},500).animate({opacity:1},500).animate({opacity:.5},500).animate({opacity:1},500)},wpurp.timer_play_alarm=function(){var e=new Audio(wpurp.timer_alarm_sound);wpurp.alarm_timer=setInterval(function(){e.play()},250),setTimeout(function(){clearInterval(wpurp.alarm_timer)},1250)},wpurp.open_timer=function(e){wpurp.remove_timer(function(){if(e>0){wpurp.timer_seconds=e,wpurp.timer_seconds_remaining=e;var t=jQuery('<div id="wpurp-timer-container"></div>').hide(),n=jQuery('<span id="wpurp-timer-play" class="wpurp-timer-icon">'+wpurp_timer.icons.play+"</span>"),i=jQuery('<span id="wpurp-timer-pause" class="wpurp-timer-icon">'+wpurp_timer.icons.pause+"</span>"),r=jQuery('<span id="wpurp-timer-remaining"></span>'),a=jQuery('<span id="wpurp-timer-bar-container"><span id="wpurp-timer-bar"><span id="wpurp-timer-bar-elapsed"></span></span></span>'),s=jQuery('<span id="wpurp-timer-close" class="wpurp-timer-icon">'+wpurp_timer.icons.close+"</span>");r.text(wpurp.timer_seconds_to_hms(e)),t.append(n).append(i).append(r).append(a).append(s),jQuery("body").append(t),wpurp.timer_play(),t.fadeIn()}})},wpurp.remove_timer=function(e){clearInterval(wpurp.timer),clearInterval(wpurp.alarm_timer);var t=jQuery("#wpurp-timer-container");t.length>0?(t.clearQueue(),t.fadeOut(400,function(){t.remove(),void 0!==e&&e()})):void 0!==e&&e()},wpurp.timer_seconds_to_hms=function(e){var t=Math.floor(e/3600);e-=3600*t;var n=Math.floor(e/60);return e-=60*n,(t<10?"0"+t:t)+":"+(n<10?"0"+n:n)+":"+(e<10?"0"+e:e)},jQuery(document).ready(function(e){jQuery(document).on("click",".wpurp-timer-link",function(e){e.preventDefault(),e.stopPropagation();var t=parseInt(jQuery(this).find(".wpurp-timer").data("seconds"));wpurp.open_timer(t)}),jQuery(document).on("click","#wpurp-timer-play",function(e){wpurp.timer_play()}),jQuery(document).on("click","#wpurp-timer-pause",function(e){wpurp.timer_pause()}),jQuery(document).on("click","#wpurp-timer-close",function(e){wpurp.remove_timer()})}),function(e,t){"use strict";"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Qty=t()}(this,function(){"use strict";function e(e){if(this.scalar=null,this.baseScalar=null,this.signature=null,this.output={},this.numerator=A,this.denominator=A,e.constructor===String?(e=e.trim(),N.call(this,e)):(this.scalar=e.scalar,this.numerator=e.numerator&&0!==e.numerator.length?e.numerator:A,this.denominator=e.denominator&&0!==e.denominator.length?e.denominator:A),this.denominator.join("*").indexOf("temp")>=0)throw"Cannot divide with temperatures";if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw"Cannot multiply by temperatures";if(!p(this.denominator,A))throw"Cannot divide with temperatures"}if(this.initValue=e,T.call(this),this.isTemperature()&&this.baseScalar<0)throw"Temperatures must not be less than absolute zero"}function t(){throw"Incompatible units"}function n(t,n){for(var i,r=[],a=[],s=1,o=0;o<t.length;o++)i=t[o],L[i]?s=v(s,L[i]):q[i]&&(s*=q[i].scalar,q[i].numerator&&r.push(q[i].numerator),q[i].denominator&&a.push(q[i].denominator));for(var p=0;p<n.length;p++)i=n[p],L[i]?s/=L[i]:q[i]&&(s/=q[i].scalar,q[i].numerator&&a.push(q[i].numerator),q[i].denominator&&r.push(q[i].denominator));return r=r.reduce(function(e,t){return e.concat(t)},[]),a=a.reduce(function(e,t){return e.concat(t)},[]),new e({scalar:s,numerator:r,denominator:a})}function i(e){var t=D[e];if(t)return t;var n,i=[];if(!X.test(e))throw"Unit not recognized";for(;n=J.exec(e);)i.push(n.slice(1));return i=i.map(function(e){return z[e[0]]?[z[e[0]],H[e[1]]]:[H[e[1]]]}),i=i.reduce(function(e,t){return e.concat(t)},[]),i=i.filter(function(e){return e}),D[e]=i,i}function r(){}function a(e){var t=F.get(e);return t||(t=p(e,A)?"1":o(s(e)).join("*"),F.set(e,t),t)}function s(e){for(var t,n,i=[],r=0;r<e.length;r++)t=e[r],n=e[r+1],L[t]?(i.push(W[t]+W[n]),r++):i.push(W[t]);return i}function o(e){return e.reduce(function(e,t){var n=e[t];return n||e.push(n=e[t]=[t,0]),n[1]++,e},[]).map(function(e){return e[0]+(e[1]>1?e[1]:"")})}function p(e,t){if(t.length!==e.length)return!1;for(var n=0;n<e.length;n++){if(t[n].compareArray&&!t[n].compareArray(e[n]))return!1;if(t[n]!==e[n])return!1}return!0}function l(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function u(t,n){var i=t.units(),r=n.to(i),a=new e(h(i));return new e({scalar:t.scalar-r.scalar,numerator:a.numerator,denominator:a.denominator})}function c(t,n){var i=n.to(h(t.units()));return new e({scalar:t.scalar-i.scalar,numerator:t.numerator,denominator:t.denominator})}function d(t,n){var i=n.to(h(t.units()));return new e({scalar:t.scalar+i.scalar,numerator:t.numerator,denominator:t.denominator})}function h(e){if("tempK"===e)return"degK";if("tempC"===e)return"degC";if("tempF"===e)return"degF";if("tempR"===e)return"degR";throw"Unknown type for temp conversion from: "+e}function m(t,n){var i,r=f(t),a=n.units();if("degK"===a)i=r.scalar;else if("degC"===a)i=r.scalar;else if("degF"===a)i=9*r.scalar/5;else{if("degR"!==a)throw"Unknown type for degree conversion to: "+a;i=9*r.scalar/5}return new e({scalar:i,numerator:n.numerator,denominator:n.denominator})}function f(t){var n,i=t.units();if(i.match(/(deg)[CFRK]/))n=t.baseScalar;else if("tempK"===i)n=t.scalar;else if("tempC"===i)n=t.scalar;else if("tempF"===i)n=5*t.scalar/9;else{if("tempR"!==i)throw"Unknown type for temp conversion from: "+i;n=5*t.scalar/9}return new e({scalar:n,numerator:["<kelvin>"],denominator:A})}function g(t,n){var i,r=n.units();if("tempK"===r)i=t.baseScalar;else if("tempC"===r)i=t.baseScalar-273.15;else if("tempF"===r)i=9*t.baseScalar/5-459.67;else{if("tempR"!==r)throw"Unknown type for temp conversion to: "+r;i=9*t.baseScalar/5}return new e({scalar:i,numerator:n.numerator,denominator:n.denominator})}function w(t){var n,i=t.units();if(i.match(/(deg)[CFRK]/))n=t.baseScalar;else if("tempK"===i)n=t.scalar;else if("tempC"===i)n=t.scalar+273.15;else if("tempF"===i)n=5*(t.scalar+459.67)/9;else{if("tempR"!==i)throw"Unknown type for temp conversion from: "+i;n=5*t.scalar/9}return new e({scalar:n,numerator:["<temp-K>"],denominator:A})}function v(){for(var e=1,t=0,n=0;n<arguments.length;n++){var i=arguments[n];t+=b(i),e*=i}return 0!==t?l(e,t):e}function y(e,t){if(0===t)throw"Divide by zero";var n=Math.pow(10,b(t));return v(e,n/(n*t))}function b(e){var t,n;return(n=B.exec(e))&&n[2]?t=n[2].length:(n=O.exec(e))&&(t=parseInt(n[2],10)),t||0}function _(e,t){e=e.filter(function(e){return e!==k}),t=t.filter(function(e){return e!==k});for(var n,i={},r=0;r<e.length;r++)L[e[r]]?(n=[e[r],e[r+1]],r++):n=e[r],n&&n!==k&&(i[n]?i[n][0]++:i[n]=[1,n]);for(var a=0;a<t.length;a++)L[t[a]]?(n=[t[a],t[a+1]],a++):n=t[a],n&&n!==k&&(i[n]?i[n][0]--:i[n]=[-1,n]);e=[],t=[];for(var s in i)if(i.hasOwnProperty(s)){var o,p=i[s];if(p[0]>0)for(o=0;o<p[0];o++)e.push(p[1]);else if(p[0]<0)for(o=0;o<-p[0];o++)t.push(p[1])}return 0===e.length&&(e=A),0===t.length&&(t=A),e=e.reduce(function(e,t){return e.concat(t)},[]),t=t.reduce(function(e,t){return e.concat(t)},[]),[e,t]}function j(e){return e}var C={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","Micro","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.004217,"length",["<meter>"]],"<point>":[["pt","point","points"],3514e-7,"length",["<meter>"]],"<redshift>":[["z","red-shift"],1.302773e26,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],6.0221415e26,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],6.0221415e26,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["tonne"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<feet>","<feet>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],86400,"time",["<second>"]],"<week>":[["wk","week","weeks"],604800,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit"],1.6667e-15,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<farad>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radian"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<grad>":[["grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte"],1,"memory",["<byte>"]],"<bit>":[["b","bit"],.125,"memory",["<byte>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","bequerel","bequerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp"],1,"counting",["<each>"]],"<nucleotide>":[["nt"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-9,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},Q=["<meter>","<kilogram>","<second>","<mole>","<farad>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],k="<1>",A=[k],R=new RegExp("^([+-]?\\d*(?:\\.\\d+)?(?:[Ee][+-]?\\d+)?)\\s*([^/]*)(?:/(.+))?$"),S=new RegExp("([^ \\*]+?)(?:\\^|\\*{2})?(-?\\d+)"),x=new RegExp("([^ \\*]+?)(?:\\^|\\*{2})?(\\d+)"),M=["length","time","temperature","mass","current","substance","luminosity","currency","memory","angle","capacitance"],U={"-312058":"resistance","-312038":"inductance","-152040":"magnetism","-152038":"magnetism","-152058":"potential","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7942:"power",7959:"pressure",7962:"energy",7979:"viscosity",7981:"force",7997:"mass_concentration",8000:"mass",159999:"magnetism",160000:"current",160020:"charge",312058:"conductance",3199980:"activity",3199997:"molar_concentration",3200000:"substance",63999998:"illuminance",64000000:"luminous_power",1280000000:"currency",25600000000:"memory",511999999980:"angular_velocity",512000000000:"angle",10240000000000:"capacitance"},P={};e.parse=function(t){if("string"!=typeof t&&!(t instanceof String))throw"Argument should be a string";try{return new e(t)}catch(e){return null}},e.swiftConverter=function(t,n){var i=new e(t),r=new e(n);return i.eq(r)?j:i.isTemperature()?function(e){return i.mul(e).to(r).scalar}:function(e){return e*i.baseScalar/r.baseScalar}};var T=function(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=I.call(this);else{var e=this.toBase();this.baseScalar=e.scalar,this.signature=e.signature}},I=function(){if(this.signature)return this.signature;for(var e=E.call(this),t=0;t<e.length;t++)e[t]*=Math.pow(20,t);return e.reduce(function(e,t){return e+t},0)},E=function(){if(!this.isBase())return E.call(this.toBase());for(var e=new Array(M.length),t=0;t<e.length;t++)e[t]=0;for(var n,i,r=0;r<this.numerator.length;r++)(n=C[this.numerator[r]])&&(i=M.indexOf(n[2]))>=0&&(e[i]=e[i]+1);for(var a=0;a<this.denominator.length;a++)(n=C[this.denominator[a]])&&(i=M.indexOf(n[2]))>=0&&(e[i]=e[i]-1);return e},N=function(e){var t=R.exec(e);if(!t)throw e+": Quantity not recognized";if(""===e.trim())throw"Unit not recognized";this.scalar=t[1]?parseFloat(t[1]):1;for(var n,r,a,s=t[2],o=t[3];t=S.exec(s);){if(n=parseFloat(t[2]),isNaN(n))throw"Unit exponent is not a number";if(0===n&&!X.test(t[1]))throw"Unit not recognized";r=t[1]+" ",a="";for(var p=0;p<Math.abs(n);p++)a+=r;n>=0?s=s.replace(t[0],a):(o=o?o+a:a,s=s.replace(t[0],""))}for(;t=x.exec(o);){if(n=parseFloat(t[2]),isNaN(n))throw"Unit exponent is not a number";if(0===n&&!X.test(t[1]))throw"Unit not recognized";r=t[1]+" ",a="";for(var l=0;l<n;l++)a+=r;o=o.replace(t[0],a,"g")}s&&(this.numerator=i(s.trim())),o&&(this.denominator=i(o.trim()))};e.prototype={constructor:e,toFloat:function(){if(this.isUnitless())return this.scalar;throw"Can't convert to Float unless unitless.  Use Unit#scalar"},isUnitless:function(){return p(this.numerator,A)&&p(this.denominator,A)},isCompatible:function(t){return t&&t.constructor===String?this.isCompatible(new e(t)):t instanceof e&&(void 0!==t.signature&&this.signature===t.signature)},isInverse:function(e){return this.inverse().isCompatible(e)},kind:function(){return U[this.signature.toString()]},isBase:function(){return void 0!==this._isBase?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(e){e!==k&&-1===Q.indexOf(e)&&(this._isBase=!1)},this),!1===this._isBase?this._isBase:(this._isBase=!0,this._isBase))},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return w(this);var e=P[this.units()];return e||(e=n(this.numerator,this.denominator),P[this.units()]=e),e.mul(this.scalar)},units:function(){if(void 0!==this._units)return this._units;var e=p(this.numerator,A),t=p(this.denominator,A);if(e&&t)return this._units="",this._units;var n=a(this.numerator),i=a(this.denominator);return this._units=n+(t?"":"/"+i),this._units},eq:function(e){return 0===this.compareTo(e)},lt:function(e){return-1===this.compareTo(e)},lte:function(e){return this.eq(e)||this.lt(e)},gt:function(e){return 1===this.compareTo(e)},gte:function(e){return this.eq(e)||this.gt(e)},toPrec:function(n){if(n&&n.constructor===String&&(n=new e(n)),"number"==typeof n&&(n=new e(n+" "+this.units())),this.isUnitless()?n.isUnitless()||t():n=n.to(this.units()),0===n.scalar)throw"Divide by zero";return new e(v(Math.round(this.scalar/n.scalar),n.scalar)+this.units())},toString:function(t,n){var i;if("number"==typeof t)n=t;else if("string"==typeof t)i=t;else if(t instanceof e)return this.toPrec(t).toString(n);var r;return!n&&this.output[i]?r=this.output[i]:i?(r=this.to(i),this.output[i]=r):r=this,r=((void 0!==n?l(r.scalar,n):r.scalar)+" "+r.units()).trim()},compareTo:function(n){return n&&n.constructor===String?this.compareTo(new e(n)):(this.isCompatible(n)||t(),this.baseScalar<n.baseScalar?-1:this.baseScalar===n.baseScalar?0:this.baseScalar>n.baseScalar?1:void 0)},same:function(e){return this.scalar===e.scalar&&this.units()===e.units()},inverse:function(){if(this.isTemperature())throw"Cannot divide with temperatures";if(0===this.scalar)throw"Divide by zero";return new e({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})},isDegrees:function(){return(null===this.signature||400===this.signature)&&1===this.numerator.length&&p(this.denominator,A)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)},to:function(n){if(n&&n.constructor!==String)return this.to(n.units());var i=new e(n);if(i.units()===this.units())return this;if(!this.isCompatible(i)){if(this.isInverse(i))return this.inverse().to(n);t()}return i.isTemperature()?g(this,i):i.isDegrees()?m(this,i):new e({scalar:y(this.baseScalar,i.baseScalar),numerator:i.numerator,denominator:i.denominator})},add:function(n){if(n&&n.constructor===String&&(n=new e(n)),this.isCompatible(n)||t(),this.isTemperature()&&n.isTemperature())throw"Cannot add two temperatures";return this.isTemperature()?d(this,n):n.isTemperature()?d(n,this):new e({scalar:this.scalar+n.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(n){if(n&&n.constructor===String&&(n=new e(n)),this.isCompatible(n)||t(),this.isTemperature()&&n.isTemperature())return u(this,n);if(this.isTemperature())return c(this,n);if(n.isTemperature())throw"Cannot subtract a temperature from a differential degree unit";return new e({scalar:this.scalar-n.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(t){if("number"==typeof t)return new e({scalar:v(this.scalar,t),numerator:this.numerator,denominator:this.denominator});if(t&&t.constructor===String&&(t=new e(t)),(this.isTemperature()||t.isTemperature())&&!this.isUnitless()&&!t.isUnitless())throw"Cannot multiply by temperatures";var n=this,i=t;n.isCompatible(i)&&400!==n.signature&&(i=i.to(n));var r=_(n.numerator.concat(i.numerator),n.denominator.concat(i.denominator));return new e({scalar:v(n.scalar,i.scalar),numerator:r[0],denominator:r[1]})},div:function(t){if("number"==typeof t){if(0===t)throw"Divide by zero";return new e({scalar:this.scalar/t,numerator:this.numerator,denominator:this.denominator})}if(t&&t.constructor===String&&(t=new e(t)),0===t.scalar)throw"Divide by zero";if(t.isTemperature())throw"Cannot divide with temperatures";if(this.isTemperature()&&!t.isUnitless())throw"Cannot divide with temperatures";var n=this,i=t;n.isCompatible(i)&&400!==n.signature&&(i=i.to(n));var r=_(n.numerator.concat(i.denominator),n.denominator.concat(i.numerator));return new e({scalar:n.scalar/i.scalar,numerator:r[0],denominator:r[1]})}};var D={};r.prototype.get=function(e){return arguments.length>1&&(e=Array.apply(null,arguments)),e.reduce(function(t,n,i){if(t){var r=t[n];return i===e.length-1?r?r.data:void 0:r}},this)},r.prototype.set=function(e,t){return arguments.length>2&&(e=Array.prototype.slice.call(arguments,0,-1),t=arguments[arguments.length-1]),e.reduce(function(n,i,r){var a=n[i];return void 0===a&&(a=n[i]={}),r===e.length-1?(a.data=t,t):a},this)};var F=new r,B=/^-?(\d+)(?:\.(\d+))?$/,O=/^-?(\d+)e-?(\d+)$/;e.mul_safe=v,e.div_safe=y;var L={},z={},q={},H={},W={};for(var K in C)if(C.hasOwnProperty(K)){var G=C[K];if("prefix"===G[2]){L[K]=G[1];for(var Z=0;Z<G[0].length;Z++)z[G[0][Z]]=K}else{q[K]={scalar:G[1],numerator:G[3],denominator:G[4]};for(var V=0;V<G[0].length;V++)H[G[0][V]]=K}W[K]=G[0][0]}var Y="("+Object.keys(z).sort(function(e,t){return t.length-e.length}).join("|")+")*?("+Object.keys(H).sort(function(e,t){return t.length-e.length}).join("|")+")\\b",J=new RegExp(Y,"g"),X=new RegExp("^\\s*("+Y+"\\s*\\*?\\s*)+$");return e});var RecipeUnitConversion=RecipeUnitConversion||{};RecipeUnitConversion.getUnitFromAlias=function(e){if(null!==e&&void 0!==e){var t=e.replace(/[\(\).,\s;:=\-+]/gi,"");if(void 0!==wpurp_unit_conversion.alias_to_unit[t])n=wpurp_unit_conversion.alias_to_unit[t];else var n=wpurp_unit_conversion.alias_to_unit[t.toLowerCase()];return n}},RecipeUnitConversion.getUnitType=function(e){return wpurp_unit_conversion.unit_to_type[e]},RecipeUnitConversion.getUnitSystems=function(e){var t=RecipeUnitConversion.getUnitType(e);if(!t)return[];for(var n=wpurp_unit_conversion.systems,i=[],r=0,a=n.length;r<a;r++)-1!=jQuery.inArray(e,n[r]["units_"+t])&&i.push(r);return i},RecipeUnitConversion.isUniversal=function(e){return-1!=jQuery.inArray(e,wpurp_unit_conversion.universal_units)},RecipeUnitConversion.getAbbreviation=function(e){var t=wpurp_unit_conversion.unit_abbreviations[e];return void 0===t&&(t=e),t},RecipeUnitConversion.getUserAbbreviation=function(e,t){var n="plural";if(1==t&&(n="singular"),void 0!==wpurp_unit_conversion.user_abbreviations[e])void 0===(i=wpurp_unit_conversion.user_abbreviations[e][n])&&(i=e);else var i=e;return i},RecipeUnitConversion.determineIngredientListSystem=function(e){for(var t=[],n=0,i=wpurp_unit_conversion.systems.length;n<i;n++)t[n]=0;e.find(".wpurp-recipe-ingredient").each(function(){for(var e=jQuery(this).find(".wpurp-recipe-ingredient-unit").text(),n=RecipeUnitConversion.getUnitFromAlias(e),i=RecipeUnitConversion.getUnitSystems(n),r=0,a=i.length;r<a;r++)t[i[r]]++});for(var r=t[0],a=0,n=1,i=t.length;n<i;n++)t[n]>r&&(a=n,r=t[n]);return a},RecipeUnitConversion.convertUnitToSystem=function(e,t,n,i){var r=wpurp_unit_conversion.systems;if("cup"==t){var a=parseFloat(r[n].cup_type),s=new Qty("1 cup").to("ml").scalar;Math.abs(a-s)>.1&&(e*=a/s)}for(var o=RecipeUnitConversion.getUnitType(t),p=new Qty(e+" "+RecipeUnitConversion.getAbbreviation(t)),l=r[i]["units_"+o],u=[],c=0,d=l.length;c<d;c++)try{var h=p.to(RecipeUnitConversion.getAbbreviation(l[c])).scalar;if("cup"==l[c]){var m=parseFloat(r[i].cup_type),s=new Qty(m+" ml").to("cup").scalar;Math.abs(1-s)>.01&&(h*=1/s)}u.push({unit:l[c],amount:h})}catch(e){console.log(e)}if(0===u.length)return{unit:t,amount:e};var f=u.sort(RecipeUnitConversion.compareAmounts),g=f[0].amount,w=f[0].unit;e:for(var c=1,d=f.length;c<d&&(g>999||g>5&&("teaspoon"==w||"tablespoon"==w));c++)g=f[c].amount,w=f[c].unit;return{unit:w,amount:g}},RecipeUnitConversion.compareAmounts=function(e,t){return t.amount-e.amount},RecipeUnitConversion.formatNumber=function(e,t,n){if(t){var i=Fraction(e.toString()).snap();if(i.denominator<100)return i}if(""==e||0==e)return"";for(var n=void 0==n?parseInt(wpurp_servings.precision):n,r=e.toFixed(n);0==parseFloat(r);)if(n++,r=e.toFixed(n),n>10)return"";if(n>0){var a=Array(n+1).join("0");r=r.replace(new RegExp("."+a+"$"),"")}return"undefined"!=typeof wpurp_servings&&(r=r.replace(".",wpurp_servings.decimal_character)),r},RecipeUnitConversion.updateIngredients=function(e,t,n){e.find(".wpurp-recipe-ingredient").each(function(){var e=jQuery(this).find(".wpurp-recipe-ingredient-quantity"),i=jQuery(this).find(".wpurp-recipe-ingredient-unit"),r=e.data("normalized"),a=e.data("fraction"),s=i.data("original"),o=RecipeUnitConversion.getUnitFromAlias(s);if(void 0!==o&&!RecipeUnitConversion.isUniversal(o)&&r){var p=RecipeUnitConversion.getUnitSystems(o),l=RecipeUnitConversion.getUnitSystems("cup");if(-1==jQuery.inArray(n,p)||"cup"==o&&-1!=jQuery.inArray(t,l)){var u=RecipeUnitConversion.convertUnitToSystem(r,o,t,n);e.text(RecipeUnitConversion.formatNumber(u.amount,a)),i.text(RecipeUnitConversion.getUserAbbreviation(u.unit,u.amount)),e.data("normalized",u.amount),i.data("original",u.unit);var c=jQuery(this).find(".wpurp-recipe-ingredient-name");RecipeUnitConversion.checkIngredientPlural(c,u.amount,s)}}}),e.data("system",n)},RecipeUnitConversion.recalculate=function(e){var t=jQuery(e).parents(".wpurp-container"),n=t.find(".wpurp-recipe-ingredients"),i=parseInt(n.data("system")),r=parseInt(jQuery(e).val());i!=r&&(RecipeUnitConversion.updateIngredients(n,i,r),RecipePrintButton.update(t))},RecipeUnitConversion.init=function(){jQuery(".wpurp-recipe-ingredients").each(function(e){var t=jQuery(this),n=RecipeUnitConversion.determineIngredientListSystem(t);t.parents(".wpurp-container").find(".adjust-recipe-unit").val(n),t.parents(".wpurp-container").data("system-original",n),t.data("system",n)})},jQuery(document).ready(function(){void 0!==window.wpurp_unit_conversion&&RecipeUnitConversion.init()}),RecipeUnitConversion.adjustServings=function(e,t,n){e.find(".wpurp-recipe-ingredient").each(function(){var e=jQuery(this).find(".wpurp-recipe-ingredient-quantity"),i=jQuery(this).find(".wpurp-recipe-ingredient-unit"),r=e.data("normalized"),a=e.data("fraction");if(isFinite(r)){var s=n*r/t,o=RecipeUnitConversion.formatNumber(s,a);e.text(o).data("normalized",s);var p=i.data("original"),l=RecipeUnitConversion.getUnitFromAlias(p);i.text(RecipeUnitConversion.getUserAbbreviation(l,s));var u=jQuery(this).find(".wpurp-recipe-ingredient-name");RecipeUnitConversion.checkIngredientPlural(u,s,p)}else e.addClass("recipe-ingredient-nan")})},RecipeUnitConversion.checkIngredientPlural=function(e,t,n){i=e.data("plural");if(1==t.toFixed(2)&&(""==n||void 0==n))var i=e.data("singular");void 0!==i&&(e.find("a").length>0?e.find("a").text(i):e.text(i))},jQuery(document).on("keyup change",".advanced-adjust-recipe-servings",function(e){var t=jQuery(this),n=t.parents(".wpurp-container").find(".wpurp-recipe-ingredients"),i=parseFloat(t.data("original")),r=t.val();(isNaN(r)||r<=0)&&(r=1),RecipeUnitConversion.adjustServings(n,i,r),wpurp_adjustable_servings.updateShortcode(t.parents(".wpurp-container"),r),t.parents(".wpurp-container").find(".advanced-adjust-recipe-servings").each(function(){jQuery(this).data("original",r)}),RecipePrintButton.update(t.parents(".wpurp-container"))}),jQuery(document).on("blur",".advanced-adjust-recipe-servings",function(e){var t=jQuery(this),n=t.data("original");t.parents(".wpurp-container").find(".advanced-adjust-recipe-servings").each(function(){jQuery(this).val(n)}),RecipePrintButton.update(t.parents(".wpurp-container"))});var RecipeUserMenus=RecipeUserMenus||{};RecipeUserMenus.recipes=[],RecipeUserMenus.order=[],RecipeUserMenus.recipeIngredients=[],RecipeUserMenus.nbrRecipes=0,RecipeUserMenus.ajaxGettingIngredients=0,RecipeUserMenus.generalServings=4,RecipeUserMenus.menuId=0,RecipeUserMenus.unitSystem=0,RecipeUserMenus.init=function(){RecipeUserMenus.initSelect(),RecipeUserMenus.unitSystem=parseInt(wpurp_user_menus.default_system),RecipeUserMenus.changeServings(jQuery(".user-menus-servings-general"),!0),"undefined"!=typeof wpurp_user_menu&&(RecipeUserMenus.setSavedValues(wpurp_user_menu),RecipeUserMenus.redrawRecipes(),RecipeUserMenus.updateIngredients()),jQuery(".user-menus-group-by").on("click",function(e){e.preventDefault();var t=jQuery(this);t.hasClass("user-menus-group-by-selected")||(RecipeUserMenus.groupBy(jQuery(this).data("groupby")),t.siblings(".user-menus-group-by-selected").removeClass("user-menus-group-by-selected"),t.addClass("user-menus-group-by-selected"))}),jQuery(".user-menus-selected-recipes").sortable({opacity:.5,start:function(e,t){jQuery(".user-menus-recipes-delete").slideDown(500)},stop:function(e,t){jQuery(".user-menus-recipes-delete").slideUp(500)},update:function(e,t){RecipeUserMenus.updateRecipeOrder(jQuery(this)),RecipeUserMenus.updateCookies()}}),jQuery(".user-menus-servings-general").on("keyup change",function(){RecipeUserMenus.changeServings(jQuery(this),!0)}),jQuery(".user-menus-selected-recipes").on("keyup change",".user-menus-servings-recipe",function(){RecipeUserMenus.changeServings(jQuery(this),!1)}),jQuery(".user-menus-servings-general").on("blur",function(){var e=jQuery(this),t=e.val();(isNaN(t)||t<=0)&&e.val(1)}),jQuery(".user-menus-selected-recipes").on("blur",".user-menus-servings-recipe",function(){var e=jQuery(this),t=e.val();(isNaN(t)||t<=0)&&e.val(1)}),jQuery(".wpurp-user-menus").on("click",".delete-recipe-button",function(){jQuery(this).parent(".user-menus-recipe").remove(),RecipeUserMenus.deleteRecipe()}),jQuery(".user-menus-ingredients").on("change",".shopping-list-ingredient",function(){var e=jQuery(this);e.is(":checked")?e.closest("tr").addClass("ingredient-checked"):e.closest("tr").removeClass("ingredient-checked")})},RecipeUserMenus.deleteRecipe=function(){RecipeUserMenus.nbrRecipes-=1,RecipeUserMenus.checkIfEmpty(),RecipeUserMenus.updateRecipeOrder(jQuery(".user-menus-selected-recipes")),RecipeUserMenus.updateIngredients(),RecipeUserMenus.updateCookies()},RecipeUserMenus.setSavedValues=function(e){null!==e.recipes&&(RecipeUserMenus.recipes=e.recipes,RecipeUserMenus.order=e.order),""!==e.nbrRecipes&&(RecipeUserMenus.nbrRecipes=parseInt(e.nbrRecipes)),""!==e.unitSystem&&(RecipeUserMenus.unitSystem=parseInt(e.unitSystem)),""!==e.menuId&&(RecipeUserMenus.menuId=parseInt(e.menuId))},RecipeUserMenus.deleteMenu=function(){var e={action:"user_menus_delete",security:wpurp_user_menus.nonce,menuId:RecipeUserMenus.menuId};jQuery.post(wpurp_user_menus.ajaxurl,e,function(e){window.location.href=e},"html")},RecipeUserMenus.saveMenu=function(){var e={action:"user_menus_save",security:wpurp_user_menus.nonce,menuId:RecipeUserMenus.menuId,title:jQuery(".user-menus-title").val(),recipes:RecipeUserMenus.recipes,order:RecipeUserMenus.order,nbrRecipes:RecipeUserMenus.nbrRecipes,unitSystem:RecipeUserMenus.unitSystem};jQuery.post(wpurp_user_menus.ajaxurl,e,function(e){0==RecipeUserMenus.menuId&&(window.location.href=e)},"html")},RecipeUserMenus.printShoppingList=function(){var e=jQuery(".user-menus-title").val();wpurp_user_menus.shoppingListTitle=void 0!=e?'<h2 class="wpurp-shoppinglist-title">'+e+"</h2>":'<h2 class="wpurp-shoppinglist-title">Shopping List</h2>',wpurp_user_menus.recipeList="",wpurp_user_menus.print_recipe_list&&(console.log(wpurp_user_menus.recipes),wpurp_user_menus.recipeList='<table class="wpurp-recipelist">',wpurp_user_menus.recipeList+=wpurp_user_menus.print_recipe_list_header,jQuery(".user-menus-selected-recipes .user-menus-recipe").each(function(){wpurp_user_menus.recipeList+="<tr>",wpurp_user_menus.recipeList+="<td>"+jQuery(this).find("a").text()+"</td>",wpurp_user_menus.recipeList+="<td>"+jQuery(this).find("input").val()+"</td>",wpurp_user_menus.recipeList+="</tr>"}),wpurp_user_menus.recipeList+="</table>"),wpurp_user_menus.shoppingList='<table class="wpurp-shoppinglist">'+jQuery(".user-menus-ingredients").html()+"</table>",window.open(wpurp_user_menus.addonUrl+"/templates/print-shopping-list.php")},RecipeUserMenus.printUserMenu=function(){wpurp_user_menus.recipe_ids=[],wpurp_user_menus.recipes=[],wpurp_user_menus.print_servings_original=[],wpurp_user_menus.print_servings_wanted=[],wpurp_user_menus.print_unit_system=RecipeUserMenus.unitSystem;for(var e=0,t=RecipeUserMenus.order.length;e<t;e++){var n=RecipeUserMenus.order[e],i=RecipeUserMenus.recipes[n];wpurp_user_menus.recipe_ids.push(i.id),wpurp_user_menus.print_servings_original.push(i.servings_original),wpurp_user_menus.print_servings_wanted.push(i.servings_wanted)}var r={action:"get_recipe_template",security:wpurp_user_menus.nonce,recipe_ids:wpurp_user_menus.recipe_ids};jQuery.post(wpurp_user_menus.ajaxurl,r,function(e){wpurp_user_menus.recipes=e},"json");var a=jQuery(".user-menus-title").val();wpurp_user_menus.shoppingListTitle=void 0!=a?"<h2>"+a+"</h2>":"<h2>Shopping List</h2>",wpurp_user_menus.shoppingList='<table class="wpurp-shoppinglist">'+jQuery(".user-menus-ingredients").html()+"</table>",window.open(wpurp_user_menus.addonUrl+"/templates/print-user-menu.php")},RecipeUserMenus.updateRecipeOrder=function(e){RecipeUserMenus.order=e.sortable("toArray",{attribute:"data-index"})},RecipeUserMenus.changeServings=function(e,t){var n=e.val();if((isNaN(n)||n<=0)&&(n=1),t)RecipeUserMenus.generalServings=n;else{var i=e.parent(".user-menus-recipe").data("index");RecipeUserMenus.recipes[i].servings_wanted=n,RecipeUserMenus.updateIngredientsTable(),RecipeUserMenus.updateCookies()}},RecipeUserMenus.initSelect=function(){jQuery(".user-menus-select").select2wpurp({width:"off"}).on("change",function(){RecipeUserMenus.addRecipe(jQuery(this).select2wpurp("data")),jQuery(this).select2wpurp("val","")})},RecipeUserMenus.addRecipe=function(e){""!==e.id&&(RecipeUserMenus.recipes.push({id:e.id,name:e.text,link:e.element[0].dataset.link,servings_original:e.element[0].dataset.servings,servings_wanted:RecipeUserMenus.generalServings}),RecipeUserMenus.order.push((RecipeUserMenus.recipes.length-1).toString()),RecipeUserMenus.redrawRecipes(),RecipeUserMenus.updateCookies(),RecipeUserMenus.updateIngredients())},RecipeUserMenus.redrawRecipes=function(){var e=jQuery(".user-menus-selected-recipes");e.empty();var t=RecipeUserMenus.recipes,n=RecipeUserMenus.order;RecipeUserMenus.nbrRecipes=0;for(var i=0,r=n.length;i<r;i++){var a=t[n[i]];e.append('<div class="user-menus-recipe" data-recipe="'+a.id+'" data-index="'+n[i]+'"><i class="fa fa-trash delete-recipe-button"></i> <a href="'+a.link+'" target="_blank">'+a.name+'</a><input type="number" class="user-menus-servings-recipe" value="'+a.servings_wanted+'"></div>'),RecipeUserMenus.nbrRecipes+=1}RecipeUserMenus.checkIfEmpty()},RecipeUserMenus.updateCookies=function(){if(0==RecipeUserMenus.menuId){var e={action:"update_shopping_list",security:wpurp_user_menus.nonce,recipes:RecipeUserMenus.recipes,order:RecipeUserMenus.order};jQuery.post(wpurp_user_menus.ajaxurl,e)}},RecipeUserMenus.checkIfEmpty=function(){0===RecipeUserMenus.nbrRecipes?jQuery(".user-menus-no-recipes").show():jQuery(".user-menus-no-recipes").hide()},RecipeUserMenus.groupBy=function(e){var t={action:"user_menus_groupby",security:wpurp_user_menus.nonce,groupby:e,grid:wpurp_user_menu_grid.slug};jQuery.post(wpurp_user_menus.ajaxurl,t,function(e){jQuery(".user-menus-select").select2wpurp("destroy").off().html(e),RecipeUserMenus.initSelect()})},RecipeUserMenus.updateIngredients=function(){for(var e=RecipeUserMenus.order,t=RecipeUserMenus.recipes,n=0,i=0,r=e.length;i<r;i++){var a=t[e[i]].id;void 0===RecipeUserMenus.recipeIngredients[a]&&(n++,RecipeUserMenus.recipeIngredients[a]=[],RecipeUserMenus.getIngredients(a))}0===n&&RecipeUserMenus.updateIngredientsTable()},RecipeUserMenus.getIngredients=function(e){var t={action:"user_menus_get_ingredients",security:wpurp_user_menus.nonce,recipe_id:e};RecipeUserMenus.ajaxGettingIngredients++,jQuery.post(wpurp_user_menus.ajaxurl,t,function(t){RecipeUserMenus.ajaxGettingIngredients--,RecipeUserMenus.recipeIngredients[e]=t,0===RecipeUserMenus.ajaxGettingIngredients&&RecipeUserMenus.updateIngredientsTable()},"json")},RecipeUserMenus.updateIngredientsTable=function(){var e=jQuery("table.user-menus-ingredients");e.find("tbody").empty();for(var t=RecipeUserMenus.recipeIngredients,n=RecipeUserMenus.order,i=RecipeUserMenus.recipes,r=[],a=[],s=236.6,o=0,p=wpurp_unit_conversion.systems.length;o<p;o++){var l=wpurp_unit_conversion.systems[o];-1!=jQuery.inArray("cup",l.units_volume)&&(s=parseFloat(l.cup_type))}for(var o=0,p=n.length;o<p;o++)for(var u=i[n[o]].id,c=i[n[o]].servings_wanted/parseFloat(i[n[o]].servings_original),d=0,h=t[u].length;d<h;d++){var m=t[u][d],f=wpurp_user_menus.ingredient_notes&&m.notes?m.ingredient+" ("+m.notes+")":m.ingredient,g=m.group,w=m.plural||f;void 0===a[f]&&(a[f]=w),void 0===r[g]&&(r[g]=[]),void 0===r[g][f]&&(r[g][f]=[]);var v=m.amount_normalized*c,y=m.unit,b=RecipeUnitConversion.getUnitFromAlias(y);if(void 0!==b&&"1"==wpurp_user_menus.consolidate_ingredients){var _=RecipeUnitConversion.getAbbreviation(b);if("cup"==_){var j=new Qty("1 cup").to("ml").scalar;Math.abs(s-j)>.1&&(v*=s/j)}var C=(E=new Qty(v+" "+_)).toBase();"m3"==C.units()&&(C=C.to("l")),y=C.units(),v=C.scalar}""==y&&(y="wpurp_nounit"),void 0===r[g][f][y]&&(r[g][f][y]=0),r[g][f][y]+=parseFloat(v)}var Q=Object.keys(r);for(Q.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),o=0,p=Q.length;o<p;o++){var k=Q[o],g=r[k],A=jQuery('<tr><td colspan="2"><strong>'+k+"</strong></td></tr>");e.append(A);var R=Object.keys(g);for(R.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),d=0,h=R.length;d<h;d++){var S=g[m=R[d]];for(var y in S){v=S[y];if(isFinite(v)){var x=jQuery("<tr></tr>"),M=RecipeUnitConversion.getUnitFromAlias(y);if("1"==wpurp_user_menus.adjustable_system)U=[RecipeUserMenus.unitSystem];else var U=wpurp_user_menus.static_systems;for(var w=!1,P=0;P<U.length;P++){var T=v,I=y;if("wpurp_nounit"==y)I="";else if(void 0!==M&&("1"==wpurp_user_menus.consolidate_ingredients||!RecipeUnitConversion.isUniversal(M)&&-1==jQuery.inArray(U[P],RecipeUnitConversion.getUnitSystems(M)))){var E=RecipeUnitConversion.convertUnitToSystem(v,M,0,U[P]),T=E.amount;I=RecipeUnitConversion.getUserAbbreviation(E.unit,T)}T=RecipeUnitConversion.formatNumber(T,wpurp_user_menus.fractions),(parseFloat(T)>1||0==parseFloat(T)||""!==I)&&(w=!0),x.append("<td>"+T+" "+I+"</td>")}var N=(N=w?a[m]:m).charAt(0).toUpperCase()+N.slice(1),D="";"1"==wpurp_user_menus.checkboxes&&(D='<input type="checkbox" class="shopping-list-ingredient"> '),x.prepend("<td>"+D+N+"</td>"),e.append(x)}}}}},RecipeUserMenus.changeUnits=function(e){RecipeUserMenus.unitSystem=parseInt(jQuery(e).val()),RecipeUserMenus.updateIngredientsTable()},jQuery(document).ready(function(){jQuery(".wpurp-user-menus").length>0&&RecipeUserMenus.init()}),jQuery(document).ready(function(){jQuery(document).on("click",".wpurp-recipe-add-to-shopping-list",function(e){e.preventDefault(),e.stopPropagation();var t=jQuery(this);if(!t.hasClass("in-shopping-list")){var n=t.data("recipe-id"),i=t.parents(".wpurp-container"),r=0,a=i.find("input.adjust-recipe-servings");0==a.length&&(a=i.find("input.advanced-adjust-recipe-servings")),0!=a.length&&(r=parseInt(a.val()));var s={action:"add_to_shopping_list",security:wpurp_add_to_shopping_list.nonce,recipe_id:n,servings_wanted:r};jQuery.post(wpurp_add_to_shopping_list.ajaxurl,s,function(e){if(t.addClass("in-shopping-list"),t.next().hasClass("recipe-tooltip-content")){var n=t.next().find(".tooltip-shown").first(),i=t.next().find(".tooltip-alt").first(),r=n.html(),a=i.html();n.html(a),i.html(r)}})}})}),jQuery(document).ready(function(){jQuery(".recipe-tooltip.vote-attention").length&&(jQuery(".recipe-tooltip.vote-attention").mouseenter(),jQuery(".vote-attention-message").show(),jQuery(".user-rating-stats").hide(),setTimeout(function(){jQuery(".recipe-tooltip.vote-attention").mouseleave(),setTimeout(function(){jQuery(".vote-attention-message").hide(),jQuery(".user-rating-stats").show()},500)},5e3)),jQuery(document).on("mouseenter",".wpurp-container .user-star-rating.user-can-vote .wpurp-star",function(){var e=jQuery(this).parents(".user-star-rating"),t=e.data("icon-full"),n=e.data("icon-half"),i=e.data("icon-empty");jQuery(this).prevAll().andSelf().removeClass(n).removeClass(i).addClass(t),jQuery(this).nextAll().removeClass(t).removeClass(n).addClass(i)}),jQuery(document).on("mouseleave",".wpurp-container .user-star-rating.user-can-vote .wpurp-star",function(){var e=jQuery(this).parents(".user-star-rating"),t=e.data("icon-full"),n=e.data("icon-half"),i=e.data("icon-empty");jQuery(this).siblings().andSelf().removeClass(t).removeClass(n).removeClass(i).each(function(){jQuery(this).addClass(jQuery(this).data("original-icon"))})}),jQuery(document).on("click",".wpurp-container .user-star-rating.user-can-vote .wpurp-star",function(){var e=jQuery(this).data("star-value"),t=jQuery(this).parents(".user-star-rating"),n=t.data("recipe-id"),i={action:"rate_recipe",security:wpurp_user_ratings.nonce,stars:e,recipe:n};jQuery.post(wpurp_user_ratings.ajax_url,i,function(n){var i=t.nextAll(".recipe-tooltip-content:first"),r=t.data("icon-full"),a=t.data("icon-half"),s=t.data("icon-empty");i.find(".user-rating-votes").text(n.votes),i.find(".user-rating-rating").text(n.rating),i.find(".user-rating-current-rating").text(e),t.find(".wpurp-star").each(function(e,t){var i=jQuery(t);i.removeClass(r).removeClass(a).removeClass(s),e<n.stars?i.addClass(r).data("original-icon",r):e==n.stars&&1==n.half_star?i.addClass(a).data("original-icon",a):i.addClass(s).data("original-icon",s)})},"json")})}),jQuery(document).ready(function(){function e(e){if(!tinyMCE.activeEditor||tinyMCE.activeEditor.isHidden()){var t=c.val();c.val(t+e)}else tinyMCE.execCommand("mceInsertContent",!1,e)}function t(){var e=jQuery("#recipe-ingredients tr.ingredient-group-stub"),t=jQuery("#recipe-ingredients tr:last");e.clone(!0).insertAfter(t).removeClass("ingredient-group-stub").addClass("ingredient-group"),jQuery(".ingredient-groups-disabled").hide(),jQuery(".ingredient-groups-enabled").show(),n()}function n(){1==jQuery(".ingredient-group").length?(jQuery("#recipe-ingredients .ingredient .ingredients_group").val(""),jQuery(".ingredient-groups-disabled").show(),jQuery(".ingredient-groups-enabled").hide()):(jQuery("#recipe-ingredients tr.ingredient").each(function(e,t){var n=jQuery(t).prevAll(".ingredient-group:first").find(".ingredient-group-label").val();void 0===n&&(n=jQuery(".ingredient-group-first").find(".ingredient-group-label").val()),jQuery(t).find(".ingredients_group").val(n)}),jQuery(".ingredient-groups-disabled").hide(),jQuery(".ingredient-groups-enabled").show())}function i(){var e=jQuery("#recipe-instructions tr.instruction-group-stub"),t=jQuery("#recipe-instructions tr:last");e.clone(!0).insertAfter(t).removeClass("instruction-group-stub").addClass("instruction-group"),jQuery(".instruction-groups-disabled").hide(),jQuery(".instruction-groups-enabled").show(),r()}function r(){1==jQuery(".instruction-group").length?(jQuery("#recipe-instructions .instruction .instructions_group").val(""),jQuery(".instruction-groups-disabled").show(),jQuery(".instruction-groups-enabled").hide()):(jQuery("#recipe-instructions tr.instruction").each(function(e,t){var n=jQuery(t).prevAll(".instruction-group:first").find(".instruction-group-label").val();void 0===n&&(n=jQuery(".instruction-group-first").find(".instruction-group-label").val()),jQuery(t).find(".instructions_group").val(n)}),jQuery(".instruction-groups-disabled").hide(),jQuery(".instruction-groups-enabled").show())}function a(){var e=jQuery("#recipe-ingredients tr.ingredient").length,t=jQuery("#recipe-ingredients tr:last"),i=jQuery("#recipe-ingredients tr.ingredient:last");i.find("input").attr("placeholder","");var r=i.clone(!0);r.insertAfter(t).find("input, select").val("").attr("name",function(t,n){return n.replace(/(\d+)/,e)}).attr("id",function(t,n){return n.replace(/(\d+)/,e)}).parent().find("input.ingredients_name").attr("onfocus",function(t,n){return n.replace(/(\d+)/,e)}),r.find("span.ingredients-delete").show(),s(),jQuery("#recipe-ingredients tr:last .ingredients_amount").focus(),n()}function s(){jQuery("#recipe-ingredients .ingredients_notes").unbind("keydown").last().bind("keydown",function(e){9==(e.keyCode||e.which)&&(e.preventDefault(),a())})}function o(){jQuery("#recipe-ingredients tr.ingredient").each(function(e){jQuery(this).find("input").attr("name",function(t,n){return n.replace(/(\d+)/,e)}).attr("id",function(t,n){return n.replace(/(\d+)/,e)}).parent().find("input.ingredients_name").attr("onfocus",function(t,n){return n.replace(/(\d+)/,e)})})}function p(){var e=jQuery("#recipe-instructions tr.instruction").length,t=jQuery("#recipe-instructions tr.instruction:last").clone(!0);t.insertAfter("#recipe-instructions tr:last").find("textarea").val("").attr("name",function(t,n){return n.replace(/(\d+)/,e)}).attr("id",function(t,n){return n.replace(/(\d+)/,e)}),t.find(".recipe_instructions_remove_image").addClass("wpurp-hide"),t.find(".recipe_instructions_add_image").removeClass("wpurp-hide"),t.find(".recipe_instructions_image").val(""),t.find(".recipe_instructions_thumbnail").attr("src",wpurp_recipe_form.coreUrl+"/img/image_placeholder.png"),t.find(".recipe_instructions_image").attr("name",function(t,n){return n.replace(/(\d+)/,e)}),t.find(".instructions_group").attr("name",function(t,n){return n.replace(/(\d+)/,e)}).attr("id",function(t,n){return n.replace(/(\d+)/,e)}),t.find("span.instructions-delete").show(),l(),jQuery("#recipe-instructions tr:last textarea").focus(),r()}function l(){jQuery("#recipe-instructions textarea").unbind("keydown").last().bind("keydown",function(e){9==(e.keyCode||e.which)&&0==e.shiftKey&&1==jQuery("#recipe-instructions tr:last").find("textarea").is(":focus")&&(e.preventDefault(),p())})}function u(){jQuery("#recipe-instructions tr.instruction").each(function(e){jQuery(this).find("textarea").attr("name",function(t,n){return n.replace(/(\d+)/,e)}).attr("id",function(t,n){return n.replace(/(\d+)/,e)}),jQuery(this).find(".recipe_instructions_image").attr("name",function(t,n){return n.replace(/(\d+)/,e)}),jQuery(this).find(".instructions_group").attr("name",function(t,n){return n.replace(/(\d+)/,e)}).attr("id",function(t,n){return n.replace(/(\d+)/,e)})})}jQuery("#insert-recipe-shortcode").on("click",function(){e("[recipe]")}),jQuery("#insert-nutrition-shortcode").on("click",function(){e("[nutrition-label]")});var c=jQuery("textarea#content");jQuery("#recipe-ingredients tr.ingredient:first").find("span.ingredients-delete").hide(),jQuery("#recipe-instructions tr.instruction:first").find("span.instructions-delete").hide();var d=jQuery("select#recipe_rating");if(1==d.length){for(var h=d.find("option:selected").val(),m='<img src="'+wpurp_recipe_form.coreUrl+'/img/star.png" width="15" height="14" />',f='<img src="'+wpurp_recipe_form.coreUrl+'/img/star_grey.png" width="15" height="14" />',g='<div id="recipe_rating_star_selection">',w=1;w<=5;w++)g+='<span class="star" id="recipe-star-'+w+'" data-star="'+w+'">',g+=h>=w?m:f,g+="</span>";g+="</div>",d.hide().after(g),jQuery(document).on("click","#recipe_rating_star_selection .star",function(){var e=jQuery(this);d.val()==e.data("star")?(e.siblings().andSelf().html(f),d.val(0)):(e.prevAll().andSelf().html(m),e.nextAll().html(f),d.val(e.data("star")))})}n(),jQuery("#ingredients-add-group").on("click",function(e){e.preventDefault(),t()});var v;jQuery(".ingredient-group-label").on("input",function(){window.clearTimeout(v),v=window.setTimeout(function(){n()},500)}),jQuery(".ingredient-group-delete").on("click",function(){jQuery(this).parents("tr").remove(),n()}),r(),jQuery("#instructions-add-group").on("click",function(e){e.preventDefault(),i()});var y;jQuery(".instruction-group-label").on("input",function(){window.clearTimeout(y),y=window.setTimeout(function(){r()},500)}),jQuery(".instruction-group-delete").on("click",function(){jQuery(this).parents("tr").remove(),r()}),jQuery("#recipe-ingredients tbody").sortable({opacity:.6,revert:!0,cursor:"move",handle:".sort-handle",update:function(){s(),n(),o()}}),jQuery("#recipe-ingredients").on("keydown",function(e){9==(e.keyCode||e.which)&&jQuery("ul.ac_results").hide()}),jQuery("#recipe-ingredients").on("click",function(){jQuery("ul.ac_results").hide()}),jQuery(".ingredients-delete").on("click",function(){jQuery(this).parents("tr").remove(),s(),o()}),jQuery("#ingredients-add").on("click",function(e){e.preventDefault(),a()}),s(),jQuery("#recipe-instructions tbody").sortable({opacity:.6,revert:!0,cursor:"move",handle:".sort-handle",update:function(){l(),r(),u()}}),jQuery(".instructions-delete").on("click",function(){jQuery(this).parents("tr").remove(),l(),u()}),jQuery("#instructions-add").on("click",function(e){e.preventDefault(),p()}),l(),jQuery(".recipe_thumbnail_add_image").on("click",function(e){e.preventDefault();var t=jQuery(this);if(image=t.siblings(".recipe_thumbnail_image"),preview=t.siblings(".recipe_thumbnail"),"function"==typeof wp.media)var n=wp.media({title:"Insert Media",button:{text:"Add featured image"},multiple:!1}).on("select",function(){var e=n.state().get("selection").first().toJSON();jQuery(preview).attr("src",e.url),jQuery(image).val(e.id).trigger("change")}).open();else post_id=t.attr("rel"),tb_show(t.attr("value"),"wp-admin/media-upload.php?post_id="+post_id+"&type=image&TB_iframe=1"),window.send_to_editor=function(e){img=jQuery("img",e),imgurl=img.attr("src"),classes=img.attr("class"),id=classes.replace(/(.*?)wp-image-/,""),image.val(id).trigger("change"),preview.attr("src",imgurl),tb_remove()}}),jQuery(".recipe_thumbnail_remove_image").on("click",function(e){e.preventDefault();var t=jQuery(this);t.siblings(".recipe_thumbnail_image").val("").trigger("change"),t.siblings(".recipe_thumbnail").attr("src",wpurp_recipe_form.coreUrl+"/img/image_placeholder.png")}),jQuery(".recipe_thumbnail_image").on("change",function(){var e=jQuery(this);""==e.val()?(e.siblings(".recipe_thumbnail_add_image").removeClass("wpurp-hide"),e.siblings(".recipe_thumbnail_remove_image").addClass("wpurp-hide")):(e.siblings(".recipe_thumbnail_remove_image").removeClass("wpurp-hide"),e.siblings(".recipe_thumbnail_add_image").addClass("wpurp-hide"))}),jQuery(".recipe_alternate_image_add").on("click",function(e){e.preventDefault();var t=jQuery(this);if(image=t.siblings("#recipe_alternate_image"),preview=t.siblings(".recipe_alternate_image"),"function"==typeof wp.media)var n=wp.media({title:"Insert Media",button:{text:"Add alternate image"},multiple:!1}).on("select",function(){var e=n.state().get("selection").first().toJSON();jQuery(preview).attr("src",e.url),jQuery(image).val(e.id).trigger("change")}).open();else post_id=t.attr("rel"),tb_show(t.attr("value"),"wp-admin/media-upload.php?post_id="+post_id+"&type=image&TB_iframe=1"),window.send_to_editor=function(e){img=jQuery("img",e),imgurl=img.attr("src"),classes=img.attr("class"),id=classes.replace(/(.*?)wp-image-/,""),image.val(id).trigger("change"),preview.attr("src",imgurl),tb_remove()}}),jQuery(".recipe_alternate_image_remove").on("click",function(e){e.preventDefault();var t=jQuery(this);t.siblings("#recipe_alternate_image").val("").trigger("change"),t.siblings(".recipe_alternate_image").attr("src",wpurp_recipe_form.coreUrl+"/img/image_placeholder.png")}),jQuery("#recipe_alternate_image").on("change",function(){var e=jQuery(this);""==e.val()?(e.siblings(".recipe_alternate_image_add").removeClass("wpurp-hide"),e.siblings(".recipe_alternate_image_remove").addClass("wpurp-hide")):(e.siblings(".recipe_alternate_image_remove").removeClass("wpurp-hide"),e.siblings(".recipe_alternate_image_add").addClass("wpurp-hide"))}),jQuery(".recipe_instructions_add_image").on("click",function(e){e.preventDefault();var t=jQuery(this);if(image=t.siblings(".recipe_instructions_image"),preview=t.siblings(".recipe_instructions_thumbnail"),"function"==typeof wp.media)var n=wp.media({title:"Insert Media",button:{text:"Add instruction image"},multiple:!1}).on("select",function(){var e=n.state().get("selection").first().toJSON();jQuery(preview).attr("src",e.url),jQuery(image).val(e.id).trigger("change")}).open();else post_id=t.attr("rel"),tb_show(t.attr("value"),"wp-admin/media-upload.php?post_id="+post_id+"&type=image&TB_iframe=1"),window.send_to_editor=function(e){img=jQuery("img",e),imgurl=img.attr("src"),classes=img.attr("class"),id=classes.replace(/(.*?)wp-image-/,""),image.val(id).trigger("change"),preview.attr("src",imgurl),tb_remove()}}),jQuery(".recipe_instructions_remove_image").on("click",function(e){e.preventDefault();var t=jQuery(this);t.siblings(".recipe_instructions_image").val("").trigger("change"),t.siblings(".recipe_instructions_thumbnail").attr("src",wpurp_recipe_form.coreUrl+"/img/image_placeholder.png")}),jQuery(".recipe_instructions_image").on("change",function(){var e=jQuery(this);""==e.val()?(e.siblings(".recipe_instructions_add_image").removeClass("wpurp-hide"),e.siblings(".recipe_instructions_remove_image").addClass("wpurp-hide")):(e.siblings(".recipe_instructions_remove_image").removeClass("wpurp-hide"),e.siblings(".recipe_instructions_add_image").addClass("wpurp-hide"))}),jQuery("#wpurp-insert-recipe").on("click",function(){var e="[ultimate-recipe id=";e+=jQuery("#wpurp-recipe").find("option:selected").val(),e+="]",tinyMCE.activeEditor.execCommand("mceInsertContent",0,e),tinyMCE.activeEditor.windowManager.close()}),jQuery(".wpurp-preview-select").on("change",function(){var e=jQuery(this).siblings(".wpurp-preview-img").children("img").attr("alt");e.split("-").length>1&&(e=e.split("-")[0]+"-");var t=jQuery(this).siblings(".wpurp-preview-img").children("img").attr("src"),n=e+jQuery(this).val()+".jpg",i=t.split("/");i=i[i.length-1],n=t.replace(i,n),jQuery(this).siblings(".wpurp-preview-img").children("img").attr("src",n)}),jQuery(".wpurp-file-upload").on("click",function(e){e.preventDefault();var t=jQuery(this);if(preview=t.siblings("img"),fieldname=preview.attr("class"),image=t.siblings("."+fieldname+"_image"),"function"==typeof wp.media)var n=wp.media({title:"Insert Media",button:{text:"Add image"},multiple:!1}).on("select",function(){var e=n.state().get("selection").first().toJSON();jQuery(preview).attr("src",e.url),jQuery(image).val(e.id)}).open();else post_id=t.attr("rel"),tb_show(t.attr("value"),"wp-admin/media-upload.php?post_id="+post_id+"&type=image&TB_iframe=1"),window.send_to_editor=function(e){img=jQuery("img",e),imgurl=img.attr("src"),classes=img.attr("class"),id=classes.replace(/(.*?)wp-image-/,""),image.val(id).trigger("change"),preview.attr("src",imgurl),tb_remove()};t.addClass("wpurp-hide"),t.siblings(".wpurp-file-remove").removeClass("wpurp-hide")}),jQuery(".wpurp-file-remove").on("click",function(e){e.preventDefault();var t=jQuery(this);preview=t.siblings("img"),fieldname=preview.attr("class"),t.siblings("."+fieldname+"_image").val(""),t.siblings("."+fieldname).attr("src",""),t.siblings(".wpurp-file-upload").removeClass("wpurp-hide"),t.addClass("wpurp-hide")}),jQuery(".wpurp-recipe-video-add").on("click",function(e){var t=jQuery(this).parents(".recipe-video-container"),n=wp.media({frame:"video",state:"video-details"});n.on("update",function(){var e=n.state().media.attachment;e&&(t.find(".wpurp-recipe-video-preview").html(""),""!==e.attributes.thumb.src&&t.find(".wpurp-recipe-video-preview").append('<img src="'+e.attributes.thumb.src+'" />'),t.find("#recipe_video_id").val(e.attributes.id),t.find("#recipe_video_thumb").val(e.attributes.thumb.src),t.find(".wpurp-recipe-video-add").addClass("hidden"),t.find(".wpurp-recipe-video-remove").removeClass("hidden"))}),n.open()}),jQuery(".wpurp-recipe-video-remove").on("click",function(e){var t=jQuery(this).parents(".recipe-video-container");t.find(".wpurp-recipe-video-preview").html(""),t.find("#recipe_video_id").val(""),t.find("#recipe_video_thumb").val(""),t.find(".wpurp-recipe-video-add").removeClass("hidden"),t.find(".wpurp-recipe-video-remove").addClass("hidden")})}),jQuery(document).ready(function(){jQuery("#wpurp_user_submission_form select[multiple]").select2wpurp({allowClear:!0,width:"off",dropdownAutoWidth:!1}),jQuery(".user-submissions-delete-recipe").on("click",function(){var e=jQuery(this);if(confirm(wpurp_user_submissions.confirm_message+" "+e.data("title"))){e.parent("li").remove();var t={action:"user_submissions_delete_recipe",security:wpurp_user_submissions.nonce,recipe:e.data("id")};jQuery.post(wpurp_user_submissions.ajaxurl,t)}})});var RecipeMealPlanner=RecipeMealPlanner||{};RecipeMealPlanner.loader='<div class="wpurp-loader"><div></div><div></div><div></div></div>',RecipeMealPlanner.templates=[],RecipeMealPlanner.ajaxUpdateTimer=null,RecipeMealPlanner.wait_for_load=!1,RecipeMealPlanner.init=function(e){if(e.hasClass("wpurp-meal-plan-shortcode"))t="saved-meal-plan";else if(e.hasClass("wpurp-view-meal-plan"))t="view-meal-planner";else var t="meal-planner";var n=e.find(".wpurp-meal-plan-calendar-container"),i=e.find(".wpurp-meal-plan-shopping-list-container"),r=e.hasClass("wpurp-meal-plan-mobile");jQuery(".wpurp-meal-plan-calendar-container").each(function(){RecipeMealPlanner.updateNutritional(jQuery(this))}),n.on("click",".wpurp-meal-plan-date-change:not(.wpurp-disabled)",function(){var e=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),n=jQuery(this).hasClass("wpurp-meal-plan-date-prev");RecipeMealPlanner.updateCalendar(e,n,t)}),n.swipe({swipeLeft:function(e,i,r,a,s){n.find(".wpurp-meal-plan-date-next").length>0&&RecipeMealPlanner.updateCalendar(n,!1,t)},swipeRight:function(e,i,r,a,s){n.find(".wpurp-meal-plan-date-prev").length>0&&RecipeMealPlanner.updateCalendar(n,!0,t)},excludedElements:"button, input, select, textarea, a, .noSwipe, .ui-sortable .wpurp-meal-plan-recipe",threshold:75,cancelThreshold:10,maxTimeThreshold:500}),n.on("click",".wpurp-meal-plan-add-meal-planner",function(e){e.preventDefault();var t=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),n=jQuery(this),i=t.find(".wpurp-meal-plan-calendar").data("meal-plan-id"),r=(new Date).toJSON().substring(0,10);RecipeMealPlanner.getDate(n,r,function(e){if(e){var t={action:"meal_planner_add_from_meal_plan",security:wpurp_meal_planner.nonce,id:i,date:e},r=jQuery(RecipeMealPlanner.loader);n.replaceWith(r),jQuery.post(wpurp_meal_planner.ajaxurl,t,function(e){var t=jQuery('<span class="wpurp-meal-plan-text"></span>');t.html(wpurp_meal_planner.textAddToMealPlan),r.replaceWith(t)})}})}),n.on("click",".wpurp-meal-plan-recipe",function(e){if(e.stopPropagation(),!RecipeMealPlanner.wait_for_load){var t=jQuery(this),n=t.data("type"),i=t.hasClass("wpurp-recipe-selected"),r=t.parents(".wpurp-meal-plan-calendar-container");if(e.shiftKey||e.ctrlKey||e.metaKey){t.toggleClass("wpurp-recipe-selected");var a=r.find(".wpurp-meal-plan-selected-recipe-details"),s=r.find(".wpurp-meal-plan-selected-recipe-details-container");r.find(".recipe-selected").hide(),r.find(".recipe-selected-multiple").hide(),r.find(".recipe-not-selected").hide(),r.find(".recipe-details-loader").hide(),s.slideUp(200,function(){a.hide()}),selected_recipes=r.find(".wpurp-recipe-selected"),selected_recipes.length>0?r.find(".recipe-selected-multiple").show().find(".selected-number").text(selected_recipes.length):r.find(".recipe-not-selected").show()}else if(r.find(".wpurp-recipe-selected").each(function(){jQuery(this).removeClass("wpurp-recipe-selected")}),i)r.find(".wpurp-recipe-close").click();else{RecipeMealPlanner.editingRecipe&&RecipeMealPlanner.editingRecipe.removeClass("wpurp-recipe-selected"),RecipeMealPlanner.editingRecipe=t,t.addClass("wpurp-recipe-selected");var o=t.data("recipe"),p=t.data("quantity"),l=t.data("servings"),u=t.find(".wpurp-meal-plan-recipe-title").text(),a=r.find(".wpurp-meal-plan-selected-recipe-details"),s=r.find(".wpurp-meal-plan-selected-recipe-details-container");r.find(".recipe-selected").hide().find(".recipe-title").text(u),r.find(".recipe-selected-multiple").hide(),r.find(".recipe-not-selected").hide(),r.find(".recipe-details-loader").show(),RecipeMealPlanner.wait_for_load=!0,s.slideUp(200,function(){jQuery(".wpurp-recipe-close:visible").click(),a.hide(),RecipeMealPlanner.getTemplate(n,o,function(e){RecipeMealPlanner.wait_for_load=!1,r.find(".recipe-selected").show(),r.find(".recipe-details-loader").hide(),s.html(e),s.find(".adjust-recipe-quantity, .advanced-adjust-recipe-quantity").val(p).trigger("change"),s.find(".adjust-recipe-servings, .advanced-adjust-recipe-servings").val(l).trigger("change"),a.show(),s.slideDown(200,function(){void 0!==window.WPURP_Responsive&&WPURP_Responsive.checkBreakpointOfAllElements()})})})}}}),n.on("click",".wpurp-recipe-close",function(){var e=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),t=e.find(".wpurp-meal-plan-selected-recipe-details"),n=e.find(".wpurp-meal-plan-selected-recipe-details-container");e.find(".recipe-selected").hide(),e.find(".recipe-selected-multiple").hide(),e.find(".recipe-not-selected").show(),e.find(".recipe-details-loader").hide(),RecipeMealPlanner.editingRecipe.removeClass("wpurp-recipe-selected"),n.slideUp(200,function(){t.hide()})}),n.on("keyup change",".wpurp-meal-plan-selected-recipe-details .adjust-recipe-quantity, .wpurp-meal-plan-selected-recipe-details .advanced-adjust-recipe-quantity",function(e){var t=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),n=jQuery(this).val();(isNaN(n)||n<=0)&&(n=1),RecipeMealPlanner.editingRecipe.data("quantity",n),RecipeMealPlanner.editingRecipe.find(".wpurp-meal-plan-recipe-quantity").text(n),RecipeMealPlanner.saveMenu(t),RecipeMealPlanner.updateNutritional(t)}),n.on("keyup change",".wpurp-meal-plan-selected-recipe-details .adjust-recipe-servings, .wpurp-meal-plan-selected-recipe-details .advanced-adjust-recipe-servings",function(e){var t=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),n=jQuery(this).val();(isNaN(n)||n<=0)&&(n=1),RecipeMealPlanner.editingRecipe.data("servings",n),RecipeMealPlanner.editingRecipe.find(".wpurp-meal-plan-recipe-servings").text("("+n+")"),RecipeMealPlanner.saveMenu(t),RecipeMealPlanner.updateNutritional(t)}),n.on("click",".wpurp-recipe-edit-multiple",function(){var e=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),t=jQuery(this).parents(".wpurp-meal-plan-header").find(".recipe-selected-multiple");RecipeMealPlanner.getInput(t,"number","2",function(t){!isNaN(t)&&t>0&&(e.find(".wpurp-recipe-selected").each(function(){jQuery(this).data("servings",t),jQuery(this).find(".wpurp-meal-plan-recipe-servings").text("("+t+")")}),RecipeMealPlanner.saveMenu(e),RecipeMealPlanner.updateNutritional(e))})}),RecipeMealPlanner.printRecipes=function(e){var t=[],n=[],i={};jQuery(e).parents(".wpurp-meal-plan").find(".wpurp-meal-plan-calendar-container").find(".wpurp-meal-plan-recipe").each(function(){if("recipe"==jQuery(this).data("type")){var e=parseInt(jQuery(this).data("recipe")),r=parseInt(jQuery(this).data("servings")),a=e+"-"+r;-1===jQuery.inArray(e,t)&&(i[e]=[]),-1===jQuery.inArray(a,n)&&(t.push(e),n.push(a),i[e].push(r))}});var r=window.open(wpurp_meal_planner.printUrl+"meal_plan_recipes"),a={action:"get_recipe_template",security:wpurp_meal_planner.nonce_print,recipe_ids:t};jQuery.post(wpurp_meal_planner.ajaxurl,a,function(e){for(var t="",n=0,a=e.templates.length;n<a;n++)t+=e.templates[n],t+="<hr>";t=t.slice(0,-4),RecipeMealPlanner.printContent(r,t,i)},"json")},RecipeMealPlanner.printPlan=function(e){var t=jQuery(e).parents(".wpurp-meal-plan"),n=window.open(wpurp_meal_planner.printUrl+"meal_plan");RecipeMealPlanner.printContent(n,t.html(),!1)},RecipeMealPlanner.printShoppingList=function(e){var t=jQuery(e).parents(".wpurp-meal-plan-shopping-list-container"),n=window.open(wpurp_meal_planner.printUrl+"meal_plan_shopping_list");RecipeMealPlanner.printContent(n,t.html(),!1)},RecipeMealPlanner.printContentBody="",RecipeMealPlanner.printContent=function(e,t,n){RecipeMealPlanner.printContentBody=e.document.getElementsByTagName("body"),null==RecipeMealPlanner.printContentBody[0]?setTimeout(RecipeMealPlanner.printContent(e,t),10):(e.document.getElementsByTagName("body")[0].innerHTML=t,n&&e.mealPlannerPrintSetServings(n),e.onload=function(){e.document.getElementsByTagName("body")[0].innerHTML=t,n&&e.mealPlannerPrintSetServings(n),setTimeout(function(){e.print()},200)})},n.on("click",".wpurp-meal-plan-shopping-list",function(e){e.preventDefault();var t=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),n=t.parents(".wpurp-meal-plan").find(".wpurp-meal-plan-shopping-list-container"),i=t.find(".wpurp-meal-plan-calendar").data("meal-plan-id"),r=""+t.find(".wpurp-meal-plan-calendar").data("start-date"),a=""+t.find(".wpurp-meal-plan-calendar").data("end-date"),s=t.find(".wpurp-meal-plan-calendar").data("nbr-days"),o=new Date(r.substring(0,4)+"-"+r.substring(4,6)+"-"+r.substring(6,8));if(a){o=new Date("2000-01-01");var p=new Date(a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6,8))}else(p=new Date(o)).setDate(p.getDate()+s-1);var l=o.toJSON().substring(0,10),u=p.toJSON().substring(0,10);RecipeMealPlanner.getDates(jQuery(this),l,u,function(e,t,r){e&&t&&n.slideUp(200,function(){var a={action:"meal_planner_shopping_list",security:wpurp_meal_planner.nonce,id:i,from:e,to:t,unit_system:r},s=jQuery('<tr><td colspan="2">'+RecipeMealPlanner.loader+"</td></tr>"),o=n.find("tbody"),p=n.find(".wpurp-shopping-list-group-placeholder"),l=n.find(".wpurp-shopping-list-ingredient-placeholder");o.empty().html(s),n.slideDown(400,function(){jQuery.post(wpurp_meal_planner.ajaxurl,a,function(e){var t=RecipeMealPlanner.generateShoppingList(e.ingredients,e.unit_system);t.append(p),t.append(l),o.replaceWith(t),n.find("tbody").sortable({cancel:"input,i",handle:".wpurp-shopping-list-ingredient-name, .wpurp-shopping-list-group-name",helper:function(e,t){return t.children().each(function(){jQuery(this).width(jQuery(this).width())}),t}})},"json")})})})}),r||i.on("hover",".wpurp-meal-plan-shopping-list tbody tr",function(e){"mouseenter"==e.type?jQuery(this).find(".wpurp-meal-plan-actions").show():jQuery(this).find(".wpurp-meal-plan-actions").hide()}),i.on("click",".wpurp-shopping-list-close",function(){jQuery(this).parents(".wpurp-meal-plan-shopping-list-container").slideUp(200)}),i.on("click",".wpurp-group-edit:not(.wpurp-disabled)",function(){var e=jQuery(this);e.addClass("wpurp-disabled");var t=e.parents(".wpurp-shopping-list-group").find(".wpurp-shopping-list-group-name");RecipeMealPlanner.getInput(t,"text",t.text(),function(n){e.removeClass("wpurp-disabled"),n&&t.text(n)})}),i.on("click",".wpurp-group-delete:not(.wpurp-disabled)",function(){jQuery(this).closest(".wpurp-shopping-list-group").remove()}),i.on("click",".wpurp-ingredient-edit:not(.wpurp-disabled)",function(){var e=jQuery(this);e.addClass("wpurp-disabled");var t=e.parents(".wpurp-shopping-list-ingredient").find(".wpurp-shopping-list-ingredient-name"),n=e.parents(".wpurp-shopping-list-ingredient").find(".wpurp-shopping-list-ingredient-quantity"),i=e.parents(".wpurp-shopping-list-ingredient").find(".wpurp-shopping-list-ingredient-checkbox");n.hide(),i.hide(),RecipeMealPlanner.getTwoInput(t,t.text(),n.text(),function(r,a){e.removeClass("wpurp-disabled"),(r||a)&&(t.text(r),n.text(a)),n.show(),i.show()})}),i.on("click",".wpurp-ingredient-delete:not(.wpurp-disabled)",function(){jQuery(this).closest(".wpurp-shopping-list-ingredient").remove()}),i.on("click",".wpurp-meal-plan-add-group",function(e){e.preventDefault();var t=jQuery(this).parents(".wpurp-meal-plan-shopping-list-container");RecipeMealPlanner.getInput(jQuery(this),"text","",function(e){if(e){var n=t.find(".wpurp-shopping-list-group-placeholder");n.clone().insertBefore(n).addClass("wpurp-shopping-list-group").removeClass("wpurp-shopping-list-group-placeholder").find(".wpurp-shopping-list-group-name").text(e)}})}),i.on("click",".wpurp-meal-plan-add-ingredient",function(e){e.preventDefault();var t=jQuery(this).parents(".wpurp-meal-plan-shopping-list-container");RecipeMealPlanner.getTwoInput(jQuery(this),"","",function(e,n){if(e||n){var i=t.find(".wpurp-shopping-list-ingredient-placeholder").clone();i.insertBefore(jQuery(".wpurp-shopping-list-group-placeholder")).addClass("wpurp-shopping-list-ingredient").removeClass("wpurp-shopping-list-ingredient-placeholder").find(".wpurp-shopping-list-ingredient-name").text(e),i.find(".wpurp-shopping-list-ingredient-quantity").text(n)}})}),i.on("change",".wpurp-shopping-list-ingredient-checkbox",function(e){var t=jQuery(this);t.is(":checked")?t.closest("tr").addClass("ingredient-checked"):t.closest("tr").removeClass("ingredient-checked")}),i.on("click",".wpurp-meal-plan-shopping-list-save",function(e){e.preventDefault();var t=[],n={name:"",ingredients:[]};jQuery(this).parents(".wpurp-meal-plan-shopping-list-container").find(".wpurp-shopping-list-group, .wpurp-shopping-list-ingredient").each(function(e){var i=jQuery(this);i.hasClass("wpurp-shopping-list-group")?(e>0&&t.push(n),n={name:i.find(".wpurp-shopping-list-group-name").text(),ingredients:[]}):n.ingredients.push({name:i.find(".wpurp-shopping-list-ingredient-name").text(),quantity:i.find(".wpurp-shopping-list-ingredient-quantity").text()})}),t.push(n);var i={action:"meal_planner_shopping_list_save",security:wpurp_meal_planner.nonce,shopping_list:t};jQuery.ajax({type:"POST",async:!1,url:wpurp_meal_planner.ajaxurl,data:i,success:function(e){window.open(e)}})}),"meal-planner"==t&&(e.hasClass("wpurp-meal-plan-shortcode")||RecipeMealPlanner.initSelect(!0),jQuery("#wpurp-meal-plan-leftovers").on("change",function(){var e=jQuery(this),t=e.is(":checked");e.parents(".wpurp-meal-plan-add-recipe-container").find(".wpurp-meal-plan-recipe").each(function(){var e=jQuery(this),n=e.data("name");t?e.find(".wpurp-meal-plan-recipe-title").text(n+" ("+wpurp_meal_planner.textLeftovers+")"):e.find(".wpurp-meal-plan-recipe-title").text(n),e.data("leftovers",t)})}),jQuery(".wpurp-meal-plan-group-by").on("click",function(e){e.preventDefault();var t=jQuery(this);t.hasClass("wpurp-meal-plan-group-by-selected")||(RecipeMealPlanner.groupBy(jQuery(this).data("groupby")),t.siblings(".wpurp-meal-plan-group-by-selected").removeClass("wpurp-meal-plan-group-by-selected"),t.addClass("wpurp-meal-plan-group-by-selected"))}),jQuery(".wpurp-meal-plan-recipe-container").sortable({connectWith:".wpurp-meal-plan-recipe-list",placeholder:"wpurp-meal-plan-recipe-placeholder",stop:function(e,t){jQuery(t.item).parent().hasClass("wpurp-meal-plan-recipe-container")||(jQuery(".wpurp-meal-plan-recipe-container").append(t.item.clone(!0)),RecipeMealPlanner.saveMenu(n),RecipeMealPlanner.updateNutritional(n))}}),RecipeMealPlanner.initSortable(n),r||n.on("hover",".wpurp-meal-plan-course .wpurp-meal-plan-header",function(e){"mouseenter"==e.type?jQuery(this).find(".wpurp-meal-plan-actions").show():jQuery(this).find(".wpurp-meal-plan-actions").hide()}),n.on("click",".wpurp-course-move:not(.wpurp-disabled)",function(){var e=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),t=jQuery(this),n=t.closest(".wpurp-meal-plan-course");t.hasClass("wpurp-course-up")?n.insertBefore(n.prev()):n.insertAfter(n.next()),RecipeMealPlanner.checkCourseActions(),RecipeMealPlanner.saveMenu(e)}),n.on("click",".wpurp-course-edit:not(.wpurp-disabled)",function(){var e=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),t=jQuery(this);t.addClass("wpurp-disabled");var n=t.parents(".wpurp-meal-plan-header").find(".wpurp-meal-plan-course-name");RecipeMealPlanner.getInput(n,"text",n.text(),function(i){t.removeClass("wpurp-disabled"),i&&(n.text(i),RecipeMealPlanner.saveMenu(e))})}),n.on("click",".wpurp-course-delete:not(.wpurp-disabled)",function(){var e=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),t=jQuery(this);t.addClass("wpurp-disabled");var n=t.parents(".wpurp-meal-plan-header").find(".wpurp-meal-plan-course-name");RecipeMealPlanner.getConfirm(n,wpurp_meal_planner.textDeleteCourse,function(n){t.removeClass("wpurp-disabled"),n&&(t.closest(".wpurp-meal-plan-course").remove(),RecipeMealPlanner.saveMenu(e),RecipeMealPlanner.updateNutritional(e))})}),n.on("click",".wpurp-meal-plan-add-course",function(e){e.preventDefault();var t=jQuery(this).parents(".wpurp-meal-plan-calendar-container");RecipeMealPlanner.getInput(jQuery(this),"text","",function(e){if(e){var n=t.find(".wpurp-meal-plan-course-placeholder"),i=n.clone();i.insertBefore(n).addClass("wpurp-meal-plan-course").removeClass("wpurp-meal-plan-course-placeholder").data("course",e).find(".wpurp-meal-plan-course-name").text(e),i.find(".wpurp-meal-plan-recipe-list").sortable({connectWith:".wpurp-meal-plan-recipe-list",placeholder:"wpurp-meal-plan-recipe-placeholder",stop:function(){RecipeMealPlanner.saveMenu(t)}}),RecipeMealPlanner.checkCourseActions(),RecipeMealPlanner.saveMenu(t)}})}),n.on("click",".wpurp-recipe-delete",function(){var e=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),t=jQuery(this),n=t.parents(".wpurp-meal-plan-header").find(".recipe-selected");RecipeMealPlanner.getConfirm(n,wpurp_meal_planner.textDeleteRecipe,function(n){n&&(RecipeMealPlanner.editingRecipe.remove(),t.siblings(".wpurp-recipe-close").click(),RecipeMealPlanner.saveMenu(e),RecipeMealPlanner.updateNutritional(e))})}),n.on("click",".wpurp-recipe-delete-multiple",function(){var e=jQuery(this).parents(".wpurp-meal-plan-calendar-container"),t=jQuery(this).parents(".wpurp-meal-plan-header").find(".recipe-selected-multiple");RecipeMealPlanner.getConfirm(t,wpurp_meal_planner.textDeleteRecipes,function(t){t&&(e.find(".wpurp-recipe-selected").remove(),e.find(".recipe-selected-multiple").hide(),e.find(".recipe-not-selected").show(),RecipeMealPlanner.saveMenu(e),RecipeMealPlanner.updateNutritional(e))})}))},RecipeMealPlanner.updateCalendar=function(e,t,n){var i="view-meal-planner"==n?jQuery(".wpurp-view-meal-plan"):jQuery(".wpurp-meal-plan"),r=jQuery(RecipeMealPlanner.loader),a=e.find(".wpurp-meal-plan-calendar").data("admin"),s=e.find(".wpurp-meal-plan-calendar").data("meal-plan-id"),o=e.find(".wpurp-meal-plan-calendar").data("start-date"),p=e.find(".wpurp-meal-plan-calendar").data("end-date"),l=e.find(".wpurp-meal-plan-calendar").data("nbr-days");e.find(".wpurp-meal-plan-date").replaceWith(r),e.find(".wpurp-meal-plan-date-readable").html("&nbsp;");var u={action:"meal_planner_change_date",security:wpurp_meal_planner.nonce,admin:a,id:s,start_date:o,end_date:p,nbr_days:l,going_back:t,view_meal_plan:i.data("id")};jQuery.post(wpurp_meal_planner.ajaxurl,u,function(t){e.html(t),RecipeMealPlanner.updateNutritional(e),"view-meal-planner"!=n&&RecipeMealPlanner.initSortable(e)})},RecipeMealPlanner.initSelect=function(e){var t=".wpurp-meal-plan-add-recipe";e&&(t+=", .wpurp-meal-plan-add-ingredient-recipe"),jQuery(t).select2wpurp({width:"off"}).on("change",function(){var e=jQuery(this);"ingredient"==e.data("type")?RecipeMealPlanner.addIngredient(e.select2wpurp("data")):RecipeMealPlanner.addRecipe(e.select2wpurp("data")),e.select2wpurp("val","")})},RecipeMealPlanner.initSortable=function(e){jQuery(".wpurp-meal-plan:not(.wpurp-meal-plan-shortcode)").find(".wpurp-meal-plan-recipe-list").sortable({connectWith:".wpurp-meal-plan-recipe-list",placeholder:"wpurp-meal-plan-recipe-placeholder",stop:function(){RecipeMealPlanner.saveMenu(e),RecipeMealPlanner.updateNutritional(e)}})},RecipeMealPlanner.addIngredient=function(e){if(""!==e.id){var t=jQuery("#wpurp-meal-plan-leftovers").is(":checked"),n=jQuery(".wpurp-meal-plan-recipe-container");n.slideUp(200,function(){n.find(".wpurp-meal-plan-recipe").remove();var i=Math.floor(1e6*Math.random()),r=t?e.text+" ("+wpurp_meal_planner.textLeftovers+")":e.text,a='<div class="wpurp-meal-plan-recipe wpurp-meal-plan-recipe-'+i+'" data-name="'+e.text+'" data-placeholder="true">';a+='<span class="wpurp-meal-plan-recipe-title">'+r+"</span>",a+="</div>",n.append(a),n.slideDown(400);var s={action:"get_ingredient_meal_plan_data",security:wpurp_meal_planner.nonce,ingredient_id:e.id};jQuery.post(wpurp_meal_planner.ajaxurl,s,function(e){if(e.success){var t=e.data.ingredient,n=jQuery("#wpurp-meal-plan-leftovers").is(":checked"),r=jQuery(".wpurp-meal-plan-recipe-"+i);r.removeClass("wpurp-meal-plan-recipe-"+i).data("placeholder","").data("type","ingredient").data("recipe",t.id).data("name",t.name).data("quantity","1").data("servings",t.servings_original).data("nutrition",t.nutrition).data("leftovers",n);var a='<span class="wpurp-meal-plan-recipe-quantity">1</span>x ';a+='<span class="wpurp-meal-plan-recipe-title">'+(n?t.name+" ("+wpurp_meal_planner.textLeftovers+")":t.name)+"</span>",a+=' <span class="wpurp-meal-plan-recipe-servings">('+t.servings_original+")</span>",r.html(a);var s=r.parents(".wpurp-meal-plan-calendar-container");RecipeMealPlanner.updateNutritional(s),RecipeMealPlanner.saveMenu(s)}},"json")})}},RecipeMealPlanner.addRecipe=function(e){if(""!==e.id){RecipeMealPlanner.getRecipeTemplate(e.id);var t=jQuery("#wpurp-meal-plan-leftovers").is(":checked"),n=jQuery(".wpurp-meal-plan-recipe-container");n.slideUp(200,function(){n.find(".wpurp-meal-plan-recipe").remove();var i=Math.floor(1e6*Math.random()),r=t?e.text+" ("+wpurp_meal_planner.textLeftovers+")":e.text,a='<div class="wpurp-meal-plan-recipe wpurp-meal-plan-recipe-'+i+'" data-name="'+e.text+'" data-placeholder="true">';a+='<span class="wpurp-meal-plan-recipe-title">'+r+"</span>",a+="</div>",n.append(a),n.slideDown(400);var s={action:"get_recipe_meal_plan_data",security:wpurp_meal_planner.nonce,recipe_id:e.id};jQuery.post(wpurp_meal_planner.ajaxurl,s,function(e){if(e.success){var t=e.data.recipe,n=jQuery("#wpurp-meal-plan-leftovers").is(":checked"),r=jQuery(".wpurp-meal-plan-recipe-"+i);r.removeClass("wpurp-meal-plan-recipe-"+i).data("placeholder","").data("type","recipe").data("recipe",t.id).data("name",t.name).data("quantity","1").data("servings",t.servings_original).data("nutrition",t.nutrition).data("leftovers",n);var a=n?t.name+" ("+wpurp_meal_planner.textLeftovers+")":t.name,s="";t.image&&(s+='<img src="'+t.image+'">'),s+='<span class="wpurp-meal-plan-recipe-title">'+a+"</span>",s+=' <span class="wpurp-meal-plan-recipe-servings">('+t.servings_original+")</span>",r.html(s);var o=r.parents(".wpurp-meal-plan-calendar-container");RecipeMealPlanner.updateNutritional(o),RecipeMealPlanner.saveMenu(o)}},"json")})}},RecipeMealPlanner.getTemplate=function(e,t,n){return"ingredient"==e?RecipeMealPlanner.getIngredientTemplate(t,n):RecipeMealPlanner.getRecipeTemplate(t,n)},RecipeMealPlanner.getIngredientTemplate=function(e,t){var n='<div style="padding: 0 20px;">';n+=wpurp_meal_planner.textQuantity+': <input type="number" min="1" class="advanced-adjust-recipe-quantity" value="1" style="width:40px !important;padding:2px !important;background:white !important;border:1px solid #bbbbbb !important;"></br>',n+=wpurp_meal_planner.textServings+': <input type="number" min="1" class="advanced-adjust-recipe-servings" value="1" style="width:40px !important;padding:2px !important;background:white !important;border:1px solid #bbbbbb !important;">',t(n+="</div>")},RecipeMealPlanner.getRecipeTemplate=function(e,t){if(void 0==RecipeMealPlanner.templates[e]){var n={action:"get_recipe_template",security:wpurp_meal_planner.nonce,recipe_id:e};jQuery.post(wpurp_meal_planner.ajaxurl,n,function(n){RecipeMealPlanner.templates[e]=n.output,void 0!==t&&t(n.output)},"json")}else void 0!==t&&t(RecipeMealPlanner.templates[e])},RecipeMealPlanner.groupBy=function(e){var t=jQuery(RecipeMealPlanner.loader);jQuery(".wpurp-meal-plan-group-by-container").append(t);var n={action:"meal_planner_groupby",security:wpurp_meal_planner.nonce,groupby:e,grid:wpurp_meal_planner_grid.slug};jQuery.post(wpurp_meal_planner.ajaxurl,n,function(e){t.remove(),jQuery(".wpurp-meal-plan-add-recipe").select2wpurp("destroy").off().html(e),RecipeMealPlanner.initSelect(!1)})},RecipeMealPlanner.checkCourseActions=function(){var e=jQuery(".wpurp-meal-plan-course");e.each(function(t,n){jQuery(n).find(".wpurp-course-move").removeClass("wpurp-disabled"),0==t?jQuery(n).find(".wpurp-course-up").addClass("wpurp-disabled"):t==e.length-1&&jQuery(n).find(".wpurp-course-down").addClass("wpurp-disabled")})},RecipeMealPlanner.getInput=function(e,t,n,i){var r=jQuery('<form class="wpurp-meal-plan-form"></form>'),a=jQuery('<input type="'+t+'" class="wpurp-meal-plan-input">'),s=jQuery('<button type="submit" class="wpurp-meal-plan-button"><i class="fa fa-check"></i></button>'),o=jQuery('<button class="wpurp-meal-plan-button"><i class="fa fa-close"></i></button>');r.append(a).append(s).append(o),e.hide().after(r),a.val(n),a.focus().select(),r.on("submit",function(n){n.preventDefault(),n.stopPropagation();var s=a.val();e.show(),r.remove(),i("number"==t?parseInt(s):s.trim())}),o.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.show(),r.remove(),i("")})},RecipeMealPlanner.getTwoInput=function(e,t,n,i){var r=jQuery('<form class="wpurp-meal-plan-form"></form>'),a=jQuery('<input type="text" class="wpurp-meal-plan-input">'),s=jQuery('<input type="text" class="wpurp-meal-plan-input">'),o=jQuery('<button type="submit" class="wpurp-meal-plan-button"><i class="fa fa-check"></i></button>'),p=jQuery('<button class="wpurp-meal-plan-button"><i class="fa fa-close"></i></button>');r.append(a).append(s).append(o).append(p),e.hide().after(r),a.val(t),s.val(n),a.focus().select(),r.on("submit",function(t){t.preventDefault(),t.stopPropagation();var n=a.val(),o=s.val();e.show(),r.remove(),i(n.trim(),o.trim())}),p.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.show(),r.remove(),i("")})},RecipeMealPlanner.getConfirm=function(e,t,n){var i=jQuery('<form class="wpurp-meal-plan-form"></form>'),r=jQuery('<span class="wpurp-meal-plan-form-message">'+t+"</span>"),a=jQuery('<button class="wpurp-meal-plan-button"><i class="fa fa-check"></i></button>'),s=jQuery('<button class="wpurp-meal-plan-button"><i class="fa fa-close"></i></button>');i.append(r).append(a).append(s),e.hide().after(i),a.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.show(),i.remove(),n(!0)}),s.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.show(),i.remove(),n(!1)})},RecipeMealPlanner.getDate=function(e,t,n){var i=jQuery('<form class="wpurp-meal-plan-form"></form>'),r=jQuery('<input type="text" class="wpurp-meal-plan-input wpurp-meal-plan-input-date">'),a=jQuery('<button type="submit" class="wpurp-meal-plan-button"><i class="fa fa-check"></i></button>'),s=jQuery('<button class="wpurp-meal-plan-button"><i class="fa fa-close"></i></button>');i.append(r).append(a).append(s),e.hide().after(i),r.val(t),r.datepicker({monthNames:wpurp_meal_planner.datepicker.monthNames,monthNamesShort:wpurp_meal_planner.datepicker.monthNamesShort,dayNames:wpurp_meal_planner.datepicker.dayNames,dayNamesShort:wpurp_meal_planner.datepicker.dayNamesShort,dayNamesMin:wpurp_meal_planner.datepicker.dayNamesMin,dateFormat:wpurp_meal_planner.datepicker.dateFormat,firstDay:wpurp_meal_planner.datepicker.firstDay,isRTL:wpurp_meal_planner.datepicker.isRTL}),i.on("submit",function(t){t.preventDefault(),t.stopPropagation();var a=r.val();e.show(),i.remove(),n(a.trim())}),s.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.show(),i.remove(),n("")})},RecipeMealPlanner.getDates=function(e,t,n,i){for(var r=jQuery('<form class="wpurp-meal-plan-form"></form>'),a=jQuery('<input type="text" class="wpurp-meal-plan-input wpurp-meal-plan-input-date">'),s=jQuery('<input type="text" class="wpurp-meal-plan-input wpurp-meal-plan-input-date">'),o=jQuery('<select class="wpurp-meal-plan-input wpurp-meal-plan-input-unit-system"></select>'),p=jQuery('<button type="submit" class="wpurp-meal-plan-button"><i class="fa fa-check"></i></button>'),l=jQuery('<button class="wpurp-meal-plan-button"><i class="fa fa-close"></i></button>'),u=0,c=wpurp_unit_conversion.systems.length;u<c;u++){var d=wpurp_unit_conversion.systems[u],h=u==wpurp_meal_planner.default_unit_system?" selected":"";o.append(jQuery('<option value="'+u+'"'+h+">"+d.name+"</option>"))}var m=jQuery('<span class="wpurp-meal-plan-input-dates"></span>').append(a).append(" - ").append(s);r.append(m).append(o).append(p).append(l),e.hide().after(r),a.val(t),s.val(n),a.datepicker({monthNames:wpurp_meal_planner.datepicker.monthNames,monthNamesShort:wpurp_meal_planner.datepicker.monthNamesShort,dayNames:wpurp_meal_planner.datepicker.dayNames,dayNamesShort:wpurp_meal_planner.datepicker.dayNamesShort,dayNamesMin:wpurp_meal_planner.datepicker.dayNamesMin,dateFormat:wpurp_meal_planner.datepicker.dateFormat,firstDay:wpurp_meal_planner.datepicker.firstDay,isRTL:wpurp_meal_planner.datepicker.isRTL}),s.datepicker({monthNames:wpurp_meal_planner.datepicker.monthNames,monthNamesShort:wpurp_meal_planner.datepicker.monthNamesShort,dayNames:wpurp_meal_planner.datepicker.dayNames,dayNamesShort:wpurp_meal_planner.datepicker.dayNamesShort,dayNamesMin:wpurp_meal_planner.datepicker.dayNamesMin,dateFormat:wpurp_meal_planner.datepicker.dateFormat,firstDay:wpurp_meal_planner.datepicker.firstDay,isRTL:wpurp_meal_planner.datepicker.isRTL}),r.on("submit",function(t){t.preventDefault(),t.stopPropagation();var n=a.val(),p=s.val(),l=o.val();e.show(),r.remove(),i(n.trim(),p.trim(),l)}),l.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.show(),r.remove(),i("","")}),"1"!=wpurp_meal_planner.adjustable_system&&(o.hide(),"none"==m.css("display")&&r.submit())},RecipeMealPlanner.saveMenu=function(e){var t=e.find(".wpurp-meal-plan-calendar"),n=t.data("meal-plan-id"),i=t.data("start-date"),r=t.data("nbr-days"),a=[];t.find(".wpurp-meal-plan-course").each(function(e){var t=jQuery(this),n=t.find(".wpurp-meal-plan-course-name").text(),i=[];t.find(".wpurp-meal-plan-recipe-list").each(function(e){var t=[];jQuery(this).find(".wpurp-meal-plan-recipe").each(function(e){var n=jQuery(this);if("true"!=n.data("placeholder")){var i=n.data("type"),r=n.data("recipe"),a=n.data("quantity"),s=n.data("servings"),o=n.data("leftovers");t[e]={type:i,id:r,quantity:a,servings:s,leftovers:o}}}),i[e]=t}),a[e]={name:n,days:i}});var s={id:n,start_date:i,nbr_days:r,courses:a};clearTimeout(RecipeMealPlanner.ajaxUpdateTimer),RecipeMealPlanner.ajaxUpdateTimer=setTimeout(function(){RecipeMealPlanner.ajaxSaveMenu(s)},1e3)},RecipeMealPlanner.ajaxSaveMenu=function(e){var t={action:"meal_planner_save",security:wpurp_meal_planner.nonce,security_admin:wpurp_meal_planner.nonce_admin,menu:e};jQuery.post(wpurp_meal_planner.ajaxurl,t,function(e){})},RecipeMealPlanner.generateShoppingList=function(e,t){for(var n=[],i=[],r=236.6,a=0,s=wpurp_unit_conversion.systems.length;a<s;a++){var o=wpurp_unit_conversion.systems[a];-1!=jQuery.inArray("cup",o.units_volume)&&(r=parseFloat(o.cup_type))}for(var a=0,s=e.length;a<s;a++){var p=e[a];void 0===i[p.name]&&(i[p.name]=p.plural),void 0===n[p.group]&&(n[p.group]=[]),void 0===n[p.group][p.name]&&(n[p.group][p.name]=[]);var l=p.amount,u=p.unit,c=RecipeUnitConversion.getUnitFromAlias(p.unit);if(void 0!==c&&"1"==wpurp_meal_planner.consolidate_ingredients){var d=RecipeUnitConversion.getAbbreviation(c);if("cup"==d){var h=new Qty("1 cup").to("ml").scalar;Math.abs(r-h)>.1&&(l*=r/h)}var m=(U=new Qty(l+" "+d)).toBase();"m3"==m.units()&&(m=m.to("l")),u=m.units(),l=m.scalar}""==u&&(u="wpurp_nounit"),isNaN(n[p.group][p.name][u])&&(n[p.group][p.name][u]=0),n[p.group][p.name][u]+=parseFloat(l)}var f=Object.keys(n);f.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});var g=jQuery("<tbody></tbody>");for(a=0,s=f.length;a<s;a++){var w=f[a],v=n[w],y=jQuery('<tr class="wpurp-shopping-list-group"><td colspan="2"><span class="wpurp-shopping-list-group-name">'+w+'</span><span class="wpurp-meal-plan-actions"><i class="fa fa-pencil wpurp-group-edit"></i><i class="fa fa-trash wpurp-group-delete"></i></span></td></tr>');g.append(y);var b=Object.keys(v);b.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});for(var _=0,j=b.length;_<j;_++){var C=v[p=b[_]];for(var u in C){l=C[u];if(isFinite(l)){for(var Q=jQuery('<tr class="wpurp-shopping-list-ingredient"></tr>'),k=RecipeUnitConversion.getUnitFromAlias(u),A=[t],R=!1,S=0;S<A.length;S++){var x=l,M=u;if("wpurp_nounit"==u)M="";else if(void 0!==k&&("1"==wpurp_meal_planner.consolidate_ingredients||!RecipeUnitConversion.isUniversal(k)&&-1==jQuery.inArray(A[S],RecipeUnitConversion.getUnitSystems(k)))){var U=RecipeUnitConversion.convertUnitToSystem(l,k,0,A[S]),x=U.amount;M=RecipeUnitConversion.getUserAbbreviation(U.unit,x)}x=RecipeUnitConversion.formatNumber(x,wpurp_meal_planner.fractions),(parseFloat(x)>1||0==parseFloat(x)||""!==M)&&(R=!0),Q.append('<td><span class="wpurp-shopping-list-ingredient-quantity">'+x+" "+M+'</span><span class="wpurp-meal-plan-actions"><i class="fa fa-pencil wpurp-ingredient-edit"></i><i class="fa fa-trash wpurp-ingredient-delete"></i></span></td>')}var P=(P=R?i[p]:p).charAt(0).toUpperCase()+P.slice(1),T="";"1"==wpurp_meal_planner.checkboxes&&(T='<input type="checkbox" class="wpurp-shopping-list-ingredient-checkbox"> '),Q.prepend("<td>"+T+'<span class="wpurp-shopping-list-ingredient-name">'+P+"</span></td>"),g.append(Q)}}}}return g},RecipeMealPlanner.updateNutritional=function(e){for(var t=e.find(".wpurp-meal-plan-nutrition"),n={},i=0,r=wpurp_meal_planner.nutrition_facts_fields.length;i<r;i++){s=wpurp_meal_planner.nutrition_facts_fields[i];n[s+"_per_day"]=[]}var a=[];if(t.length>0){if(e.find(".wpurp-meal-plan-course").each(function(e){jQuery(this).find(".wpurp-meal-plan-recipe-list").each(function(e){for(var t=0,i=wpurp_meal_planner.nutrition_facts_fields.length;t<i;t++){var r=wpurp_meal_planner.nutrition_facts_fields[t];void 0==n[r+"_per_day"][e]&&(n[r+"_per_day"][e]=0)}void 0==a[e]&&(a[e]=0),jQuery(this).find(".wpurp-meal-plan-recipe").each(function(t){var i=jQuery(this),r=i.data("type"),s=parseFloat(i.data("quantity")),o=parseFloat(i.data("servings")),p=i.data("nutrition")||"";p=p.split(";");for(var l={},u=!1,c=0,d=wpurp_meal_planner.nutrition_facts_fields.length;c<d;c++){var h=wpurp_meal_planner.nutrition_facts_fields[c];l=parseFloat(p[c])||0,"ingredient"==r&&(l*=s/o),"1"==wpurp_meal_planner.nutrition_facts_total&&(l*=o),l>0&&(u=!0),n[h+"_per_day"][e]+=l}u||(a[e]+=1)})})}),"kilojoules"==wpurp_meal_planner.nutrition_facts_calories_type&&void 0!==n.calories_per_day)for(var i=0,r=n.calories_per_day.length;i<r;i++)n.calories_per_day[i]=parseInt(4.1868*n.calories_per_day[i]);for(var i=0,r=wpurp_meal_planner.nutrition_facts_fields.length;i<r;i++){var s=wpurp_meal_planner.nutrition_facts_fields[i],o=t.find(".wpurp-meal-plan-nutrition-facts-"+s);o.length>0&&o.find("td").each(function(e){var t=parseInt(n[s+"_per_day"][e])||0;jQuery(this).find(".wpurp-meal-plan-nutrition-value").text(t)})}t.find(".wpurp-meal-plan-nutrition-facts-missing").find("td").each(function(e){a[e]>0?(jQuery(this).find(".wpurp-meal-plan-nutrition-missing-value").text(a[e]),jQuery(this).find(".wpurp-meal-plan-nutrition-missing").show()):jQuery(this).find(".wpurp-meal-plan-nutrition-missing").hide()})}},RecipeMealPlanner.updateNutritionalValues=function(e,t){e.length>0&&e.find("td").each(function(e){var n=parseInt(t[e])||0;jQuery(this).find(".wpurp-meal-plan-nutrition-value").text(n)})},jQuery(document).ready(function(){jQuery(".wpurp-meal-planner, .wpurp-meal-plan-shortcode, .wpurp-view-meal-plan").each(function(){RecipeMealPlanner.init(jQuery(this))})});