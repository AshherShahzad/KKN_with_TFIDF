window.__spEnv='PROD';
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i={LOCAL:{debug:!0,apiUrl:"https://service-dev.sp.advertising.com/sp/v0/pixels"},DEV:{debug:!0,apiUrl:"https://service-dev.sp.advertising.com/sp/v0/pixels"},PROD:{debug:!1,apiUrl:"https://service.sp.advertising.com/sp/v0/pixels"}}[window.__spEnv||"LOCAL"];!function(e,t){var n="https:"===e.location.protocol||i.debug,r="spt-sync",o={},a={sp:0},l=[];function c(e){var t=function(e){return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]}(e),n=t.split("."),i=n.length;return i>2&&(t=n[i-2]+"."+n[i-1],2===n[i-2].length&&2===n[i-1].length&&(t=n[i-3]+"."+t)),t}function s(t){e.console&&!0===i.debug&&console.log(t)}function d(e,t,n){if(e&&e.body){var i=e.createElement("iframe");if(i.width=0,i.height=0,i.frameBorder=0,i.id=n||null,t)i.src=t;else{if(!i.body){var r=e.createElement("body");i.appendChild(r)}if(!i.head){var o=e.createElement("head");i.appendChild(o)}}return e.body.appendChild(i),i}}function p(e){return n?e.s:e.u}function u(e){return void 0===e.id?(s("firePixel: undefined parameter, id: "+e.id),!1):function(e){if(void 0===e.id||void 0===e)return s("Unable to fire pixel. id: "+e.id+" px: "+e),!1;var n=t.createElement("img");if(n.width=0,n.height=0,n.setAttribute("data-px-id",e.id),n.setAttribute("data-px-type","sp"),n.src=p(e),n.onload=function(){f(e.id,"sp")},n.onerror=function(){f(e.id,"sp")},!t.body){var i=t.createElement("body");t.appendChild(i)}return t.body.appendChild(n),s("fire: Pixel Fired - pxid: "+e.id),a.global++,!0}(e)}function f(e,t){o[t]=o[t]?o[t]+"&pixelId"+e+"=0":"pixelId"+e+"=0",a[t]--,0===a[t]&&s("Stats for pixel server: "+o[t]+" type: "+t)}function m(o){(function(){var n,o,a,l=!1,c=i.debug||(n=new RegExp("APID=[^;]+"),null!==(o=t.cookie.match(n))?o[0].split("=")[1]:null);if(e.localStorage&&e.localStorage.getItem(r)){var s=new Date(e.localStorage.getItem(r)),d=new Date;l=Math.abs(d-s)<18e6}return a=i.apiUrl,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%@_.~+&:]*)*(\\?[;&a-z\\d%@_.,~+&:=-]*)?(\\#[-a-z\\d_]*)?$","i").test(a)&&c&&!l})()&&function(t,n,i,r,o){r=r||"json",o=o||"GET";var a=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),l=function(){var e="";switch(r){case"json":e=JSON.parse(a.responseText);break;default:e=a.responseText}i(e)},c=n?Object.keys(n).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"):null;t+=t.indexOf("?")>-1?c:"?"+c,e.XDomainRequest&&!function(t){var n=t.split("/");return n[0]+"//"!=e.location.protocol+"//"||n[2]===e.location.host}(t)&&((a=new XDomainRequest).onload=l),"image"===r&&a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined");var d=function(){s("Please enabled CORS using access-control-allow-origin"),i(JSON.parse(a.status))};a.onerror=d,a.onreadystatechange=function(e){4===a.readyState&&200===a.status&&l()};try{"withCredentials"in a?(a.withCredentials=!0,a.open(o,t,!0)):a.open(o,t),a.send(c)}catch(e){d()}}(i.apiUrl,o,function(i){if(i){if(i.pixels)if(i.pixels.length){l=i.pixels,s("Your current pixel count: "+i.pixels.length);var o=d(t,null,"sp-iframe"),a=e.navigator.userAgent.toLowerCase().indexOf("firefox")>-1?500:0;setTimeout(function(){!function(e,i){var r=e?e.contentWindow.document:t;if((i=i&&i.length?i:l)&&i.length){var o="default-src 'self'; img-src ",a=n?"https://":"http://";o+=a+"pixel.advertising.com",i.forEach(function(e){var t=r.createElement("a"),i=n?e.s:e.u;t.href=i,t.hostname?o+=" "+a+"*."+c(t.hostname):o+=" *."+c(i)});var s=r.createElement("meta");if(s.httpEquiv="Content-Security-Policy",s.content=o,r.head)r.head.appendChild(s);else{var d=r.createElement("head");d.appendChild(s),r.appendChild(d)}}}(o),t=o.contentWindow.document,function(e){for(var n=0;n<e.length;n++)e[n].t&&"iframe"===e[n].t?d(t,p(e[n])):u(e[n])}(l)},a),e.localStorage&&e.localStorage.getItem(r)&&e.localStorage.removeItem(r)}else e.localStorage&&e.localStorage.setItem(r,(new Date).toString())}else s("Something went wrong: "+i)})}e.addEventListener("load",function(){!function(){if(!e.__cmp){for(var t,n=e;!t;){try{n.frames.__cmpLocator&&(t=n)}catch(e){}if(n===e.top)break;n=n.parent}var i={};e.__cmp=function(e,n,r){if(t){var o=Math.random()+"",a={__cmpCall:{command:e,parameter:n,callId:o}};i[o]=r,t.postMessage(a,"*")}else r({msg:"CMP not found"},!1)},e.addEventListener("message",function(e){var t="string"==typeof e.data,n=e.data;if(t)try{n=JSON.parse(e.data)}catch(e){}if(n.__cmpReturn){var r=n.__cmpReturn;i[r.callId](r.returnValue,r.success),delete i[r.callId]}},!1)}!function(){if(e.__cmp){var t=!1,n=!1;setTimeout(function(){t=!0,n||m()},1e3),e.__cmp("getConsentData",null,function(e){t||(n=!0,m({euconsent:void 0!==e.consentData?e.consentData:null,gdpr:void 0!==e.gdprApplies?e.gdprApplies:null}))})}else m()}()}()})}(window,document)}]);